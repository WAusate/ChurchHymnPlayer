var Sv=t=>{throw TypeError(t)};var Dh=(t,e,n)=>e.has(t)||Sv("Cannot "+n);var D=(t,e,n)=>(Dh(t,e,"read from private field"),n?n.call(t):e.get(t)),J=(t,e,n)=>e.has(t)?Sv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),G=(t,e,n,r)=>(Dh(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ce=(t,e,n)=>(Dh(t,e,"access private method"),n);var Ac=(t,e,n,r)=>({set _(s){G(t,e,s,n)},get _(){return D(t,e,r)}});function PA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function bA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uE={exports:{}},xd={},dE={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bl=Symbol.for("react.element"),kA=Symbol.for("react.portal"),NA=Symbol.for("react.fragment"),OA=Symbol.for("react.strict_mode"),DA=Symbol.for("react.profiler"),LA=Symbol.for("react.provider"),MA=Symbol.for("react.context"),VA=Symbol.for("react.forward_ref"),jA=Symbol.for("react.suspense"),FA=Symbol.for("react.memo"),UA=Symbol.for("react.lazy"),Cv=Symbol.iterator;function zA(t){return t===null||typeof t!="object"?null:(t=Cv&&t[Cv]||t["@@iterator"],typeof t=="function"?t:null)}var hE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fE=Object.assign,pE={};function Wo(t,e,n){this.props=t,this.context=e,this.refs=pE,this.updater=n||hE}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mE(){}mE.prototype=Wo.prototype;function wm(t,e,n){this.props=t,this.context=e,this.refs=pE,this.updater=n||hE}var Em=wm.prototype=new mE;Em.constructor=wm;fE(Em,Wo.prototype);Em.isPureReactComponent=!0;var Av=Array.isArray,gE=Object.prototype.hasOwnProperty,Tm={current:null},yE={key:!0,ref:!0,__self:!0,__source:!0};function vE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)gE.call(e,r)&&!yE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Bl,type:t,key:i,ref:o,props:s,_owner:Tm.current}}function BA(t,e){return{$$typeof:Bl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bl}function $A(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rv=/\/+/g;function Lh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$A(""+t.key):e.toString(36)}function su(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bl:case kA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Lh(o,0):r,Av(s)?(n="",t!=null&&(n=t.replace(Rv,"$&/")+"/"),su(s,e,n,"",function(u){return u})):s!=null&&(xm(s)&&(s=BA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Av(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Lh(i,a);o+=su(i,e,n,c,s)}else if(c=zA(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Lh(i,a++),o+=su(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rc(t,e,n){if(t==null)return t;var r=[],s=0;return su(t,r,"","",function(i){return e.call(n,i,s++)}),r}function HA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},iu={transition:null},qA={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:iu,ReactCurrentOwner:Tm};function _E(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Rc,forEach:function(t,e,n){Rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rc(t,function(){e++}),e},toArray:function(t){return Rc(t,function(e){return e})||[]},only:function(t){if(!xm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Wo;ae.Fragment=NA;ae.Profiler=DA;ae.PureComponent=wm;ae.StrictMode=OA;ae.Suspense=jA;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA;ae.act=_E;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Tm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)gE.call(e,c)&&!yE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Bl,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:MA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LA,_context:t},t.Consumer=t};ae.createElement=vE;ae.createFactory=function(t){var e=vE.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:VA,render:t}};ae.isValidElement=xm;ae.lazy=function(t){return{$$typeof:UA,_payload:{_status:-1,_result:t},_init:HA}};ae.memo=function(t,e){return{$$typeof:FA,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=iu.transition;iu.transition={};try{t()}finally{iu.transition=e}};ae.unstable_act=_E;ae.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ae.useContext=function(t){return Mt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ae.useId=function(){return Mt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ae.useRef=function(t){return Mt.current.useRef(t)};ae.useState=function(t){return Mt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Mt.current.useTransition()};ae.version="18.3.1";dE.exports=ae;var R=dE.exports;const Vr=bA(R),WA=PA({__proto__:null,default:Vr},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KA=R,GA=Symbol.for("react.element"),QA=Symbol.for("react.fragment"),YA=Object.prototype.hasOwnProperty,XA=KA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JA={key:!0,ref:!0,__self:!0,__source:!0};function wE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)YA.call(e,r)&&!JA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:GA,type:t,key:i,ref:o,props:s,_owner:XA.current}}xd.Fragment=QA;xd.jsx=wE;xd.jsxs=wE;uE.exports=xd;var g=uE.exports,EE={exports:{}},nn={},TE={exports:{}},xE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var Q=F.length;F.push(H);e:for(;0<Q;){var ie=Q-1>>>1,_e=F[ie];if(0<s(_e,H))F[ie]=H,F[Q]=_e,Q=ie;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var H=F[0],Q=F.pop();if(Q!==H){F[0]=Q;e:for(var ie=0,_e=F.length,ke=_e>>>1;ie<ke;){var yn=2*(ie+1)-1,vn=F[yn],_n=yn+1,sn=F[_n];if(0>s(vn,Q))_n<_e&&0>s(sn,vn)?(F[ie]=sn,F[_n]=Q,ie=_n):(F[ie]=vn,F[yn]=Q,ie=yn);else if(_n<_e&&0>s(sn,Q))F[ie]=sn,F[_n]=Q,ie=_n;else break e}}return H}function s(F,H){var Q=F.sortIndex-H.sortIndex;return Q!==0?Q:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,p=3,v=!1,T=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(F){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=F)r(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(u)}}function k(F){if(E=!1,C(F),!T)if(n(c)!==null)T=!0,se(L);else{var H=n(u);H!==null&&ne(k,H.startTime-F)}}function L(F,H){T=!1,E&&(E=!1,_(y),y=-1),v=!0;var Q=p;try{for(C(H),f=n(c);f!==null&&(!(f.expirationTime>H)||F&&!N());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,p=f.priorityLevel;var _e=ie(f.expirationTime<=H);H=t.unstable_now(),typeof _e=="function"?f.callback=_e:f===n(c)&&r(c),C(H)}else r(c);f=n(c)}if(f!==null)var ke=!0;else{var yn=n(u);yn!==null&&ne(k,yn.startTime-H),ke=!1}return ke}finally{f=null,p=Q,v=!1}}var V=!1,S=null,y=-1,I=5,P=-1;function N(){return!(t.unstable_now()-P<I)}function O(){if(S!==null){var F=t.unstable_now();P=F;var H=!0;try{H=S(!0,F)}finally{H?b():(V=!1,S=null)}}else V=!1}var b;if(typeof w=="function")b=function(){w(O)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ye=Z.port2;Z.port1.onmessage=O,b=function(){ye.postMessage(null)}}else b=function(){A(O,0)};function se(F){S=F,V||(V=!0,b())}function ne(F,H){y=A(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,se(L))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var Q=p;p=H;try{return F()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=p;p=F;try{return H()}finally{p=Q}},t.unstable_scheduleCallback=function(F,H,Q){var ie=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ie+Q:ie):Q=ie,F){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Q+_e,F={id:d++,callback:H,priorityLevel:F,startTime:Q,expirationTime:_e,sortIndex:-1},Q>ie?(F.sortIndex=Q,e(u,F),n(c)===null&&F===n(u)&&(E?(_(y),y=-1):E=!0,ne(k,Q-ie))):(F.sortIndex=_e,e(c,F),T||v||(T=!0,se(L))),F},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(F){var H=p;return function(){var Q=p;p=H;try{return F.apply(this,arguments)}finally{p=Q}}}})(xE);TE.exports=xE;var ZA=TE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eR=R,tn=ZA;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IE=new Set,ol={};function wi(t,e){Po(t,e),Po(t+"Capture",e)}function Po(t,e){for(ol[t]=e,t=0;t<e.length;t++)IE.add(e[t])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rf=Object.prototype.hasOwnProperty,tR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pv={},bv={};function nR(t){return Rf.call(bv,t)?!0:Rf.call(Pv,t)?!1:tR.test(t)?bv[t]=!0:(Pv[t]=!0,!1)}function rR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sR(t,e,n,r){if(e===null||typeof e>"u"||rR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Im=/[\-:]([a-z])/g;function Sm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Im,Sm);at[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Im,Sm);at[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Im,Sm);at[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cm(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sR(e,n,s,r)&&(n=null),r||s===null?nR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ar=eR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pc=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Fi=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),Pf=Symbol.for("react.profiler"),SE=Symbol.for("react.provider"),CE=Symbol.for("react.context"),Rm=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),Pm=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),kv=Symbol.iterator;function Ta(t){return t===null||typeof t!="object"?null:(t=kv&&t[kv]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Mh;function Oa(t){if(Mh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mh=e&&e[1]||""}return`
`+Mh+t}var Vh=!1;function jh(t,e){if(!t||Vh)return"";Vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Vh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oa(t):""}function iR(t){switch(t.tag){case 5:return Oa(t.type);case 16:return Oa("Lazy");case 13:return Oa("Suspense");case 19:return Oa("SuspenseList");case 0:case 2:case 15:return t=jh(t.type,!1),t;case 11:return t=jh(t.type.render,!1),t;case 1:return t=jh(t.type,!0),t;default:return""}}function Nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fi:return"Fragment";case ji:return"Portal";case Pf:return"Profiler";case Am:return"StrictMode";case bf:return"Suspense";case kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CE:return(t.displayName||"Context")+".Consumer";case SE:return(t._context.displayName||"Context")+".Provider";case Rm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pm:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}function oR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nf(e);case 8:return e===Am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aR(t){var e=RE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bc(t){t._valueTracker||(t._valueTracker=aR(t))}function PE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ru(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Of(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ys(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bE(t,e){e=e.checked,e!=null&&Cm(t,"checked",e,!1)}function Df(t,e){bE(t,e);var n=ys(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lf(t,e.type,ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ov(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lf(t,e,n){(e!=="number"||Ru(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Da=Array.isArray;function Xi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ys(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Da(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ys(n)}}function kE(t,e){var n=ys(e.value),r=ys(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kc,OE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kc=kc||document.createElement("div"),kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $a={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lR=["Webkit","ms","Moz","O"];Object.keys($a).forEach(function(t){lR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$a[e]=$a[t]})});function DE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$a.hasOwnProperty(t)&&$a[t]?(""+e).trim():e+"px"}function LE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=DE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cR=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(t,e){if(e){if(cR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=null;function bm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zf=null,Ji=null,Zi=null;function Mv(t){if(t=ql(t)){if(typeof zf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Rd(e),zf(t.stateNode,t.type,e))}}function ME(t){Ji?Zi?Zi.push(t):Zi=[t]:Ji=t}function VE(){if(Ji){var t=Ji,e=Zi;if(Zi=Ji=null,Mv(t),e)for(t=0;t<e.length;t++)Mv(e[t])}}function jE(t,e){return t(e)}function FE(){}var Fh=!1;function UE(t,e,n){if(Fh)return t(e,n);Fh=!0;try{return jE(t,e,n)}finally{Fh=!1,(Ji!==null||Zi!==null)&&(FE(),VE())}}function ll(t,e){var n=t.stateNode;if(n===null)return null;var r=Rd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Bf=!1;if(gr)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{Bf=!1}function uR(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ha=!1,Pu=null,bu=!1,$f=null,dR={onError:function(t){Ha=!0,Pu=t}};function hR(t,e,n,r,s,i,o,a,c){Ha=!1,Pu=null,uR.apply(dR,arguments)}function fR(t,e,n,r,s,i,o,a,c){if(hR.apply(this,arguments),Ha){if(Ha){var u=Pu;Ha=!1,Pu=null}else throw Error(z(198));bu||(bu=!0,$f=u)}}function Ei(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vv(t){if(Ei(t)!==t)throw Error(z(188))}function pR(t){var e=t.alternate;if(!e){if(e=Ei(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Vv(s),t;if(i===r)return Vv(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function BE(t){return t=pR(t),t!==null?$E(t):null}function $E(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$E(t);if(e!==null)return e;t=t.sibling}return null}var HE=tn.unstable_scheduleCallback,jv=tn.unstable_cancelCallback,mR=tn.unstable_shouldYield,gR=tn.unstable_requestPaint,Ue=tn.unstable_now,yR=tn.unstable_getCurrentPriorityLevel,km=tn.unstable_ImmediatePriority,qE=tn.unstable_UserBlockingPriority,ku=tn.unstable_NormalPriority,vR=tn.unstable_LowPriority,WE=tn.unstable_IdlePriority,Id=null,Hn=null;function _R(t){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Id,t,void 0,(t.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:TR,wR=Math.log,ER=Math.LN2;function TR(t){return t>>>=0,t===0?32:31-(wR(t)/ER|0)|0}var Nc=64,Oc=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=La(a):(i&=o,i!==0&&(r=La(i)))}else o=n&~s,o!==0?r=La(o):i!==0&&(r=La(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rn(e),s=1<<n,r|=t[n],e&=~s;return r}function xR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Rn(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=xR(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KE(){var t=Nc;return Nc<<=1,!(Nc&4194240)&&(Nc=64),t}function Uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rn(e),t[e]=n}function SR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function GE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QE,Om,YE,XE,JE,qf=!1,Dc=[],ss=null,is=null,os=null,cl=new Map,ul=new Map,zr=[],CR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fv(t,e){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(e.pointerId)}}function Ia(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ql(e),e!==null&&Om(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function AR(t,e,n,r,s){switch(e){case"focusin":return ss=Ia(ss,t,e,n,r,s),!0;case"dragenter":return is=Ia(is,t,e,n,r,s),!0;case"mouseover":return os=Ia(os,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cl.set(i,Ia(cl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ul.set(i,Ia(ul.get(i)||null,t,e,n,r,s)),!0}return!1}function ZE(t){var e=qs(t.target);if(e!==null){var n=Ei(e);if(n!==null){if(e=n.tag,e===13){if(e=zE(n),e!==null){t.blockedOn=e,JE(t.priority,function(){YE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ou(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uf=r,n.target.dispatchEvent(r),Uf=null}else return e=ql(n),e!==null&&Om(e),t.blockedOn=n,!1;e.shift()}return!0}function Uv(t,e,n){ou(t)&&n.delete(e)}function RR(){qf=!1,ss!==null&&ou(ss)&&(ss=null),is!==null&&ou(is)&&(is=null),os!==null&&ou(os)&&(os=null),cl.forEach(Uv),ul.forEach(Uv)}function Sa(t,e){t.blockedOn===e&&(t.blockedOn=null,qf||(qf=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,RR)))}function dl(t){function e(s){return Sa(s,t)}if(0<Dc.length){Sa(Dc[0],t);for(var n=1;n<Dc.length;n++){var r=Dc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ss!==null&&Sa(ss,t),is!==null&&Sa(is,t),os!==null&&Sa(os,t),cl.forEach(e),ul.forEach(e),n=0;n<zr.length;n++)r=zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zr.length&&(n=zr[0],n.blockedOn===null);)ZE(n),n.blockedOn===null&&zr.shift()}var eo=Ar.ReactCurrentBatchConfig,Ou=!0;function PR(t,e,n,r){var s=we,i=eo.transition;eo.transition=null;try{we=1,Dm(t,e,n,r)}finally{we=s,eo.transition=i}}function bR(t,e,n,r){var s=we,i=eo.transition;eo.transition=null;try{we=4,Dm(t,e,n,r)}finally{we=s,eo.transition=i}}function Dm(t,e,n,r){if(Ou){var s=Wf(t,e,n,r);if(s===null)Yh(t,e,r,Du,n),Fv(t,r);else if(AR(s,t,e,n,r))r.stopPropagation();else if(Fv(t,r),e&4&&-1<CR.indexOf(t)){for(;s!==null;){var i=ql(s);if(i!==null&&QE(i),i=Wf(t,e,n,r),i===null&&Yh(t,e,r,Du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yh(t,e,r,null,n)}}var Du=null;function Wf(t,e,n,r){if(Du=null,t=bm(r),t=qs(t),t!==null)if(e=Ei(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Du=t,null}function e1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yR()){case km:return 1;case qE:return 4;case ku:case vR:return 16;case WE:return 536870912;default:return 16}default:return 16}}var es=null,Lm=null,au=null;function t1(){if(au)return au;var t,e=Lm,n=e.length,r,s="value"in es?es.value:es.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return au=s.slice(t,1<r?1-r:void 0)}function lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lc(){return!0}function zv(){return!1}function rn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Lc:zv,this.isPropagationStopped=zv,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lc)},persist:function(){},isPersistent:Lc}),e}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mm=rn(Ko),Hl=Le({},Ko,{view:0,detail:0}),kR=rn(Hl),zh,Bh,Ca,Sd=Le({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(zh=t.screenX-Ca.screenX,Bh=t.screenY-Ca.screenY):Bh=zh=0,Ca=t),zh)},movementY:function(t){return"movementY"in t?t.movementY:Bh}}),Bv=rn(Sd),NR=Le({},Sd,{dataTransfer:0}),OR=rn(NR),DR=Le({},Hl,{relatedTarget:0}),$h=rn(DR),LR=Le({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),MR=rn(LR),VR=Le({},Ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jR=rn(VR),FR=Le({},Ko,{data:0}),$v=rn(FR),UR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $R(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BR[t])?!!e[t]:!1}function Vm(){return $R}var HR=Le({},Hl,{key:function(t){if(t.key){var e=UR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vm,charCode:function(t){return t.type==="keypress"?lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qR=rn(HR),WR=Le({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hv=rn(WR),KR=Le({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vm}),GR=rn(KR),QR=Le({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),YR=rn(QR),XR=Le({},Sd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JR=rn(XR),ZR=[9,13,27,32],jm=gr&&"CompositionEvent"in window,qa=null;gr&&"documentMode"in document&&(qa=document.documentMode);var eP=gr&&"TextEvent"in window&&!qa,n1=gr&&(!jm||qa&&8<qa&&11>=qa),qv=" ",Wv=!1;function r1(t,e){switch(t){case"keyup":return ZR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ui=!1;function tP(t,e){switch(t){case"compositionend":return s1(e);case"keypress":return e.which!==32?null:(Wv=!0,qv);case"textInput":return t=e.data,t===qv&&Wv?null:t;default:return null}}function nP(t,e){if(Ui)return t==="compositionend"||!jm&&r1(t,e)?(t=t1(),au=Lm=es=null,Ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n1&&e.locale!=="ko"?null:e.data;default:return null}}var rP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rP[t.type]:e==="textarea"}function i1(t,e,n,r){ME(r),e=Lu(e,"onChange"),0<e.length&&(n=new Mm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wa=null,hl=null;function sP(t){g1(t,0)}function Cd(t){var e=$i(t);if(PE(e))return t}function iP(t,e){if(t==="change")return e}var o1=!1;if(gr){var Hh;if(gr){var qh="oninput"in document;if(!qh){var Gv=document.createElement("div");Gv.setAttribute("oninput","return;"),qh=typeof Gv.oninput=="function"}Hh=qh}else Hh=!1;o1=Hh&&(!document.documentMode||9<document.documentMode)}function Qv(){Wa&&(Wa.detachEvent("onpropertychange",a1),hl=Wa=null)}function a1(t){if(t.propertyName==="value"&&Cd(hl)){var e=[];i1(e,hl,t,bm(t)),UE(sP,e)}}function oP(t,e,n){t==="focusin"?(Qv(),Wa=e,hl=n,Wa.attachEvent("onpropertychange",a1)):t==="focusout"&&Qv()}function aP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cd(hl)}function lP(t,e){if(t==="click")return Cd(e)}function cP(t,e){if(t==="input"||t==="change")return Cd(e)}function uP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:uP;function fl(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rf.call(e,s)||!bn(t[s],e[s]))return!1}return!0}function Yv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xv(t,e){var n=Yv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yv(n)}}function l1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?l1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c1(){for(var t=window,e=Ru();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ru(t.document)}return e}function Fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dP(t){var e=c1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&l1(n.ownerDocument.documentElement,n)){if(r!==null&&Fm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xv(n,i);var o=Xv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hP=gr&&"documentMode"in document&&11>=document.documentMode,zi=null,Kf=null,Ka=null,Gf=!1;function Jv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gf||zi==null||zi!==Ru(r)||(r=zi,"selectionStart"in r&&Fm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ka&&fl(Ka,r)||(Ka=r,r=Lu(Kf,"onSelect"),0<r.length&&(e=new Mm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zi)))}function Mc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bi={animationend:Mc("Animation","AnimationEnd"),animationiteration:Mc("Animation","AnimationIteration"),animationstart:Mc("Animation","AnimationStart"),transitionend:Mc("Transition","TransitionEnd")},Wh={},u1={};gr&&(u1=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Ad(t){if(Wh[t])return Wh[t];if(!Bi[t])return t;var e=Bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in u1)return Wh[t]=e[n];return t}var d1=Ad("animationend"),h1=Ad("animationiteration"),f1=Ad("animationstart"),p1=Ad("transitionend"),m1=new Map,Zv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){m1.set(t,e),wi(e,[t])}for(var Kh=0;Kh<Zv.length;Kh++){var Gh=Zv[Kh],fP=Gh.toLowerCase(),pP=Gh[0].toUpperCase()+Gh.slice(1);bs(fP,"on"+pP)}bs(d1,"onAnimationEnd");bs(h1,"onAnimationIteration");bs(f1,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(p1,"onTransitionEnd");Po("onMouseEnter",["mouseout","mouseover"]);Po("onMouseLeave",["mouseout","mouseover"]);Po("onPointerEnter",["pointerout","pointerover"]);Po("onPointerLeave",["pointerout","pointerover"]);wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function e0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fR(r,e,void 0,t),t.currentTarget=null}function g1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;e0(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;e0(s,a,u),i=c}}}if(bu)throw t=$f,bu=!1,$f=null,t}function Ce(t,e){var n=e[Zf];n===void 0&&(n=e[Zf]=new Set);var r=t+"__bubble";n.has(r)||(y1(e,t,2,!1),n.add(r))}function Qh(t,e,n){var r=0;e&&(r|=4),y1(n,t,r,e)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function pl(t){if(!t[Vc]){t[Vc]=!0,IE.forEach(function(n){n!=="selectionchange"&&(mP.has(n)||Qh(n,!1,t),Qh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vc]||(e[Vc]=!0,Qh("selectionchange",!1,e))}}function y1(t,e,n,r){switch(e1(e)){case 1:var s=PR;break;case 4:s=bR;break;default:s=Dm}n=s.bind(null,e,n,t),s=void 0,!Bf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qs(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}UE(function(){var u=i,d=bm(n),f=[];e:{var p=m1.get(t);if(p!==void 0){var v=Mm,T=t;switch(t){case"keypress":if(lu(n)===0)break e;case"keydown":case"keyup":v=qR;break;case"focusin":T="focus",v=$h;break;case"focusout":T="blur",v=$h;break;case"beforeblur":case"afterblur":v=$h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Bv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=OR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=GR;break;case d1:case h1:case f1:v=MR;break;case p1:v=YR;break;case"scroll":v=kR;break;case"wheel":v=JR;break;case"copy":case"cut":case"paste":v=jR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Hv}var E=(e&4)!==0,A=!E&&t==="scroll",_=E?p!==null?p+"Capture":null:p;E=[];for(var w=u,C;w!==null;){C=w;var k=C.stateNode;if(C.tag===5&&k!==null&&(C=k,_!==null&&(k=ll(w,_),k!=null&&E.push(ml(w,k,C)))),A)break;w=w.return}0<E.length&&(p=new v(p,T,null,n,d),f.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Uf&&(T=n.relatedTarget||n.fromElement)&&(qs(T)||T[yr]))break e;if((v||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=u,T=T?qs(T):null,T!==null&&(A=Ei(T),T!==A||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=u),v!==T)){if(E=Bv,k="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=Hv,k="onPointerLeave",_="onPointerEnter",w="pointer"),A=v==null?p:$i(v),C=T==null?p:$i(T),p=new E(k,w+"leave",v,n,d),p.target=A,p.relatedTarget=C,k=null,qs(d)===u&&(E=new E(_,w+"enter",T,n,d),E.target=C,E.relatedTarget=A,k=E),A=k,v&&T)t:{for(E=v,_=T,w=0,C=E;C;C=Ni(C))w++;for(C=0,k=_;k;k=Ni(k))C++;for(;0<w-C;)E=Ni(E),w--;for(;0<C-w;)_=Ni(_),C--;for(;w--;){if(E===_||_!==null&&E===_.alternate)break t;E=Ni(E),_=Ni(_)}E=null}else E=null;v!==null&&t0(f,p,v,E,!1),T!==null&&A!==null&&t0(f,A,T,E,!0)}}e:{if(p=u?$i(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var L=iP;else if(Kv(p))if(o1)L=cP;else{L=aP;var V=oP}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=lP);if(L&&(L=L(t,u))){i1(f,L,n,d);break e}V&&V(t,p,u),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Lf(p,"number",p.value)}switch(V=u?$i(u):window,t){case"focusin":(Kv(V)||V.contentEditable==="true")&&(zi=V,Kf=u,Ka=null);break;case"focusout":Ka=Kf=zi=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,Jv(f,n,d);break;case"selectionchange":if(hP)break;case"keydown":case"keyup":Jv(f,n,d)}var S;if(jm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ui?r1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(n1&&n.locale!=="ko"&&(Ui||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ui&&(S=t1()):(es=d,Lm="value"in es?es.value:es.textContent,Ui=!0)),V=Lu(u,y),0<V.length&&(y=new $v(y,t,null,n,d),f.push({event:y,listeners:V}),S?y.data=S:(S=s1(n),S!==null&&(y.data=S)))),(S=eP?tP(t,n):nP(t,n))&&(u=Lu(u,"onBeforeInput"),0<u.length&&(d=new $v("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=S))}g1(f,e)})}function ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ll(t,n),i!=null&&r.unshift(ml(t,i,s)),i=ll(t,e),i!=null&&r.push(ml(t,i,s))),t=t.return}return r}function Ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=ll(n,i),c!=null&&o.unshift(ml(n,c,a))):s||(c=ll(n,i),c!=null&&o.push(ml(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function n0(t){return(typeof t=="string"?t:""+t).replace(gP,`
`).replace(yP,"")}function jc(t,e,n){if(e=n0(e),n0(t)!==e&&n)throw Error(z(425))}function Mu(){}var Qf=null,Yf=null;function Xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,vP=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,_P=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(t){return r0.resolve(null).then(t).catch(wP)}:Jf;function wP(t){setTimeout(function(){throw t})}function Xh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),dl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);dl(e)}function as(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Go=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Go,gl="__reactProps$"+Go,yr="__reactContainer$"+Go,Zf="__reactEvents$"+Go,EP="__reactListeners$"+Go,TP="__reactHandles$"+Go;function qs(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s0(t);t!==null;){if(n=t[Bn])return n;t=s0(t)}return e}t=n,n=t.parentNode}return null}function ql(t){return t=t[Bn]||t[yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Rd(t){return t[gl]||null}var ep=[],Hi=-1;function ks(t){return{current:t}}function Ae(t){0>Hi||(t.current=ep[Hi],ep[Hi]=null,Hi--)}function Te(t,e){Hi++,ep[Hi]=t.current,t.current=e}var vs={},wt=ks(vs),$t=ks(!1),li=vs;function bo(t,e){var n=t.type.contextTypes;if(!n)return vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ht(t){return t=t.childContextTypes,t!=null}function Vu(){Ae($t),Ae(wt)}function i0(t,e,n){if(wt.current!==vs)throw Error(z(168));Te(wt,e),Te($t,n)}function v1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,oR(t)||"Unknown",s));return Le({},n,r)}function ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,li=wt.current,Te(wt,t),Te($t,$t.current),!0}function o0(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=v1(t,e,li),r.__reactInternalMemoizedMergedChildContext=t,Ae($t),Ae(wt),Te(wt,t)):Ae($t),Te($t,n)}var cr=null,Pd=!1,Jh=!1;function _1(t){cr===null?cr=[t]:cr.push(t)}function xP(t){Pd=!0,_1(t)}function Ns(){if(!Jh&&cr!==null){Jh=!0;var t=0,e=we;try{var n=cr;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cr=null,Pd=!1}catch(s){throw cr!==null&&(cr=cr.slice(t+1)),HE(km,Ns),s}finally{we=e,Jh=!1}}return null}var qi=[],Wi=0,Fu=null,Uu=0,ln=[],cn=0,ci=null,dr=1,hr="";function Bs(t,e){qi[Wi++]=Uu,qi[Wi++]=Fu,Fu=t,Uu=e}function w1(t,e,n){ln[cn++]=dr,ln[cn++]=hr,ln[cn++]=ci,ci=t;var r=dr;t=hr;var s=32-Rn(r)-1;r&=~(1<<s),n+=1;var i=32-Rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,dr=1<<32-Rn(e)+s|n<<s|r,hr=i+t}else dr=1<<i|n<<s|r,hr=t}function Um(t){t.return!==null&&(Bs(t,1),w1(t,1,0))}function zm(t){for(;t===Fu;)Fu=qi[--Wi],qi[Wi]=null,Uu=qi[--Wi],qi[Wi]=null;for(;t===ci;)ci=ln[--cn],ln[cn]=null,hr=ln[--cn],ln[cn]=null,dr=ln[--cn],ln[cn]=null}var Zt=null,Xt=null,Re=!1,Sn=null;function E1(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function a0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=as(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ci!==null?{id:dr,overflow:hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Xt=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function np(t){if(Re){var e=Xt;if(e){var n=e;if(!a0(t,e)){if(tp(t))throw Error(z(418));e=as(n.nextSibling);var r=Zt;e&&a0(t,e)?E1(r,n):(t.flags=t.flags&-4097|2,Re=!1,Zt=t)}}else{if(tp(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,Zt=t}}}function l0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function Fc(t){if(t!==Zt)return!1;if(!Re)return l0(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xf(t.type,t.memoizedProps)),e&&(e=Xt)){if(tp(t))throw T1(),Error(z(418));for(;e;)E1(t,e),e=as(e.nextSibling)}if(l0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=as(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Zt?as(t.stateNode.nextSibling):null;return!0}function T1(){for(var t=Xt;t;)t=as(t.nextSibling)}function ko(){Xt=Zt=null,Re=!1}function Bm(t){Sn===null?Sn=[t]:Sn.push(t)}var IP=Ar.ReactCurrentBatchConfig;function Aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Uc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c0(t){var e=t._init;return e(t._payload)}function x1(t){function e(_,w){if(t){var C=_.deletions;C===null?(_.deletions=[w],_.flags|=16):C.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=ds(_,w),_.index=0,_.sibling=null,_}function i(_,w,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<w?(_.flags|=2,w):C):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,C,k){return w===null||w.tag!==6?(w=of(C,_.mode,k),w.return=_,w):(w=s(w,C),w.return=_,w)}function c(_,w,C,k){var L=C.type;return L===Fi?d(_,w,C.props.children,k,C.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Fr&&c0(L)===w.type)?(k=s(w,C.props),k.ref=Aa(_,w,C),k.return=_,k):(k=mu(C.type,C.key,C.props,null,_.mode,k),k.ref=Aa(_,w,C),k.return=_,k)}function u(_,w,C,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=af(C,_.mode,k),w.return=_,w):(w=s(w,C.children||[]),w.return=_,w)}function d(_,w,C,k,L){return w===null||w.tag!==7?(w=ri(C,_.mode,k,L),w.return=_,w):(w=s(w,C),w.return=_,w)}function f(_,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=of(""+w,_.mode,C),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pc:return C=mu(w.type,w.key,w.props,null,_.mode,C),C.ref=Aa(_,null,w),C.return=_,C;case ji:return w=af(w,_.mode,C),w.return=_,w;case Fr:var k=w._init;return f(_,k(w._payload),C)}if(Da(w)||Ta(w))return w=ri(w,_.mode,C,null),w.return=_,w;Uc(_,w)}return null}function p(_,w,C,k){var L=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:a(_,w,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Pc:return C.key===L?c(_,w,C,k):null;case ji:return C.key===L?u(_,w,C,k):null;case Fr:return L=C._init,p(_,w,L(C._payload),k)}if(Da(C)||Ta(C))return L!==null?null:d(_,w,C,k,null);Uc(_,C)}return null}function v(_,w,C,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(C)||null,a(w,_,""+k,L);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Pc:return _=_.get(k.key===null?C:k.key)||null,c(w,_,k,L);case ji:return _=_.get(k.key===null?C:k.key)||null,u(w,_,k,L);case Fr:var V=k._init;return v(_,w,C,V(k._payload),L)}if(Da(k)||Ta(k))return _=_.get(C)||null,d(w,_,k,L,null);Uc(w,k)}return null}function T(_,w,C,k){for(var L=null,V=null,S=w,y=w=0,I=null;S!==null&&y<C.length;y++){S.index>y?(I=S,S=null):I=S.sibling;var P=p(_,S,C[y],k);if(P===null){S===null&&(S=I);break}t&&S&&P.alternate===null&&e(_,S),w=i(P,w,y),V===null?L=P:V.sibling=P,V=P,S=I}if(y===C.length)return n(_,S),Re&&Bs(_,y),L;if(S===null){for(;y<C.length;y++)S=f(_,C[y],k),S!==null&&(w=i(S,w,y),V===null?L=S:V.sibling=S,V=S);return Re&&Bs(_,y),L}for(S=r(_,S);y<C.length;y++)I=v(S,_,y,C[y],k),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?y:I.key),w=i(I,w,y),V===null?L=I:V.sibling=I,V=I);return t&&S.forEach(function(N){return e(_,N)}),Re&&Bs(_,y),L}function E(_,w,C,k){var L=Ta(C);if(typeof L!="function")throw Error(z(150));if(C=L.call(C),C==null)throw Error(z(151));for(var V=L=null,S=w,y=w=0,I=null,P=C.next();S!==null&&!P.done;y++,P=C.next()){S.index>y?(I=S,S=null):I=S.sibling;var N=p(_,S,P.value,k);if(N===null){S===null&&(S=I);break}t&&S&&N.alternate===null&&e(_,S),w=i(N,w,y),V===null?L=N:V.sibling=N,V=N,S=I}if(P.done)return n(_,S),Re&&Bs(_,y),L;if(S===null){for(;!P.done;y++,P=C.next())P=f(_,P.value,k),P!==null&&(w=i(P,w,y),V===null?L=P:V.sibling=P,V=P);return Re&&Bs(_,y),L}for(S=r(_,S);!P.done;y++,P=C.next())P=v(S,_,y,P.value,k),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?y:P.key),w=i(P,w,y),V===null?L=P:V.sibling=P,V=P);return t&&S.forEach(function(O){return e(_,O)}),Re&&Bs(_,y),L}function A(_,w,C,k){if(typeof C=="object"&&C!==null&&C.type===Fi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Pc:e:{for(var L=C.key,V=w;V!==null;){if(V.key===L){if(L=C.type,L===Fi){if(V.tag===7){n(_,V.sibling),w=s(V,C.props.children),w.return=_,_=w;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Fr&&c0(L)===V.type){n(_,V.sibling),w=s(V,C.props),w.ref=Aa(_,V,C),w.return=_,_=w;break e}n(_,V);break}else e(_,V);V=V.sibling}C.type===Fi?(w=ri(C.props.children,_.mode,k,C.key),w.return=_,_=w):(k=mu(C.type,C.key,C.props,null,_.mode,k),k.ref=Aa(_,w,C),k.return=_,_=k)}return o(_);case ji:e:{for(V=C.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(_,w.sibling),w=s(w,C.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=af(C,_.mode,k),w.return=_,_=w}return o(_);case Fr:return V=C._init,A(_,w,V(C._payload),k)}if(Da(C))return T(_,w,C,k);if(Ta(C))return E(_,w,C,k);Uc(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,C),w.return=_,_=w):(n(_,w),w=of(C,_.mode,k),w.return=_,_=w),o(_)):n(_,w)}return A}var No=x1(!0),I1=x1(!1),zu=ks(null),Bu=null,Ki=null,$m=null;function Hm(){$m=Ki=Bu=null}function qm(t){var e=zu.current;Ae(zu),t._currentValue=e}function rp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function to(t,e){Bu=t,$m=Ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function mn(t){var e=t._currentValue;if($m!==t)if(t={context:t,memoizedValue:e,next:null},Ki===null){if(Bu===null)throw Error(z(308));Ki=t,Bu.dependencies={lanes:0,firstContext:t}}else Ki=Ki.next=t;return e}var Ws=null;function Wm(t){Ws===null?Ws=[t]:Ws.push(t)}function S1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wm(e)):(n.next=s.next,s.next=n),e.interleaved=n,vr(t,r)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ur=!1;function Km(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vr(t,n)}return s=r.interleaved,s===null?(e.next=e,Wm(r)):(e.next=s.next,s.next=e),r.interleaved=e,vr(t,n)}function cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nm(t,n)}}function u0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $u(t,e,n,r){var s=t.updateQueue;Ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,a=i;do{var p=a.lane,v=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,E=a;switch(p=e,v=n,E.tag){case 1:if(T=E.payload,typeof T=="function"){f=T.call(v,f,p);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=E.payload,p=typeof T=="function"?T.call(v,f,p):T,p==null)break e;f=Le({},f,p);break e;case 2:Ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else v={eventTime:v,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=v,c=f):d=d.next=v,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);di|=o,t.lanes=o,t.memoizedState=f}}function d0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Wl={},qn=ks(Wl),yl=ks(Wl),vl=ks(Wl);function Ks(t){if(t===Wl)throw Error(z(174));return t}function Gm(t,e){switch(Te(vl,e),Te(yl,t),Te(qn,Wl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vf(e,t)}Ae(qn),Te(qn,e)}function Oo(){Ae(qn),Ae(yl),Ae(vl)}function A1(t){Ks(vl.current);var e=Ks(qn.current),n=Vf(e,t.type);e!==n&&(Te(yl,t),Te(qn,n))}function Qm(t){yl.current===t&&(Ae(qn),Ae(yl))}var Ne=ks(0);function Hu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zh=[];function Ym(){for(var t=0;t<Zh.length;t++)Zh[t]._workInProgressVersionPrimary=null;Zh.length=0}var uu=Ar.ReactCurrentDispatcher,ef=Ar.ReactCurrentBatchConfig,ui=0,Oe=null,We=null,Xe=null,qu=!1,Ga=!1,_l=0,SP=0;function ht(){throw Error(z(321))}function Xm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function Jm(t,e,n,r,s,i){if(ui=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uu.current=t===null||t.memoizedState===null?PP:bP,t=n(r,s),Ga){i=0;do{if(Ga=!1,_l=0,25<=i)throw Error(z(301));i+=1,Xe=We=null,e.updateQueue=null,uu.current=kP,t=n(r,s)}while(Ga)}if(uu.current=Wu,e=We!==null&&We.next!==null,ui=0,Xe=We=Oe=null,qu=!1,e)throw Error(z(300));return t}function Zm(){var t=_l!==0;return _l=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Oe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function gn(){if(We===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Xe===null?Oe.memoizedState:Xe.next;if(e!==null)Xe=e,We=t;else{if(t===null)throw Error(z(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Xe===null?Oe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function wl(t,e){return typeof e=="function"?e(t):e}function tf(t){var e=gn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((ui&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Oe.lanes|=d,di|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,bn(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,di|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nf(t){var e=gn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bn(i,e.memoizedState)||(Bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function R1(){}function P1(t,e){var n=Oe,r=gn(),s=e(),i=!bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Bt=!0),r=r.queue,eg(N1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,El(9,k1.bind(null,n,r,s,e),void 0,null),Je===null)throw Error(z(349));ui&30||b1(n,e,s)}return s}function b1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function k1(t,e,n,r){e.value=n,e.getSnapshot=r,O1(e)&&D1(t)}function N1(t,e,n){return n(function(){O1(e)&&D1(t)})}function O1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function D1(t){var e=vr(t,1);e!==null&&Pn(e,t,1,-1)}function h0(t){var e=Mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:t},e.queue=t,t=t.dispatch=RP.bind(null,Oe,t),[e.memoizedState,t]}function El(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function L1(){return gn().memoizedState}function du(t,e,n,r){var s=Mn();Oe.flags|=t,s.memoizedState=El(1|e,n,void 0,r===void 0?null:r)}function bd(t,e,n,r){var s=gn();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&Xm(r,o.deps)){s.memoizedState=El(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=El(1|e,n,i,r)}function f0(t,e){return du(8390656,8,t,e)}function eg(t,e){return bd(2048,8,t,e)}function M1(t,e){return bd(4,2,t,e)}function V1(t,e){return bd(4,4,t,e)}function j1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F1(t,e,n){return n=n!=null?n.concat([t]):null,bd(4,4,j1.bind(null,e,t),n)}function tg(){}function U1(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z1(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function B1(t,e,n){return ui&21?(bn(n,e)||(n=KE(),Oe.lanes|=n,di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function CP(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=ef.transition;ef.transition={};try{t(!1),e()}finally{we=n,ef.transition=r}}function $1(){return gn().memoizedState}function AP(t,e,n){var r=us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H1(t))q1(e,n);else if(n=S1(t,e,n,r),n!==null){var s=Nt();Pn(n,t,r,s),W1(n,e,r)}}function RP(t,e,n){var r=us(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H1(t))q1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,bn(a,o)){var c=e.interleaved;c===null?(s.next=s,Wm(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=S1(t,e,s,r),n!==null&&(s=Nt(),Pn(n,t,r,s),W1(n,e,r))}}function H1(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function q1(t,e){Ga=qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function W1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nm(t,n)}}var Wu={readContext:mn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},PP={readContext:mn,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:mn,useEffect:f0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,du(4194308,4,j1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return du(4194308,4,t,e)},useInsertionEffect:function(t,e){return du(4,2,t,e)},useMemo:function(t,e){var n=Mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AP.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:h0,useDebugValue:tg,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=h0(!1),e=t[0];return t=CP.bind(null,t[1]),Mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Mn();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Je===null)throw Error(z(349));ui&30||b1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,f0(N1.bind(null,r,i,t),[t]),r.flags|=2048,El(9,k1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Mn(),e=Je.identifierPrefix;if(Re){var n=hr,r=dr;n=(r&~(1<<32-Rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_l++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bP={readContext:mn,useCallback:U1,useContext:mn,useEffect:eg,useImperativeHandle:F1,useInsertionEffect:M1,useLayoutEffect:V1,useMemo:z1,useReducer:tf,useRef:L1,useState:function(){return tf(wl)},useDebugValue:tg,useDeferredValue:function(t){var e=gn();return B1(e,We.memoizedState,t)},useTransition:function(){var t=tf(wl)[0],e=gn().memoizedState;return[t,e]},useMutableSource:R1,useSyncExternalStore:P1,useId:$1,unstable_isNewReconciler:!1},kP={readContext:mn,useCallback:U1,useContext:mn,useEffect:eg,useImperativeHandle:F1,useInsertionEffect:M1,useLayoutEffect:V1,useMemo:z1,useReducer:nf,useRef:L1,useState:function(){return nf(wl)},useDebugValue:tg,useDeferredValue:function(t){var e=gn();return We===null?e.memoizedState=t:B1(e,We.memoizedState,t)},useTransition:function(){var t=nf(wl)[0],e=gn().memoizedState;return[t,e]},useMutableSource:R1,useSyncExternalStore:P1,useId:$1,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kd={isMounted:function(t){return(t=t._reactInternals)?Ei(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=us(t),i=mr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ls(t,i,s),e!==null&&(Pn(e,t,s,r),cu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=us(t),i=mr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ls(t,i,s),e!==null&&(Pn(e,t,s,r),cu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=us(t),s=mr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ls(t,s,r),e!==null&&(Pn(e,t,r,n),cu(e,t,r))}};function p0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fl(n,r)||!fl(s,i):!0}function K1(t,e,n){var r=!1,s=vs,i=e.contextType;return typeof i=="object"&&i!==null?i=mn(i):(s=Ht(e)?li:wt.current,r=e.contextTypes,i=(r=r!=null)?bo(t,s):vs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function m0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kd.enqueueReplaceState(e,e.state,null)}function ip(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Km(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=mn(i):(i=Ht(e)?li:wt.current,s.context=bo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kd.enqueueReplaceState(s,s.state,null),$u(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Do(t,e){try{var n="",r=e;do n+=iR(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function op(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function G1(t,e,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gu||(Gu=!0,gp=r),op(t,e)},n}function Q1(t,e,n){n=mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){op(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){op(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function g0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=WP.bind(null,t,e,n),e.then(t,t))}function y0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mr(-1,1),e.tag=2,ls(n,e,1))),n.lanes|=1),t)}var OP=Ar.ReactCurrentOwner,Bt=!1;function Pt(t,e,n,r){e.child=t===null?I1(e,null,n,r):No(e,t.child,n,r)}function _0(t,e,n,r,s){n=n.render;var i=e.ref;return to(e,s),r=Jm(t,e,n,r,i,s),n=Zm(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_r(t,e,s)):(Re&&n&&Um(e),e.flags|=1,Pt(t,e,r,s),e.child)}function w0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Y1(t,e,i,r,s)):(t=mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fl,n(o,r)&&t.ref===e.ref)return _r(t,e,s)}return e.flags|=1,t=ds(i,r),t.ref=e.ref,t.return=e,e.child=t}function Y1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fl(i,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,_r(t,e,s)}return ap(t,e,n,r,s)}function X1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Qi,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Qi,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Qi,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Qi,Gt),Gt|=r;return Pt(t,e,s,n),e.child}function J1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,n,r,s){var i=Ht(n)?li:wt.current;return i=bo(e,i),to(e,s),n=Jm(t,e,n,r,i,s),r=Zm(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_r(t,e,s)):(Re&&r&&Um(e),e.flags|=1,Pt(t,e,n,s),e.child)}function E0(t,e,n,r,s){if(Ht(n)){var i=!0;ju(e)}else i=!1;if(to(e,s),e.stateNode===null)hu(t,e),K1(e,n,r),ip(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mn(u):(u=Ht(n)?li:wt.current,u=bo(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&m0(e,o,r,u),Ur=!1;var p=e.memoizedState;o.state=p,$u(e,r,o,s),c=e.memoizedState,a!==r||p!==c||$t.current||Ur?(typeof d=="function"&&(sp(e,n,d,r),c=e.memoizedState),(a=Ur||p0(e,n,a,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,C1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Tn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mn(c):(c=Ht(n)?li:wt.current,c=bo(e,c));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&m0(e,o,r,c),Ur=!1,p=e.memoizedState,o.state=p,$u(e,r,o,s);var T=e.memoizedState;a!==f||p!==T||$t.current||Ur?(typeof v=="function"&&(sp(e,n,v,r),T=e.memoizedState),(u=Ur||p0(e,n,u,r,p,T,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return lp(t,e,n,r,i,s)}function lp(t,e,n,r,s,i){J1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&o0(e,n,!1),_r(t,e,i);r=e.stateNode,OP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=No(e,t.child,null,i),e.child=No(e,null,a,i)):Pt(t,e,a,i),e.memoizedState=r.state,s&&o0(e,n,!0),e.child}function Z1(t){var e=t.stateNode;e.pendingContext?i0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i0(t,e.context,!1),Gm(t,e.containerInfo)}function T0(t,e,n,r,s){return ko(),Bm(s),e.flags|=256,Pt(t,e,n,r),e.child}var cp={dehydrated:null,treeContext:null,retryLane:0};function up(t){return{baseLanes:t,cachePool:null,transitions:null}}function eT(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Ne,s&1),t===null)return np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Dd(o,r,0,null),t=ri(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=up(n),e.memoizedState=cp,t):ng(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ds(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ds(a,i):(i=ri(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?up(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cp,r}return i=t.child,t=i.sibling,r=ds(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ng(t,e){return e=Dd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zc(t,e,n,r){return r!==null&&Bm(r),No(e,t.child,null,n),t=ng(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rf(Error(z(422))),zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Dd({mode:"visible",children:r.children},s,0,null),i=ri(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&No(e,t.child,null,o),e.child.memoizedState=up(o),e.memoizedState=cp,i);if(!(e.mode&1))return zc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=rf(i,r,void 0),zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bt||a){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vr(t,s),Pn(r,t,s,-1))}return lg(),r=rf(Error(z(421))),zc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xt=as(s.nextSibling),Zt=e,Re=!0,Sn=null,t!==null&&(ln[cn++]=dr,ln[cn++]=hr,ln[cn++]=ci,dr=t.id,hr=t.overflow,ci=e),e=ng(e,r.children),e.flags|=4096,e)}function x0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rp(t.return,e,n)}function sf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x0(t,n,e);else if(t.tag===19)x0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Hu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Hu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sf(e,!0,n,null,i);break;case"together":sf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LP(t,e,n){switch(e.tag){case 3:Z1(e),ko();break;case 5:A1(e);break;case 1:Ht(e.type)&&ju(e);break;case 4:Gm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(zu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?eT(t,e,n):(Te(Ne,Ne.current&1),t=_r(t,e,n),t!==null?t.sibling:null);Te(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,X1(t,e,n)}return _r(t,e,n)}var nT,dp,rT,sT;nT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dp=function(){};rT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ks(qn.current);var i=null;switch(n){case"input":s=Of(t,s),r=Of(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=Mf(t,s),r=Mf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mu)}jf(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ol.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ol.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ce("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};sT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ra(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MP(t,e,n){var r=e.pendingProps;switch(zm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Ht(e.type)&&Vu(),ft(e),null;case 3:return r=e.stateNode,Oo(),Ae($t),Ae(wt),Ym(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sn!==null&&(_p(Sn),Sn=null))),dp(t,e),ft(e),null;case 5:Qm(e);var s=Ks(vl.current);if(n=e.type,t!==null&&e.stateNode!=null)rT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ft(e),null}if(t=Ks(qn.current),Fc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bn]=e,r[gl]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<Ma.length;s++)Ce(Ma[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Nv(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":Dv(r,i),Ce("invalid",r)}jf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),s=["children",""+a]):ol.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":bc(r),Ov(r,i,!0);break;case"textarea":bc(r),Lv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[gl]=r,nT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ff(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ma.length;s++)Ce(Ma[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":Nv(t,r),s=Of(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Dv(t,r),s=Mf(t,r),Ce("invalid",t);break;default:s=r}jf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?LE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&OE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&al(t,c):typeof c=="number"&&al(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ol.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",t):c!=null&&Cm(t,i,c,o))}switch(n){case"input":bc(t),Ov(t,r,!1);break;case"textarea":bc(t),Lv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ys(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Mu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)sT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ks(vl.current),Ks(qn.current),Fc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(i=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:jc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return ft(e),null;case 13:if(Ae(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Xt!==null&&e.mode&1&&!(e.flags&128))T1(),ko(),e.flags|=98560,i=!1;else if(i=Fc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Bn]=e}else ko(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else Sn!==null&&(_p(Sn),Sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ke===0&&(Ke=3):lg())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Oo(),dp(t,e),t===null&&pl(e.stateNode.containerInfo),ft(e),null;case 10:return qm(e.type._context),ft(e),null;case 17:return Ht(e.type)&&Vu(),ft(e),null;case 19:if(Ae(Ne),i=e.memoizedState,i===null)return ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ra(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hu(t),o!==null){for(e.flags|=128,Ra(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>Lo&&(e.flags|=128,r=!0,Ra(i,!1),e.lanes=4194304)}else{if(!r)if(t=Hu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ra(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return ft(e),null}else 2*Ue()-i.renderingStartTime>Lo&&n!==1073741824&&(e.flags|=128,r=!0,Ra(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Ne.current,Te(Ne,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return ag(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function VP(t,e){switch(zm(e),e.tag){case 1:return Ht(e.type)&&Vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oo(),Ae($t),Ae(wt),Ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qm(e),null;case 13:if(Ae(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ko()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ne),null;case 4:return Oo(),null;case 10:return qm(e.type._context),null;case 22:case 23:return ag(),null;case 24:return null;default:return null}}var Bc=!1,yt=!1,jP=typeof WeakSet=="function"?WeakSet:Set,W=null;function Gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function hp(t,e,n){try{n()}catch(r){je(t,e,r)}}var I0=!1;function FP(t,e){if(Qf=Ou,t=c1(),Fm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++u===s&&(a=o),p===i&&++d===r&&(c=o),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yf={focusedElem:t,selectionRange:n},Ou=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var E=T.memoizedProps,A=T.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:Tn(e.type,E),A);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){je(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return T=I0,I0=!1,T}function Qa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hp(e,n,i)}s=s.next}while(s!==r)}}function Nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iT(t){var e=t.alternate;e!==null&&(t.alternate=null,iT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[gl],delete e[Zf],delete e[EP],delete e[TP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oT(t){return t.tag===5||t.tag===3||t.tag===4}function S0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mu));else if(r!==4&&(t=t.child,t!==null))for(pp(t,e,n),t=t.sibling;t!==null;)pp(t,e,n),t=t.sibling}function mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}var nt=null,In=!1;function Nr(t,e,n){for(n=n.child;n!==null;)aT(t,e,n),n=n.sibling}function aT(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Id,n)}catch{}switch(n.tag){case 5:yt||Gi(n,e);case 6:var r=nt,s=In;nt=null,Nr(t,e,n),nt=r,In=s,nt!==null&&(In?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(In?(t=nt,n=n.stateNode,t.nodeType===8?Xh(t.parentNode,n):t.nodeType===1&&Xh(t,n),dl(t)):Xh(nt,n.stateNode));break;case 4:r=nt,s=In,nt=n.stateNode.containerInfo,In=!0,Nr(t,e,n),nt=r,In=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hp(n,e,o),s=s.next}while(s!==r)}Nr(t,e,n);break;case 1:if(!yt&&(Gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,e,a)}Nr(t,e,n);break;case 21:Nr(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,Nr(t,e,n),yt=r):Nr(t,e,n);break;default:Nr(t,e,n)}}function C0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jP),e.forEach(function(r){var s=GP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,In=!1;break e;case 3:nt=a.stateNode.containerInfo,In=!0;break e;case 4:nt=a.stateNode.containerInfo,In=!0;break e}a=a.return}if(nt===null)throw Error(z(160));aT(i,o,s),nt=null,In=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){je(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lT(e,t),e=e.sibling}function lT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),Ln(t),r&4){try{Qa(3,t,t.return),Nd(3,t)}catch(E){je(t,t.return,E)}try{Qa(5,t,t.return)}catch(E){je(t,t.return,E)}}break;case 1:En(e,t),Ln(t),r&512&&n!==null&&Gi(n,n.return);break;case 5:if(En(e,t),Ln(t),r&512&&n!==null&&Gi(n,n.return),t.flags&32){var s=t.stateNode;try{al(s,"")}catch(E){je(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bE(s,i),Ff(a,o);var u=Ff(a,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?LE(s,f):d==="dangerouslySetInnerHTML"?OE(s,f):d==="children"?al(s,f):Cm(s,d,f,u)}switch(a){case"input":Df(s,i);break;case"textarea":kE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Xi(s,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?Xi(s,!!i.multiple,i.defaultValue,!0):Xi(s,!!i.multiple,i.multiple?[]:"",!1))}s[gl]=i}catch(E){je(t,t.return,E)}}break;case 6:if(En(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){je(t,t.return,E)}}break;case 3:if(En(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dl(e.containerInfo)}catch(E){je(t,t.return,E)}break;case 4:En(e,t),Ln(t);break;case 13:En(e,t),Ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ig=Ue())),r&4&&C0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(u=yt)||d,En(e,t),yt=u):En(e,t),Ln(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(f=W=d;W!==null;){switch(p=W,v=p.child,p.tag){case 0:case 11:case 14:case 15:Qa(4,p,p.return);break;case 1:Gi(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(E){je(r,n,E)}}break;case 5:Gi(p,p.return);break;case 22:if(p.memoizedState!==null){R0(f);continue}}v!==null?(v.return=p,W=v):R0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=DE("display",o))}catch(E){je(t,t.return,E)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(E){je(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:En(e,t),Ln(t),r&4&&C0(t);break;case 21:break;default:En(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oT(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(al(s,""),r.flags&=-33);var i=S0(t);mp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=S0(t);pp(t,a,o);break;default:throw Error(z(161))}}catch(c){je(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UP(t,e,n){W=t,cT(t)}function cT(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Bc;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||yt;a=Bc;var u=yt;if(Bc=o,(yt=c)&&!u)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?P0(s):c!==null?(c.return=o,W=c):P0(s);for(;i!==null;)W=i,cT(i),i=i.sibling;W=s,Bc=a,yt=u}A0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):A0(t)}}function A0(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Nd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&d0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&dl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}yt||e.flags&512&&fp(e)}catch(p){je(e,e.return,p)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function R0(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function P0(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nd(4,e)}catch(c){je(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){je(e,s,c)}}var i=e.return;try{fp(e)}catch(c){je(e,i,c)}break;case 5:var o=e.return;try{fp(e)}catch(c){je(e,o,c)}}}catch(c){je(e,e.return,c)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var zP=Math.ceil,Ku=Ar.ReactCurrentDispatcher,rg=Ar.ReactCurrentOwner,pn=Ar.ReactCurrentBatchConfig,pe=0,Je=null,$e=null,ot=0,Gt=0,Qi=ks(0),Ke=0,Tl=null,di=0,Od=0,sg=0,Ya=null,Ut=null,ig=0,Lo=1/0,lr=null,Gu=!1,gp=null,cs=null,$c=!1,ts=null,Qu=0,Xa=0,yp=null,fu=-1,pu=0;function Nt(){return pe&6?Ue():fu!==-1?fu:fu=Ue()}function us(t){return t.mode&1?pe&2&&ot!==0?ot&-ot:IP.transition!==null?(pu===0&&(pu=KE()),pu):(t=we,t!==0||(t=window.event,t=t===void 0?16:e1(t.type)),t):1}function Pn(t,e,n,r){if(50<Xa)throw Xa=0,yp=null,Error(z(185));$l(t,n,r),(!(pe&2)||t!==Je)&&(t===Je&&(!(pe&2)&&(Od|=n),Ke===4&&Br(t,ot)),qt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Lo=Ue()+500,Pd&&Ns()))}function qt(t,e){var n=t.callbackNode;IR(t,e);var r=Nu(t,t===Je?ot:0);if(r===0)n!==null&&jv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jv(n),e===1)t.tag===0?xP(b0.bind(null,t)):_1(b0.bind(null,t)),_P(function(){!(pe&6)&&Ns()}),n=null;else{switch(GE(r)){case 1:n=km;break;case 4:n=qE;break;case 16:n=ku;break;case 536870912:n=WE;break;default:n=ku}n=yT(n,uT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uT(t,e){if(fu=-1,pu=0,pe&6)throw Error(z(327));var n=t.callbackNode;if(no()&&t.callbackNode!==n)return null;var r=Nu(t,t===Je?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yu(t,r);else{e=r;var s=pe;pe|=2;var i=hT();(Je!==t||ot!==e)&&(lr=null,Lo=Ue()+500,ni(t,e));do try{HP();break}catch(a){dT(t,a)}while(!0);Hm(),Ku.current=i,pe=s,$e!==null?e=0:(Je=null,ot=0,e=Ke)}if(e!==0){if(e===2&&(s=Hf(t),s!==0&&(r=s,e=vp(t,s))),e===1)throw n=Tl,ni(t,0),Br(t,r),qt(t,Ue()),n;if(e===6)Br(t,r);else{if(s=t.current.alternate,!(r&30)&&!BP(s)&&(e=Yu(t,r),e===2&&(i=Hf(t),i!==0&&(r=i,e=vp(t,i))),e===1))throw n=Tl,ni(t,0),Br(t,r),qt(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:$s(t,Ut,lr);break;case 3:if(Br(t,r),(r&130023424)===r&&(e=ig+500-Ue(),10<e)){if(Nu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jf($s.bind(null,t,Ut,lr),e);break}$s(t,Ut,lr);break;case 4:if(Br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zP(r/1960))-r,10<r){t.timeoutHandle=Jf($s.bind(null,t,Ut,lr),r);break}$s(t,Ut,lr);break;case 5:$s(t,Ut,lr);break;default:throw Error(z(329))}}}return qt(t,Ue()),t.callbackNode===n?uT.bind(null,t):null}function vp(t,e){var n=Ya;return t.current.memoizedState.isDehydrated&&(ni(t,e).flags|=256),t=Yu(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&_p(e)),t}function _p(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function BP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~sg,e&=~Od,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rn(e),r=1<<n;t[n]=-1,e&=~r}}function b0(t){if(pe&6)throw Error(z(327));no();var e=Nu(t,0);if(!(e&1))return qt(t,Ue()),null;var n=Yu(t,e);if(t.tag!==0&&n===2){var r=Hf(t);r!==0&&(e=r,n=vp(t,r))}if(n===1)throw n=Tl,ni(t,0),Br(t,e),qt(t,Ue()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Ut,lr),qt(t,Ue()),null}function og(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Lo=Ue()+500,Pd&&Ns())}}function hi(t){ts!==null&&ts.tag===0&&!(pe&6)&&no();var e=pe;pe|=1;var n=pn.transition,r=we;try{if(pn.transition=null,we=1,t)return t()}finally{we=r,pn.transition=n,pe=e,!(pe&6)&&Ns()}}function ag(){Gt=Qi.current,Ae(Qi)}function ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vP(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(zm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:Oo(),Ae($t),Ae(wt),Ym();break;case 5:Qm(r);break;case 4:Oo();break;case 13:Ae(Ne);break;case 19:Ae(Ne);break;case 10:qm(r.type._context);break;case 22:case 23:ag()}n=n.return}if(Je=t,$e=t=ds(t.current,null),ot=Gt=e,Ke=0,Tl=null,sg=Od=di=0,Ut=Ya=null,Ws!==null){for(e=0;e<Ws.length;e++)if(n=Ws[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ws=null}return t}function dT(t,e){do{var n=$e;try{if(Hm(),uu.current=Wu,qu){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qu=!1}if(ui=0,Xe=We=Oe=null,Ga=!1,_l=0,rg.current=null,n===null||n.return===null){Ke=1,Tl=e,$e=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=ot,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=y0(o);if(v!==null){v.flags&=-257,v0(v,o,a,i,e),v.mode&1&&g0(i,u,e),e=v,c=u;var T=e.updateQueue;if(T===null){var E=new Set;E.add(c),e.updateQueue=E}else T.add(c);break e}else{if(!(e&1)){g0(i,u,e),lg();break e}c=Error(z(426))}}else if(Re&&a.mode&1){var A=y0(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),v0(A,o,a,i,e),Bm(Do(c,a));break e}}i=c=Do(c,a),Ke!==4&&(Ke=2),Ya===null?Ya=[i]:Ya.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=G1(i,c,e);u0(i,_);break e;case 1:a=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(cs===null||!cs.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=Q1(i,a,e);u0(i,k);break e}}i=i.return}while(i!==null)}pT(n)}catch(L){e=L,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function hT(){var t=Ku.current;return Ku.current=Wu,t===null?Wu:t}function lg(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Je===null||!(di&268435455)&&!(Od&268435455)||Br(Je,ot)}function Yu(t,e){var n=pe;pe|=2;var r=hT();(Je!==t||ot!==e)&&(lr=null,ni(t,e));do try{$P();break}catch(s){dT(t,s)}while(!0);if(Hm(),pe=n,Ku.current=r,$e!==null)throw Error(z(261));return Je=null,ot=0,Ke}function $P(){for(;$e!==null;)fT($e)}function HP(){for(;$e!==null&&!mR();)fT($e)}function fT(t){var e=gT(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?pT(t):$e=e,rg.current=null}function pT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VP(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,$e=null;return}}else if(n=MP(n,e,Gt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ke===0&&(Ke=5)}function $s(t,e,n){var r=we,s=pn.transition;try{pn.transition=null,we=1,qP(t,e,n,r)}finally{pn.transition=s,we=r}return null}function qP(t,e,n,r){do no();while(ts!==null);if(pe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(SR(t,i),t===Je&&($e=Je=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$c||($c=!0,yT(ku,function(){return no(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=pn.transition,pn.transition=null;var o=we;we=1;var a=pe;pe|=4,rg.current=null,FP(t,n),lT(n,t),dP(Yf),Ou=!!Qf,Yf=Qf=null,t.current=n,UP(n),gR(),pe=a,we=o,pn.transition=i}else t.current=n;if($c&&($c=!1,ts=t,Qu=s),i=t.pendingLanes,i===0&&(cs=null),_R(n.stateNode),qt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Gu)throw Gu=!1,t=gp,gp=null,t;return Qu&1&&t.tag!==0&&no(),i=t.pendingLanes,i&1?t===yp?Xa++:(Xa=0,yp=t):Xa=0,Ns(),null}function no(){if(ts!==null){var t=GE(Qu),e=pn.transition,n=we;try{if(pn.transition=null,we=16>t?16:t,ts===null)var r=!1;else{if(t=ts,ts=null,Qu=0,pe&6)throw Error(z(331));var s=pe;for(pe|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(W=u;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:Qa(8,d,i)}var f=d.child;if(f!==null)f.return=d,W=f;else for(;W!==null;){d=W;var p=d.sibling,v=d.return;if(iT(d),d===u){W=null;break}if(p!==null){p.return=v,W=p;break}W=v}}}var T=i.alternate;if(T!==null){var E=T.child;if(E!==null){T.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qa(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,W=_;break e}W=i.return}}var w=t.current;for(W=w;W!==null;){o=W;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,W=C;else e:for(o=w;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nd(9,a)}}catch(L){je(a,a.return,L)}if(a===o){W=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,W=k;break e}W=a.return}}if(pe=s,Ns(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Id,t)}catch{}r=!0}return r}finally{we=n,pn.transition=e}}return!1}function k0(t,e,n){e=Do(n,e),e=G1(t,e,1),t=ls(t,e,1),e=Nt(),t!==null&&($l(t,1,e),qt(t,e))}function je(t,e,n){if(t.tag===3)k0(t,t,n);else for(;e!==null;){if(e.tag===3){k0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=Do(n,t),t=Q1(e,t,1),e=ls(e,t,1),t=Nt(),e!==null&&($l(e,1,t),qt(e,t));break}}e=e.return}}function WP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(ot&n)===n&&(Ke===4||Ke===3&&(ot&130023424)===ot&&500>Ue()-ig?ni(t,0):sg|=n),qt(t,e)}function mT(t,e){e===0&&(t.mode&1?(e=Oc,Oc<<=1,!(Oc&130023424)&&(Oc=4194304)):e=1);var n=Nt();t=vr(t,e),t!==null&&($l(t,e,n),qt(t,n))}function KP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mT(t,n)}function GP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),mT(t,n)}var gT;gT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,LP(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Re&&e.flags&1048576&&w1(e,Uu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hu(t,e),t=e.pendingProps;var s=bo(e,wt.current);to(e,n),s=Jm(null,e,r,t,s,n);var i=Zm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(i=!0,ju(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Km(e),s.updater=kd,e.stateNode=s,s._reactInternals=e,ip(e,r,t,n),e=lp(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&Um(e),Pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YP(r),t=Tn(r,t),s){case 0:e=ap(null,e,r,t,n);break e;case 1:e=E0(null,e,r,t,n);break e;case 11:e=_0(null,e,r,t,n);break e;case 14:e=w0(null,e,r,Tn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tn(r,s),ap(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tn(r,s),E0(t,e,r,s,n);case 3:e:{if(Z1(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,C1(t,e),$u(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Do(Error(z(423)),e),e=T0(t,e,r,n,s);break e}else if(r!==s){s=Do(Error(z(424)),e),e=T0(t,e,r,n,s);break e}else for(Xt=as(e.stateNode.containerInfo.firstChild),Zt=e,Re=!0,Sn=null,n=I1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ko(),r===s){e=_r(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return A1(e),t===null&&np(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xf(r,s)?o=null:i!==null&&Xf(r,i)&&(e.flags|=32),J1(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&np(e),null;case 13:return eT(t,e,n);case 4:return Gm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=No(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tn(r,s),_0(t,e,r,s,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(zu,r._currentValue),r._currentValue=o,i!==null)if(bn(i.value,o)){if(i.children===s.children&&!$t.current){e=_r(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=mr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),rp(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),rp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,to(e,n),s=mn(s),r=r(s),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,s=Tn(r,e.pendingProps),s=Tn(r.type,s),w0(t,e,r,s,n);case 15:return Y1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Tn(r,s),hu(t,e),e.tag=1,Ht(r)?(t=!0,ju(e)):t=!1,to(e,n),K1(e,r,s),ip(e,r,s,n),lp(null,e,r,!0,t,n);case 19:return tT(t,e,n);case 22:return X1(t,e,n)}throw Error(z(156,e.tag))};function yT(t,e){return HE(t,e)}function QP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new QP(t,e,n,r)}function cg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YP(t){if(typeof t=="function")return cg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rm)return 11;if(t===Pm)return 14}return 2}function ds(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")cg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fi:return ri(n.children,s,i,e);case Am:o=8,s|=8;break;case Pf:return t=fn(12,n,e,s|2),t.elementType=Pf,t.lanes=i,t;case bf:return t=fn(13,n,e,s),t.elementType=bf,t.lanes=i,t;case kf:return t=fn(19,n,e,s),t.elementType=kf,t.lanes=i,t;case AE:return Dd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SE:o=10;break e;case CE:o=9;break e;case Rm:o=11;break e;case Pm:o=14;break e;case Fr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=fn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ri(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function Dd(t,e,n,r){return t=fn(22,t,r,e),t.elementType=AE,t.lanes=n,t.stateNode={isHidden:!1},t}function of(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function af(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uh(0),this.expirationTimes=Uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ug(t,e,n,r,s,i,o,a,c){return t=new XP(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=fn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Km(i),t}function JP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vT(t){if(!t)return vs;t=t._reactInternals;e:{if(Ei(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ht(n))return v1(t,n,e)}return e}function _T(t,e,n,r,s,i,o,a,c){return t=ug(n,r,!0,t,s,i,o,a,c),t.context=vT(null),n=t.current,r=Nt(),s=us(n),i=mr(r,s),i.callback=e??null,ls(n,i,s),t.current.lanes=s,$l(t,s,r),qt(t,r),t}function Ld(t,e,n,r){var s=e.current,i=Nt(),o=us(s);return n=vT(n),e.context===null?e.context=n:e.pendingContext=n,e=mr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ls(s,e,o),t!==null&&(Pn(t,s,o,i),cu(t,s,o)),o}function Xu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dg(t,e){N0(t,e),(t=t.alternate)&&N0(t,e)}function ZP(){return null}var wT=typeof reportError=="function"?reportError:function(t){console.error(t)};function hg(t){this._internalRoot=t}Md.prototype.render=hg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Ld(t,e,null,null)};Md.prototype.unmount=hg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hi(function(){Ld(null,t,null,null)}),e[yr]=null}};function Md(t){this._internalRoot=t}Md.prototype.unstable_scheduleHydration=function(t){if(t){var e=XE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zr.length&&e!==0&&e<zr[n].priority;n++);zr.splice(n,0,t),n===0&&ZE(t)}};function fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function O0(){}function eb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Xu(o);i.call(u)}}var o=_T(e,r,t,0,null,!1,!1,"",O0);return t._reactRootContainer=o,t[yr]=o.current,pl(t.nodeType===8?t.parentNode:t),hi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Xu(c);a.call(u)}}var c=ug(t,0,!1,null,null,!1,!1,"",O0);return t._reactRootContainer=c,t[yr]=c.current,pl(t.nodeType===8?t.parentNode:t),hi(function(){Ld(e,c,n,r)}),c}function jd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Xu(o);a.call(c)}}Ld(e,o,t,s)}else o=eb(n,e,t,s,r);return Xu(o)}QE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=La(e.pendingLanes);n!==0&&(Nm(e,n|1),qt(e,Ue()),!(pe&6)&&(Lo=Ue()+500,Ns()))}break;case 13:hi(function(){var r=vr(t,1);if(r!==null){var s=Nt();Pn(r,t,1,s)}}),dg(t,1)}};Om=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=Nt();Pn(e,t,134217728,n)}dg(t,134217728)}};YE=function(t){if(t.tag===13){var e=us(t),n=vr(t,e);if(n!==null){var r=Nt();Pn(n,t,e,r)}dg(t,e)}};XE=function(){return we};JE=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};zf=function(t,e,n){switch(e){case"input":if(Df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rd(r);if(!s)throw Error(z(90));PE(r),Df(r,s)}}}break;case"textarea":kE(t,n);break;case"select":e=n.value,e!=null&&Xi(t,!!n.multiple,e,!1)}};jE=og;FE=hi;var tb={usingClientEntryPoint:!1,Events:[ql,$i,Rd,ME,VE,og]},Pa={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nb={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BE(t),t===null?null:t.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||ZP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Id=Hc.inject(nb),Hn=Hc}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tb;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fg(e))throw Error(z(200));return JP(t,e,null,n)};nn.createRoot=function(t,e){if(!fg(t))throw Error(z(299));var n=!1,r="",s=wT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ug(t,1,!1,null,null,n,!1,r,s),t[yr]=e.current,pl(t.nodeType===8?t.parentNode:t),new hg(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=BE(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return hi(t)};nn.hydrate=function(t,e,n){if(!Vd(e))throw Error(z(200));return jd(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!fg(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=wT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_T(e,null,t,1,n??null,s,!1,i,o),t[yr]=e.current,pl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Md(e)};nn.render=function(t,e,n){if(!Vd(e))throw Error(z(200));return jd(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Vd(t))throw Error(z(40));return t._reactRootContainer?(hi(function(){jd(null,null,t,!1,function(){t._reactRootContainer=null,t[yr]=null})}),!0):!1};nn.unstable_batchedUpdates=og;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return jd(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function ET(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ET)}catch(t){console.error(t)}}ET(),EE.exports=nn;var pg=EE.exports,TT,D0=pg;TT=D0.createRoot,D0.hydrateRoot;function rb(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var xT={exports:{}},IT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=R;function sb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ib=typeof Object.is=="function"?Object.is:sb,ob=Mo.useState,ab=Mo.useEffect,lb=Mo.useLayoutEffect,cb=Mo.useDebugValue;function ub(t,e){var n=e(),r=ob({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return lb(function(){s.value=n,s.getSnapshot=e,lf(s)&&i({inst:s})},[t,n,e]),ab(function(){return lf(s)&&i({inst:s}),t(function(){lf(s)&&i({inst:s})})},[t]),cb(n),n}function lf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ib(t,n)}catch{return!0}}function db(t,e){return e()}var hb=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?db:ub;IT.useSyncExternalStore=Mo.useSyncExternalStore!==void 0?Mo.useSyncExternalStore:hb;xT.exports=IT;var fb=xT.exports;const pb=WA.useInsertionEffect,mb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gb=mb?R.useLayoutEffect:R.useEffect,yb=pb||gb,ST=t=>{const e=R.useRef([t,(...n)=>e[0](...n)]).current;return yb(()=>{e[0]=t}),e[1]},vb="popstate",mg="pushState",gg="replaceState",_b="hashchange",L0=[vb,mg,gg,_b],wb=t=>{for(const e of L0)addEventListener(e,t);return()=>{for(const e of L0)removeEventListener(e,t)}},CT=(t,e)=>fb.useSyncExternalStore(wb,t,e),Eb=()=>location.search,Tb=({ssrSearch:t=""}={})=>CT(Eb,()=>t),M0=()=>location.pathname,xb=({ssrPath:t}={})=>CT(M0,t?()=>t:M0),Ib=(t,{replace:e=!1,state:n=null}={})=>history[e?gg:mg](n,"",t),Sb=(t={})=>[xb(t),Ib],V0=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[V0]>"u"){for(const t of[mg,gg]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,V0,{value:!0})}const Cb=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",AT=(t="")=>t==="/"?"":t,Ab=(t,e)=>t[0]==="~"?t.slice(1):AT(e)+t,Rb=(t="",e)=>Cb(j0(AT(t)),j0(e)),j0=t=>{try{return decodeURI(t)}catch{return t}},RT={hook:Sb,searchHook:Tb,parser:rb,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},PT=R.createContext(RT),Kl=()=>R.useContext(PT),bT={},kT=R.createContext(bT),Pb=()=>R.useContext(kT),Fd=t=>{const[e,n]=t.hook(t);return[Rb(t.base,e),ST((r,s)=>n(Ab(r,t.base),s))]},Rr=()=>Fd(Kl()),NT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...c]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let d={...c};return u&&Object.assign(d,u),d})(),...r?[a]:[]]:[!1,null]},bb=({children:t,...e})=>{var d,f;const n=Kl(),r=e.hook?RT:n;let s=r;const[i,o]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=R.useRef({}),c=a.current,u=c;for(let p in r){const v=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&v!==u[p]&&(a.current=u={...u}),u[p]=v,v!==r[p]&&(s=u)}return R.createElement(PT.Provider,{value:s,children:t})},F0=({children:t,component:e},n)=>e?R.createElement(e,{params:n}):typeof t=="function"?t(n):t,kb=t=>{let e=R.useRef(bT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Or=({path:t,nest:e,match:n,...r})=>{const s=Kl(),[i]=Fd(s),[o,a,c]=n??NT(s.parser,t,i,e),u=kb({...Pb(),...a});if(!o)return null;const d=c?R.createElement(bb,{base:c},F0(r,u)):F0(r,u);return R.createElement(kT.Provider,{value:u,children:d})};R.forwardRef((t,e)=>{const n=Kl(),[r,s]=Fd(n),{to:i="",href:o=i,onClick:a,asChild:c,children:u,className:d,replace:f,state:p,...v}=t,T=ST(A=>{A.ctrlKey||A.metaKey||A.altKey||A.shiftKey||A.button!==0||(a==null||a(A),A.defaultPrevented||(A.preventDefault(),s(o,t)))}),E=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&R.isValidElement(u)?R.cloneElement(u,{onClick:T,href:E}):R.createElement("a",{...v,onClick:T,href:E,className:d!=null&&d.call?d(r===o):d,children:u,ref:e})});const OT=t=>Array.isArray(t)?t.flatMap(e=>OT(e&&e.type===R.Fragment?e.props.children:e)):[t],Nb=({children:t,location:e})=>{const n=Kl(),[r]=Fd(n);for(const s of OT(t)){let i=0;if(R.isValidElement(s)&&(i=NT(n.parser,s.props.path,e||r,s.props.nest))[0])return R.cloneElement(s,{match:i})}return null};var Gl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fi=typeof window>"u"||"Deno"in globalThis;function an(){}function Ob(t,e){return typeof t=="function"?t(e):t}function wp(t){return typeof t=="number"&&t>=0&&t!==1/0}function DT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ro(t,e){return typeof t=="function"?t(e):t}function Cn(t,e){return typeof t=="function"?t(e):t}function U0(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==yg(o,e.options))return!1}else if(!Il(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function z0(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(xl(e.options.mutationKey)!==xl(i))return!1}else if(!Il(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function yg(t,e){return((e==null?void 0:e.queryKeyHashFn)||xl)(t)}function xl(t){return JSON.stringify(t,(e,n)=>Tp(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Il(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Il(t[n],e[n])):!1}function LT(t,e){if(t===e)return t;const n=B0(t)&&B0(e);if(n||Tp(t)&&Tp(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let c=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,c++):(a[d]=LT(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function Ep(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function B0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Tp(t){if(!$0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!$0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function $0(t){return Object.prototype.toString.call(t)==="[object Object]"}function Db(t){return new Promise(e=>{setTimeout(e,t)})}function xp(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?LT(t,e):e}function Lb(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Mb(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var vg=Symbol();function MT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===vg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Qs,Kr,go,tE,Vb=(tE=class extends Gl{constructor(){super();J(this,Qs);J(this,Kr);J(this,go);G(this,go,e=>{if(!fi&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,Kr)||this.setEventListener(D(this,go))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Kr))==null||e.call(this),G(this,Kr,void 0))}setEventListener(e){var n;G(this,go,e),(n=D(this,Kr))==null||n.call(this),G(this,Kr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){D(this,Qs)!==e&&(G(this,Qs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof D(this,Qs)=="boolean"?D(this,Qs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Qs=new WeakMap,Kr=new WeakMap,go=new WeakMap,tE),_g=new Vb,yo,Gr,vo,nE,jb=(nE=class extends Gl{constructor(){super();J(this,yo,!0);J(this,Gr);J(this,vo);G(this,vo,e=>{if(!fi&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,Gr)||this.setEventListener(D(this,vo))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Gr))==null||e.call(this),G(this,Gr,void 0))}setEventListener(e){var n;G(this,vo,e),(n=D(this,Gr))==null||n.call(this),G(this,Gr,e(this.setOnline.bind(this)))}setOnline(e){D(this,yo)!==e&&(G(this,yo,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return D(this,yo)}},yo=new WeakMap,Gr=new WeakMap,vo=new WeakMap,nE),Ju=new jb;function Ip(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Fb(t){return Math.min(1e3*2**t,3e4)}function VT(t){return(t??"online")==="online"?Ju.isOnline():!0}var jT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function cf(t){return t instanceof jT}function FT(t){let e=!1,n=0,r=!1,s;const i=Ip(),o=E=>{var A;r||(p(new jT(E)),(A=t.abort)==null||A.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>_g.isFocused()&&(t.networkMode==="always"||Ju.isOnline())&&t.canRun(),d=()=>VT(t.networkMode)&&t.canRun(),f=E=>{var A;r||(r=!0,(A=t.onSuccess)==null||A.call(t,E),s==null||s(),i.resolve(E))},p=E=>{var A;r||(r=!0,(A=t.onError)==null||A.call(t,E),s==null||s(),i.reject(E))},v=()=>new Promise(E=>{var A;s=_=>{(r||u())&&E(_)},(A=t.onPause)==null||A.call(t)}).then(()=>{var E;s=void 0,r||(E=t.onContinue)==null||E.call(t)}),T=()=>{if(r)return;let E;const A=n===0?t.initialPromise:void 0;try{E=A??t.fn()}catch(_){E=Promise.reject(_)}Promise.resolve(E).then(f).catch(_=>{var V;if(r)return;const w=t.retry??(fi?0:3),C=t.retryDelay??Fb,k=typeof C=="function"?C(n,_):C,L=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!L){p(_);return}n++,(V=t.onFail)==null||V.call(t,n,_),Db(k).then(()=>u()?void 0:v()).then(()=>{e?p(_):T()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?T():v().then(T),i)}}function Ub(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var st=Ub(),Ys,rE,UT=(rE=class{constructor(){J(this,Ys)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wp(this.gcTime)&&G(this,Ys,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(fi?1/0:5*60*1e3))}clearGcTimeout(){D(this,Ys)&&(clearTimeout(D(this,Ys)),G(this,Ys,void 0))}},Ys=new WeakMap,rE),_o,wo,on,mt,jl,Xs,xn,ar,sE,zb=(sE=class extends UT{constructor(n){super();J(this,xn);J(this,_o);J(this,wo);J(this,on);J(this,mt);J(this,jl);J(this,Xs);G(this,Xs,!1),G(this,jl,n.defaultOptions),this.setOptions(n.options),this.observers=[],G(this,on,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,G(this,_o,Bb(this.options)),this.state=n.state??D(this,_o),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=D(this,mt))==null?void 0:n.promise}setOptions(n){this.options={...D(this,jl),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,on).remove(this)}setData(n,r){const s=xp(this.state.data,n,this.options);return ce(this,xn,ar).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){ce(this,xn,ar).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=D(this,mt))==null?void 0:s.promise;return(i=D(this,mt))==null||i.cancel(n),r?r.then(an).catch(an):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,_o))}isActive(){return this.observers.some(n=>Cn(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!DT(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=D(this,mt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=D(this,mt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),D(this,on).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(D(this,mt)&&(D(this,Xs)?D(this,mt).cancel({revert:!0}):D(this,mt).cancelRetry()),this.scheduleGc()),D(this,on).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ce(this,xn,ar).call(this,{type:"invalidate"})}fetch(n,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(D(this,mt))return D(this,mt).continueRetry(),D(this,mt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(v=>v.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(G(this,Xs,!0),s.signal)})},o=()=>{const p=MT(this.options,r),v={queryKey:this.queryKey,meta:this.meta};return i(v),G(this,Xs,!1),this.options.persister?this.options.persister(p,v,this):p(v)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(u=this.options.behavior)==null||u.onFetch(a,this),G(this,wo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&ce(this,xn,ar).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const c=p=>{var v,T,E,A;cf(p)&&p.silent||ce(this,xn,ar).call(this,{type:"error",error:p}),cf(p)||((T=(v=D(this,on).config).onError)==null||T.call(v,p,this),(A=(E=D(this,on).config).onSettled)==null||A.call(E,this.state.data,p,this)),this.scheduleGc()};return G(this,mt,FT({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var v,T,E,A;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(_){c(_);return}(T=(v=D(this,on).config).onSuccess)==null||T.call(v,p,this),(A=(E=D(this,on).config).onSettled)==null||A.call(E,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,v)=>{ce(this,xn,ar).call(this,{type:"failed",failureCount:p,error:v})},onPause:()=>{ce(this,xn,ar).call(this,{type:"pause"})},onContinue:()=>{ce(this,xn,ar).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),D(this,mt).start()}},_o=new WeakMap,wo=new WeakMap,on=new WeakMap,mt=new WeakMap,jl=new WeakMap,Xs=new WeakMap,xn=new WeakSet,ar=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...zT(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return cf(i)&&i.revert&&D(this,wo)?{...D(this,wo),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),st.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),D(this,on).notify({query:this,type:"updated",action:n})})},sE);function zT(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Bb(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jn,iE,$b=(iE=class extends Gl{constructor(e={}){super();J(this,jn);this.config=e,G(this,jn,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??yg(s,n);let o=this.get(i);return o||(o=new zb({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){D(this,jn).has(e.queryHash)||(D(this,jn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=D(this,jn).get(e.queryHash);n&&(e.destroy(),n===e&&D(this,jn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){st.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,jn).get(e)}getAll(){return[...D(this,jn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>U0(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>U0(e,r)):n}notify(e){st.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){st.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){st.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jn=new WeakMap,iE),Fn,At,Js,Un,jr,oE,Hb=(oE=class extends UT{constructor(n){super();J(this,Un);J(this,Fn);J(this,At);J(this,Js);this.mutationId=n.mutationId,G(this,At,n.mutationCache),G(this,Fn,[]),this.state=n.state||qb(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){D(this,Fn).includes(n)||(D(this,Fn).push(n),this.clearGcTimeout(),D(this,At).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){G(this,Fn,D(this,Fn).filter(r=>r!==n)),this.scheduleGc(),D(this,At).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){D(this,Fn).length||(this.state.status==="pending"?this.scheduleGc():D(this,At).remove(this))}continue(){var n;return((n=D(this,Js))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,c,u,d,f,p,v,T,E,A,_,w,C,k,L,V,S,y;G(this,Js,FT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(I,P)=>{ce(this,Un,jr).call(this,{type:"failed",failureCount:I,error:P})},onPause:()=>{ce(this,Un,jr).call(this,{type:"pause"})},onContinue:()=>{ce(this,Un,jr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,At).canRun(this)}));const r=this.state.status==="pending",s=!D(this,Js).canStart();try{if(!r){ce(this,Un,jr).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=D(this,At).config).onMutate)==null?void 0:o.call(i,n,this));const P=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,n));P!==this.state.context&&ce(this,Un,jr).call(this,{type:"pending",context:P,variables:n,isPaused:s})}const I=await D(this,Js).start();return await((d=(u=D(this,At).config).onSuccess)==null?void 0:d.call(u,I,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,I,n,this.state.context)),await((T=(v=D(this,At).config).onSettled)==null?void 0:T.call(v,I,null,this.state.variables,this.state.context,this)),await((A=(E=this.options).onSettled)==null?void 0:A.call(E,I,null,n,this.state.context)),ce(this,Un,jr).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(_=D(this,At).config).onError)==null?void 0:w.call(_,I,n,this.state.context,this)),await((k=(C=this.options).onError)==null?void 0:k.call(C,I,n,this.state.context)),await((V=(L=D(this,At).config).onSettled)==null?void 0:V.call(L,void 0,I,this.state.variables,this.state.context,this)),await((y=(S=this.options).onSettled)==null?void 0:y.call(S,void 0,I,n,this.state.context)),I}finally{ce(this,Un,jr).call(this,{type:"error",error:I})}}finally{D(this,At).runNext(this)}}},Fn=new WeakMap,At=new WeakMap,Js=new WeakMap,Un=new WeakSet,jr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),st.batch(()=>{D(this,Fn).forEach(s=>{s.onMutationUpdate(n)}),D(this,At).notify({mutation:this,type:"updated",action:n})})},oE);function qb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kt,Fl,aE,Wb=(aE=class extends Gl{constructor(e={}){super();J(this,Kt);J(this,Fl);this.config=e,G(this,Kt,new Map),G(this,Fl,Date.now())}build(e,n,r){const s=new Hb({mutationCache:this,mutationId:++Ac(this,Fl)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=qc(e),r=D(this,Kt).get(n)??[];r.push(e),D(this,Kt).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=qc(e);if(D(this,Kt).has(n)){const s=(r=D(this,Kt).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?D(this,Kt).delete(n):D(this,Kt).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=D(this,Kt).get(qc(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=D(this,Kt).get(qc(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){st.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...D(this,Kt).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>z0(n,r))}findAll(e={}){return this.getAll().filter(n=>z0(e,n))}notify(e){st.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return st.batch(()=>Promise.all(e.map(n=>n.continue().catch(an))))}},Kt=new WeakMap,Fl=new WeakMap,aE);function qc(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function H0(t){return{onFetch:(e,n)=>{var d,f,p,v,T;const r=e.options,s=(p=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let E=!1;const A=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},_=MT(e.options,e.fetchOptions),w=async(C,k,L)=>{if(E)return Promise.reject();if(k==null&&C.pages.length)return Promise.resolve(C);const V={queryKey:e.queryKey,pageParam:k,direction:L?"backward":"forward",meta:e.options.meta};A(V);const S=await _(V),{maxPages:y}=e.options,I=L?Mb:Lb;return{pages:I(C.pages,S,y),pageParams:I(C.pageParams,k,y)}};if(s&&i.length){const C=s==="backward",k=C?Kb:q0,L={pages:i,pageParams:o},V=k(r,L);a=await w(L,V,C)}else{const C=t??i.length;do{const k=c===0?o[0]??r.initialPageParam:q0(r,a);if(c>0&&k==null)break;a=await w(a,k),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var E,A;return(A=(E=e.options).persister)==null?void 0:A.call(E,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function q0(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Kb(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ve,Qr,Yr,Eo,To,Xr,xo,Io,lE,Gb=(lE=class{constructor(t={}){J(this,Ve);J(this,Qr);J(this,Yr);J(this,Eo);J(this,To);J(this,Xr);J(this,xo);J(this,Io);G(this,Ve,t.queryCache||new $b),G(this,Qr,t.mutationCache||new Wb),G(this,Yr,t.defaultOptions||{}),G(this,Eo,new Map),G(this,To,new Map),G(this,Xr,0)}mount(){Ac(this,Xr)._++,D(this,Xr)===1&&(G(this,xo,_g.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ve).onFocus())})),G(this,Io,Ju.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ve).onOnline())})))}unmount(){var t,e;Ac(this,Xr)._--,D(this,Xr)===0&&((t=D(this,xo))==null||t.call(this),G(this,xo,void 0),(e=D(this,Io))==null||e.call(this),G(this,Io,void 0))}isFetching(t){return D(this,Ve).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,Qr).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ve).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=D(this,Ve).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(ro(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return D(this,Ve).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=D(this,Ve).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ob(e,i);if(o!==void 0)return D(this,Ve).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return st.batch(()=>D(this,Ve).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ve).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=D(this,Ve);st.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=D(this,Ve),r={type:"active",...t};return st.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=st.batch(()=>D(this,Ve).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(an).catch(an)}invalidateQueries(t={},e={}){return st.batch(()=>{if(D(this,Ve).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=st.batch(()=>D(this,Ve).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(an)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(an)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=D(this,Ve).build(this,e);return n.isStaleByTime(ro(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(an).catch(an)}fetchInfiniteQuery(t){return t.behavior=H0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(an).catch(an)}ensureInfiniteQueryData(t){return t.behavior=H0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ju.isOnline()?D(this,Qr).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,Ve)}getMutationCache(){return D(this,Qr)}getDefaultOptions(){return D(this,Yr)}setDefaultOptions(t){G(this,Yr,t)}setQueryDefaults(t,e){D(this,Eo).set(xl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,Eo).values()];let n={};return e.forEach(r=>{Il(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){D(this,To).set(xl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,To).values()];let n={};return e.forEach(r=>{Il(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...D(this,Yr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=yg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===vg&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,Yr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,Ve).clear(),D(this,Qr).clear()}},Ve=new WeakMap,Qr=new WeakMap,Yr=new WeakMap,Eo=new WeakMap,To=new WeakMap,Xr=new WeakMap,xo=new WeakMap,Io=new WeakMap,lE),jt,ue,Ul,Rt,Zs,So,Jr,zn,zl,Co,Ao,ei,ti,Zr,Ro,ve,Va,Sp,Cp,Ap,Rp,Pp,bp,kp,BT,cE,Qb=(cE=class extends Gl{constructor(e,n){super();J(this,ve);J(this,jt);J(this,ue);J(this,Ul);J(this,Rt);J(this,Zs);J(this,So);J(this,Jr);J(this,zn);J(this,zl);J(this,Co);J(this,Ao);J(this,ei);J(this,ti);J(this,Zr);J(this,Ro,new Set);this.options=n,G(this,jt,e),G(this,zn,null),G(this,Jr,Ip()),this.options.experimental_prefetchInRender||D(this,Jr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,ue).addObserver(this),W0(D(this,ue),this.options)?ce(this,ve,Va).call(this):this.updateResult(),ce(this,ve,Rp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Np(D(this,ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Np(D(this,ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ce(this,ve,Pp).call(this),ce(this,ve,bp).call(this),D(this,ue).removeObserver(this)}setOptions(e,n){const r=this.options,s=D(this,ue);if(this.options=D(this,jt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Cn(this.options.enabled,D(this,ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ce(this,ve,kp).call(this),D(this,ue).setOptions(this.options),r._defaulted&&!Ep(this.options,r)&&D(this,jt).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,ue),observer:this});const i=this.hasListeners();i&&K0(D(this,ue),s,this.options,r)&&ce(this,ve,Va).call(this),this.updateResult(n),i&&(D(this,ue)!==s||Cn(this.options.enabled,D(this,ue))!==Cn(r.enabled,D(this,ue))||ro(this.options.staleTime,D(this,ue))!==ro(r.staleTime,D(this,ue)))&&ce(this,ve,Sp).call(this);const o=ce(this,ve,Cp).call(this);i&&(D(this,ue)!==s||Cn(this.options.enabled,D(this,ue))!==Cn(r.enabled,D(this,ue))||o!==D(this,Zr))&&ce(this,ve,Ap).call(this,o)}getOptimisticResult(e){const n=D(this,jt).getQueryCache().build(D(this,jt),e),r=this.createResult(n,e);return Xb(this,r)&&(G(this,Rt,r),G(this,So,this.options),G(this,Zs,D(this,ue).state)),r}getCurrentResult(){return D(this,Rt)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){D(this,Ro).add(e)}getCurrentQuery(){return D(this,ue)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=D(this,jt).defaultQueryOptions(e),r=D(this,jt).getQueryCache().build(D(this,jt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ce(this,ve,Va).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Rt)))}createResult(e,n){var y;const r=D(this,ue),s=this.options,i=D(this,Rt),o=D(this,Zs),a=D(this,So),u=e!==r?e.state:D(this,Ul),{state:d}=e;let f={...d},p=!1,v;if(n._optimisticResults){const I=this.hasListeners(),P=!I&&W0(e,n),N=I&&K0(e,r,n,s);(P||N)&&(f={...f,...zT(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:T,errorUpdatedAt:E,status:A}=f;if(n.select&&f.data!==void 0)if(i&&f.data===(o==null?void 0:o.data)&&n.select===D(this,zl))v=D(this,Co);else try{G(this,zl,n.select),v=n.select(f.data),v=xp(i==null?void 0:i.data,v,n),G(this,Co,v),G(this,zn,null)}catch(I){G(this,zn,I)}else v=f.data;if(n.placeholderData!==void 0&&v===void 0&&A==="pending"){let I;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))I=i.data;else if(I=typeof n.placeholderData=="function"?n.placeholderData((y=D(this,Ao))==null?void 0:y.state.data,D(this,Ao)):n.placeholderData,n.select&&I!==void 0)try{I=n.select(I),G(this,zn,null)}catch(P){G(this,zn,P)}I!==void 0&&(A="success",v=xp(i==null?void 0:i.data,I,n),p=!0)}D(this,zn)&&(T=D(this,zn),v=D(this,Co),E=Date.now(),A="error");const _=f.fetchStatus==="fetching",w=A==="pending",C=A==="error",k=w&&_,L=v!==void 0,S={status:A,fetchStatus:f.fetchStatus,isPending:w,isSuccess:A==="success",isError:C,isInitialLoading:k,isLoading:k,data:v,dataUpdatedAt:f.dataUpdatedAt,error:T,errorUpdatedAt:E,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:_,isRefetching:_&&!w,isLoadingError:C&&!L,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&L,isStale:wg(e,n),refetch:this.refetch,promise:D(this,Jr)};if(this.options.experimental_prefetchInRender){const I=O=>{S.status==="error"?O.reject(S.error):S.data!==void 0&&O.resolve(S.data)},P=()=>{const O=G(this,Jr,S.promise=Ip());I(O)},N=D(this,Jr);switch(N.status){case"pending":e.queryHash===r.queryHash&&I(N);break;case"fulfilled":(S.status==="error"||S.data!==N.value)&&P();break;case"rejected":(S.status!=="error"||S.error!==N.reason)&&P();break}}return S}updateResult(e){const n=D(this,Rt),r=this.createResult(D(this,ue),this.options);if(G(this,Zs,D(this,ue).state),G(this,So,this.options),D(this,Zs).data!==void 0&&G(this,Ao,D(this,ue)),Ep(r,n))return;G(this,Rt,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!D(this,Ro).size)return!0;const c=new Set(a??D(this,Ro));return this.options.throwOnError&&c.add("error"),Object.keys(D(this,Rt)).some(u=>{const d=u;return D(this,Rt)[d]!==n[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),ce(this,ve,BT).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ce(this,ve,Rp).call(this)}},jt=new WeakMap,ue=new WeakMap,Ul=new WeakMap,Rt=new WeakMap,Zs=new WeakMap,So=new WeakMap,Jr=new WeakMap,zn=new WeakMap,zl=new WeakMap,Co=new WeakMap,Ao=new WeakMap,ei=new WeakMap,ti=new WeakMap,Zr=new WeakMap,Ro=new WeakMap,ve=new WeakSet,Va=function(e){ce(this,ve,kp).call(this);let n=D(this,ue).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(an)),n},Sp=function(){ce(this,ve,Pp).call(this);const e=ro(this.options.staleTime,D(this,ue));if(fi||D(this,Rt).isStale||!wp(e))return;const r=DT(D(this,Rt).dataUpdatedAt,e)+1;G(this,ei,setTimeout(()=>{D(this,Rt).isStale||this.updateResult()},r))},Cp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,ue)):this.options.refetchInterval)??!1},Ap=function(e){ce(this,ve,bp).call(this),G(this,Zr,e),!(fi||Cn(this.options.enabled,D(this,ue))===!1||!wp(D(this,Zr))||D(this,Zr)===0)&&G(this,ti,setInterval(()=>{(this.options.refetchIntervalInBackground||_g.isFocused())&&ce(this,ve,Va).call(this)},D(this,Zr)))},Rp=function(){ce(this,ve,Sp).call(this),ce(this,ve,Ap).call(this,ce(this,ve,Cp).call(this))},Pp=function(){D(this,ei)&&(clearTimeout(D(this,ei)),G(this,ei,void 0))},bp=function(){D(this,ti)&&(clearInterval(D(this,ti)),G(this,ti,void 0))},kp=function(){const e=D(this,jt).getQueryCache().build(D(this,jt),this.options);if(e===D(this,ue))return;const n=D(this,ue);G(this,ue,e),G(this,Ul,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},BT=function(e){st.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(D(this,Rt))}),D(this,jt).getQueryCache().notify({query:D(this,ue),type:"observerResultsUpdated"})})},cE);function Yb(t,e){return Cn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function W0(t,e){return Yb(t,e)||t.state.data!==void 0&&Np(t,e,e.refetchOnMount)}function Np(t,e,n){if(Cn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&wg(t,e)}return!1}function K0(t,e,n,r){return(t!==e||Cn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&wg(t,n)}function wg(t,e){return Cn(e.enabled,t)!==!1&&t.isStaleByTime(ro(e.staleTime,t))}function Xb(t,e){return!Ep(t.getCurrentResult(),e)}var $T=R.createContext(void 0),Jb=t=>{const e=R.useContext($T);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Zb=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx($T.Provider,{value:t,children:e})),HT=R.createContext(!1),ek=()=>R.useContext(HT);HT.Provider;function tk(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var nk=R.createContext(tk()),rk=()=>R.useContext(nk);function sk(t,e){return typeof t=="function"?t(...e):!!t}function G0(){}var ik=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ok=t=>{R.useEffect(()=>{t.clearReset()},[t])},ak=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&sk(n,[t.error,r]),lk=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},ck=(t,e)=>t.isLoading&&t.isFetching&&!e,uk=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Q0=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function dk(t,e,n){var d,f,p,v,T;const r=Jb(),s=ek(),i=rk(),o=r.defaultQueryOptions(t);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,o),o._optimisticResults=s?"isRestoring":"optimistic",lk(o),ik(o,i),ok(i);const a=!r.getQueryCache().get(o.queryHash),[c]=R.useState(()=>new e(r,o)),u=c.getOptimisticResult(o);if(R.useSyncExternalStore(R.useCallback(E=>{const A=s?G0:c.subscribe(st.batchCalls(E));return c.updateResult(),A},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),R.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),uk(o,u))throw Q0(o,c,i);if(ak({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,o,u),o.experimental_prefetchInRender&&!fi&&ck(u,s)){const E=a?Q0(o,c,i):(T=r.getQueryCache().get(o.queryHash))==null?void 0:T.promise;E==null||E.catch(G0).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function hk(t,e){return dk(t,Qb)}async function fk(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const pk=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await fk(n),await n.json())},mk=new Gb({defaultOptions:{queries:{queryFn:pk({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qT=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>R.createElement("svg",{ref:c,...yk,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qT("lucide",s),...a},[...o.map(([u,d])=>R.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(t,e)=>{const n=R.forwardRef(({className:r,...s},i)=>R.createElement(vk,{ref:i,iconNode:e,className:qT(`lucide-${gk(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=ge("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=ge("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=ge("Guitar",[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2z",key:"1u8q3z"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=ge("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=ge("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=ge("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=ge("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=ge("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=ge("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=ge("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=ge("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=ge("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=ge("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ZT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ZT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ex(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ZT(t))&&(r&&(r+=" "),r+=e);return r}const Tg="-",Bk=t=>{const e=Hk(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Tg);return a[0]===""&&a.length!==1&&a.shift(),tx(a,e)||$k(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},tx=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?tx(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Tg);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Y0=/^\[(.+)\]$/,$k=t=>{if(Y0.test(t)){const e=Y0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Hk=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Wk(Object.entries(t.classGroups),n).forEach(([i,o])=>{Op(o,r,i,e)}),r},Op=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:X0(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(qk(s)){Op(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Op(o,X0(e,i),n,r)})})},X0=(t,e)=>{let n=t;return e.split(Tg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qk=t=>t.isThemeGetter,Wk=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,Kk=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},nx="!",Gk=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,f;for(let A=0;A<a.length;A++){let _=a[A];if(u===0){if(_===s&&(r||a.slice(A,A+i)===e)){c.push(a.slice(d,A)),d=A+i;continue}if(_==="/"){f=A;continue}}_==="["?u++:_==="]"&&u--}const p=c.length===0?a:a.substring(d),v=p.startsWith(nx),T=v?p.substring(1):p,E=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:T,maybePostfixModifierPosition:E}};return n?a=>n({className:a,parseClassName:o}):o},Qk=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Yk=t=>({cache:Kk(t.cacheSize),parseClassName:Gk(t),...Bk(t)}),Xk=/\s+/,Jk=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(Xk);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(u);let T=!!v,E=r(T?p.substring(0,v):p);if(!E){if(!T){a=u+(a.length>0?" "+a:a);continue}if(E=r(p),!E){a=u+(a.length>0?" "+a:a);continue}T=!1}const A=Qk(d).join(":"),_=f?A+nx:A,w=_+E;if(i.includes(w))continue;i.push(w);const C=s(E,T);for(let k=0;k<C.length;++k){const L=C[k];i.push(_+L)}a=u+(a.length>0?" "+a:a)}return a};function Zk(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=rx(e))&&(r&&(r+=" "),r+=n);return r}const rx=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=rx(t[r]))&&(n&&(n+=" "),n+=e);return n};function e2(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return n=Yk(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=Jk(c,n);return s(c,d),d}return function(){return i(Zk.apply(null,arguments))}}const Se=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},sx=/^\[(?:([a-z-]+):)?(.+)\]$/i,t2=/^\d+\/\d+$/,n2=new Set(["px","full","screen"]),r2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,i2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,o2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,a2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,or=t=>so(t)||n2.has(t)||t2.test(t),Dr=t=>Qo(t,"length",m2),so=t=>!!t&&!Number.isNaN(Number(t)),uf=t=>Qo(t,"number",so),ba=t=>!!t&&Number.isInteger(Number(t)),l2=t=>t.endsWith("%")&&so(t.slice(0,-1)),re=t=>sx.test(t),Lr=t=>r2.test(t),c2=new Set(["length","size","percentage"]),u2=t=>Qo(t,c2,ix),d2=t=>Qo(t,"position",ix),h2=new Set(["image","url"]),f2=t=>Qo(t,h2,y2),p2=t=>Qo(t,"",g2),ka=()=>!0,Qo=(t,e,n)=>{const r=sx.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},m2=t=>s2.test(t)&&!i2.test(t),ix=()=>!1,g2=t=>o2.test(t),y2=t=>a2.test(t),v2=()=>{const t=Se("colors"),e=Se("spacing"),n=Se("blur"),r=Se("brightness"),s=Se("borderColor"),i=Se("borderRadius"),o=Se("borderSpacing"),a=Se("borderWidth"),c=Se("contrast"),u=Se("grayscale"),d=Se("hueRotate"),f=Se("invert"),p=Se("gap"),v=Se("gradientColorStops"),T=Se("gradientColorStopPositions"),E=Se("inset"),A=Se("margin"),_=Se("opacity"),w=Se("padding"),C=Se("saturate"),k=Se("scale"),L=Se("sepia"),V=Se("skew"),S=Se("space"),y=Se("translate"),I=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",re,e],O=()=>[re,e],b=()=>["",or,Dr],Z=()=>["auto",so,re],ye=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",re],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[so,re];return{cacheSize:500,separator:":",theme:{colors:[ka],spacing:[or,Dr],blur:["none","",Lr,re],brightness:ie(),borderColor:[t],borderRadius:["none","","full",Lr,re],borderSpacing:O(),borderWidth:b(),contrast:ie(),grayscale:H(),hueRotate:ie(),invert:H(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[l2,Dr],inset:N(),margin:N(),opacity:ie(),padding:O(),saturate:ie(),scale:ie(),sepia:H(),skew:ie(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",re]}],container:["container"],columns:[{columns:[Lr]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ye(),re]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ba,re]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",re]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",ba,re]}],"grid-cols":[{"grid-cols":[ka]}],"col-start-end":[{col:["auto",{span:["full",ba,re]},re]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[ka]}],"row-start-end":[{row:["auto",{span:[ba,re]},re]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",re]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",re,e]}],"min-w":[{"min-w":[re,e,"min","max","fit"]}],"max-w":[{"max-w":[re,e,"none","full","min","max","fit","prose",{screen:[Lr]},Lr]}],h:[{h:[re,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[re,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[re,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[re,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Lr,Dr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uf]}],"font-family":[{font:[ka]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",re]}],"line-clamp":[{"line-clamp":["none",so,uf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",or,re]}],"list-image":[{"list-image":["none",re]}],"list-style-type":[{list:["none","disc","decimal",re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",or,Dr]}],"underline-offset":[{"underline-offset":["auto",or,re]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ye(),d2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",u2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},f2]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:se()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[or,re]}],"outline-w":[{outline:[or,Dr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:b()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[or,Dr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Lr,p2]}],"shadow-color":[{shadow:[ka]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Lr,re]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",re]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",re]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[ba,re]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",re]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",re]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",re]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[or,Dr,uf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_2=e2(v2);function Ge(...t){return _2(ex(t))}function w2({message:t,type:e="info",duration:n=3e3,onClose:r}){const[s,i]=R.useState(!0);R.useEffect(()=>{const c=setTimeout(()=>{i(!1),setTimeout(r,300)},n);return()=>clearTimeout(c)},[n,r]);const o=()=>{i(!1),setTimeout(r,300)},a=e==="success"?Ek:e==="error"?Eg:null;return g.jsx("div",{className:Ge("fixed bottom-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg transition-all duration-300","bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",{"border-green-200 bg-green-50 dark:bg-green-900/20":e==="success","border-red-200 bg-red-50 dark:bg-red-900/20":e==="error","opacity-100 translate-y-0":s,"opacity-0 translate-y-2":!s}),children:g.jsxs("div",{className:"flex items-start gap-3",children:[a&&g.jsx(a,{className:Ge("h-5 w-5 mt-0.5 flex-shrink-0",{"text-green-600 dark:text-green-400":e==="success","text-red-600 dark:text-red-400":e==="error"})}),g.jsx("p",{className:Ge("text-sm flex-1",{"text-green-800 dark:text-green-200":e==="success","text-red-800 dark:text-red-200":e==="error","text-gray-800 dark:text-gray-200":e==="info"}),children:t}),g.jsx("button",{onClick:o,className:Ge("p-1 rounded-full transition-colors flex-shrink-0","hover:bg-gray-100 dark:hover:bg-gray-700",{"hover:bg-green-100 dark:hover:bg-green-800":e==="success","hover:bg-red-100 dark:hover:bg-red-800":e==="error"}),children:g.jsx(zk,{className:"h-4 w-4"})})]})})}let E2=0;const Ja=[];let si=[];function Oi(t,e="info"){const n=++E2;si=[...si,{id:n,message:t,type:e}],Ja.forEach(r=>r(si)),setTimeout(()=>{ox(n)},3e3)}function ox(t){si=si.filter(e=>e.id!==t),Ja.forEach(e=>e(si))}function T2(){const[t,e]=R.useState(si);return R.useEffect(()=>(Ja.push(e),()=>{const n=Ja.indexOf(e);n>-1&&Ja.splice(n,1)}),[]),t}function x2(){const t=T2();return g.jsx(g.Fragment,{children:t.map(e=>g.jsx(w2,{message:e.message,type:e.type,onClose:()=>ox(e.id)},e.id))})}function it(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function J0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ax(...t){return e=>{let n=!1;const r=t.map(s=>{const i=J0(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():J0(t[s],null)}}}}function Ot(...t){return R.useCallback(ax(...t),t)}function Yo(t,e=[]){let n=[];function r(i,o){const a=R.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:p,children:v,...T}=f,E=((_=p==null?void 0:p[t])==null?void 0:_[c])||a,A=R.useMemo(()=>T,Object.values(T));return g.jsx(E.Provider,{value:A,children:v})};u.displayName=i+"Provider";function d(f,p){var E;const v=((E=p==null?void 0:p[t])==null?void 0:E[c])||a,T=R.useContext(v);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>R.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return R.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,I2(s,...e)]}function I2(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...a,...f}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ed(t){const e=C2(t),n=R.forwardRef((r,s)=>{const{children:i,...o}=r,a=R.Children.toArray(i),c=a.find(R2);if(c){const u=c.props.children,d=a.map(f=>f===c?R.Children.count(u)>1?R.Children.only(null):R.isValidElement(u)?u.props.children:null:f);return g.jsx(e,{...o,ref:s,children:R.isValidElement(u)?R.cloneElement(u,void 0,d):null})}return g.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var S2=ed("Slot");function C2(t){const e=R.forwardRef((n,r)=>{const{children:s,...i}=n;if(R.isValidElement(s)){const o=b2(s),a=P2(i,s.props);return s.type!==R.Fragment&&(a.ref=r?ax(r,o):o),R.cloneElement(s,a)}return R.Children.count(s)>1?R.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var lx=Symbol("radix.slottable");function A2(t){const e=({children:n})=>g.jsx(g.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=lx,e}function R2(t){return R.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lx}function P2(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function b2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var k2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xt=k2.reduce((t,e)=>{const n=ed(`Primitive.${e}`),r=R.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function N2(t,e){t&&pg.flushSync(()=>t.dispatchEvent(e))}function Xo(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function O2(t,e=globalThis==null?void 0:globalThis.document){const n=Xo(t);R.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var D2="DismissableLayer",Dp="dismissableLayer.update",L2="dismissableLayer.pointerDownOutside",M2="dismissableLayer.focusOutside",Z0,cx=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ux=R.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=R.useContext(cx),[d,f]=R.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=R.useState({}),T=Ot(e,S=>f(S)),E=Array.from(u.layers),[A]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=E.indexOf(A),w=d?E.indexOf(d):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,k=w>=_,L=F2(S=>{const y=S.target,I=[...u.branches].some(P=>P.contains(y));!k||I||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},p),V=U2(S=>{const y=S.target;[...u.branches].some(P=>P.contains(y))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},p);return O2(S=>{w===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),R.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Z0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),e_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Z0)}},[d,p,n,u]),R.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),e_())},[d,u]),R.useEffect(()=>{const S=()=>v({});return document.addEventListener(Dp,S),()=>document.removeEventListener(Dp,S)},[]),g.jsx(xt.div,{...c,ref:T,style:{pointerEvents:C?k?"auto":"none":void 0,...t.style},onFocusCapture:it(t.onFocusCapture,V.onFocusCapture),onBlurCapture:it(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:it(t.onPointerDownCapture,L.onPointerDownCapture)})});ux.displayName=D2;var V2="DismissableLayerBranch",j2=R.forwardRef((t,e)=>{const n=R.useContext(cx),r=R.useRef(null),s=Ot(e,r);return R.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),g.jsx(xt.div,{...t,ref:s})});j2.displayName=V2;function F2(t,e=globalThis==null?void 0:globalThis.document){const n=Xo(t),r=R.useRef(!1),s=R.useRef(()=>{});return R.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){dx(L2,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function U2(t,e=globalThis==null?void 0:globalThis.document){const n=Xo(t),r=R.useRef(!1);return R.useEffect(()=>{const s=i=>{i.target&&!r.current&&dx(M2,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function e_(){const t=new CustomEvent(Dp);document.dispatchEvent(t)}function dx(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?N2(s,i):s.dispatchEvent(i)}var Sl=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{};const z2=["top","right","bottom","left"],_s=Math.min,Qt=Math.max,td=Math.round,Wc=Math.floor,Wn=t=>({x:t,y:t}),B2={left:"right",right:"left",bottom:"top",top:"bottom"},$2={start:"end",end:"start"};function Lp(t,e,n){return Qt(t,_s(e,n))}function wr(t,e){return typeof t=="function"?t(e):t}function Er(t){return t.split("-")[0]}function Jo(t){return t.split("-")[1]}function xg(t){return t==="x"?"y":"x"}function Ig(t){return t==="y"?"height":"width"}function ws(t){return["top","bottom"].includes(Er(t))?"y":"x"}function Sg(t){return xg(ws(t))}function H2(t,e,n){n===void 0&&(n=!1);const r=Jo(t),s=Sg(t),i=Ig(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=nd(o)),[o,nd(o)]}function q2(t){const e=nd(t);return[Mp(t),e,Mp(e)]}function Mp(t){return t.replace(/start|end/g,e=>$2[e])}function W2(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function K2(t,e,n,r){const s=Jo(t);let i=W2(Er(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Mp)))),i}function nd(t){return t.replace(/left|right|bottom|top/g,e=>B2[e])}function G2(t){return{top:0,right:0,bottom:0,left:0,...t}}function hx(t){return typeof t!="number"?G2(t):{top:t,right:t,bottom:t,left:t}}function rd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function t_(t,e,n){let{reference:r,floating:s}=t;const i=ws(e),o=Sg(e),a=Ig(o),c=Er(e),u=i==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let v;switch(c){case"top":v={x:d,y:r.y-s.height};break;case"bottom":v={x:d,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(Jo(e)){case"start":v[o]-=p*(n&&u?-1:1);break;case"end":v[o]+=p*(n&&u?-1:1);break}return v}const Q2=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=t_(u,r,c),p=r,v={},T=0;for(let E=0;E<a.length;E++){const{name:A,fn:_}=a[E],{x:w,y:C,data:k,reset:L}=await _({x:d,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});d=w??d,f=C??f,v={...v,[A]:{...v[A],...k}},L&&T<=50&&(T++,typeof L=="object"&&(L.placement&&(p=L.placement),L.rects&&(u=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:d,y:f}=t_(u,p,c)),E=-1)}return{x:d,y:f,placement:p,strategy:s,middlewareData:v}};async function Cl(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=wr(e,t),T=hx(v),A=a[p?f==="floating"?"reference":"floating":f],_=rd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(A)))==null||n?A:A.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},L=rd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:C,strategy:c}):w);return{top:(_.top-L.top+T.top)/k.y,bottom:(L.bottom-_.bottom+T.bottom)/k.y,left:(_.left-L.left+T.left)/k.x,right:(L.right-_.right+T.right)/k.x}}const Y2=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=wr(t,e)||{};if(u==null)return{};const f=hx(d),p={x:n,y:r},v=Sg(s),T=Ig(v),E=await o.getDimensions(u),A=v==="y",_=A?"top":"left",w=A?"bottom":"right",C=A?"clientHeight":"clientWidth",k=i.reference[T]+i.reference[v]-p[v]-i.floating[T],L=p[v]-i.reference[v],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=V?V[C]:0;(!S||!await(o.isElement==null?void 0:o.isElement(V)))&&(S=a.floating[C]||i.floating[T]);const y=k/2-L/2,I=S/2-E[T]/2-1,P=_s(f[_],I),N=_s(f[w],I),O=P,b=S-E[T]-N,Z=S/2-E[T]/2+y,ye=Lp(O,Z,b),se=!c.arrow&&Jo(s)!=null&&Z!==ye&&i.reference[T]/2-(Z<O?P:N)-E[T]/2<0,ne=se?Z<O?Z-O:Z-b:0;return{[v]:p[v]+ne,data:{[v]:ye,centerOffset:Z-ye-ne,...se&&{alignmentOffset:ne}},reset:se}}}),X2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:E=!0,...A}=wr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Er(s),w=ws(a),C=Er(a)===a,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),L=p||(C||!E?[nd(a)]:q2(a)),V=T!=="none";!p&&V&&L.push(...K2(a,E,T,k));const S=[a,...L],y=await Cl(e,A),I=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&I.push(y[_]),f){const Z=H2(s,o,k);I.push(y[Z[0]],y[Z[1]])}if(P=[...P,{placement:s,overflows:I}],!I.every(Z=>Z<=0)){var N,O;const Z=(((N=i.flip)==null?void 0:N.index)||0)+1,ye=S[Z];if(ye)return{data:{index:Z,overflows:P},reset:{placement:ye}};let se=(O=P.filter(ne=>ne.overflows[0]<=0).sort((ne,F)=>ne.overflows[1]-F.overflows[1])[0])==null?void 0:O.placement;if(!se)switch(v){case"bestFit":{var b;const ne=(b=P.filter(F=>{if(V){const H=ws(F.placement);return H===w||H==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(H=>H>0).reduce((H,Q)=>H+Q,0)]).sort((F,H)=>F[1]-H[1])[0])==null?void 0:b[0];ne&&(se=ne);break}case"initialPlacement":se=a;break}if(s!==se)return{reset:{placement:se}}}return{}}}};function n_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function r_(t){return z2.some(e=>t[e]>=0)}const J2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=wr(t,e);switch(r){case"referenceHidden":{const i=await Cl(e,{...s,elementContext:"reference"}),o=n_(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:r_(o)}}}case"escaped":{const i=await Cl(e,{...s,altBoundary:!0}),o=n_(i,n.floating);return{data:{escapedOffsets:o,escaped:r_(o)}}}default:return{}}}}};async function Z2(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Er(n),a=Jo(n),c=ws(n)==="y",u=["left","top"].includes(o)?-1:1,d=i&&c?-1:1,f=wr(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:T}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof T=="number"&&(v=a==="end"?T*-1:T),c?{x:v*d,y:p*u}:{x:p*u,y:v*d}}const eN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await Z2(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},tN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:A=>{let{x:_,y:w}=A;return{x:_,y:w}}},...c}=wr(t,e),u={x:n,y:r},d=await Cl(e,c),f=ws(Er(s)),p=xg(f);let v=u[p],T=u[f];if(i){const A=p==="y"?"top":"left",_=p==="y"?"bottom":"right",w=v+d[A],C=v-d[_];v=Lp(w,v,C)}if(o){const A=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=T+d[A],C=T-d[_];T=Lp(w,T,C)}const E=a.fn({...e,[p]:v,[f]:T});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[p]:i,[f]:o}}}}}},nN=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=wr(t,e),d={x:n,y:r},f=ws(s),p=xg(f);let v=d[p],T=d[f];const E=wr(a,e),A=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(c){const C=p==="y"?"height":"width",k=i.reference[p]-i.floating[C]+A.mainAxis,L=i.reference[p]+i.reference[C]-A.mainAxis;v<k?v=k:v>L&&(v=L)}if(u){var _,w;const C=p==="y"?"width":"height",k=["top","left"].includes(Er(s)),L=i.reference[f]-i.floating[C]+(k&&((_=o.offset)==null?void 0:_[f])||0)+(k?0:A.crossAxis),V=i.reference[f]+i.reference[C]+(k?0:((w=o.offset)==null?void 0:w[f])||0)-(k?A.crossAxis:0);T<L?T=L:T>V&&(T=V)}return{[p]:v,[f]:T}}}},rN=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=wr(t,e),d=await Cl(e,u),f=Er(s),p=Jo(s),v=ws(s)==="y",{width:T,height:E}=i.floating;let A,_;f==="top"||f==="bottom"?(A=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,A=p==="end"?"top":"bottom");const w=E-d.top-d.bottom,C=T-d.left-d.right,k=_s(E-d[A],w),L=_s(T-d[_],C),V=!e.middlewareData.shift;let S=k,y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(y=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=w),V&&!p){const P=Qt(d.left,0),N=Qt(d.right,0),O=Qt(d.top,0),b=Qt(d.bottom,0);v?y=T-2*(P!==0||N!==0?P+N:Qt(d.left,d.right)):S=E-2*(O!==0||b!==0?O+b:Qt(d.top,d.bottom))}await c({...e,availableWidth:y,availableHeight:S});const I=await o.getDimensions(a.floating);return T!==I.width||E!==I.height?{reset:{rects:!0}}:{}}}};function Ud(){return typeof window<"u"}function Zo(t){return fx(t)?(t.nodeName||"").toLowerCase():"#document"}function en(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function tr(t){var e;return(e=(fx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fx(t){return Ud()?t instanceof Node||t instanceof en(t).Node:!1}function kn(t){return Ud()?t instanceof Element||t instanceof en(t).Element:!1}function Zn(t){return Ud()?t instanceof HTMLElement||t instanceof en(t).HTMLElement:!1}function s_(t){return!Ud()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof en(t).ShadowRoot}function Ql(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Nn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function sN(t){return["table","td","th"].includes(Zo(t))}function zd(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Cg(t){const e=Ag(),n=kn(t)?Nn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function iN(t){let e=Es(t);for(;Zn(e)&&!Vo(e);){if(Cg(e))return e;if(zd(e))return null;e=Es(e)}return null}function Ag(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Vo(t){return["html","body","#document"].includes(Zo(t))}function Nn(t){return en(t).getComputedStyle(t)}function Bd(t){return kn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Es(t){if(Zo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||s_(t)&&t.host||tr(t);return s_(e)?e.host:e}function px(t){const e=Es(t);return Vo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zn(e)&&Ql(e)?e:px(e)}function Al(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=px(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=en(s);if(i){const a=Vp(o);return e.concat(o,o.visualViewport||[],Ql(s)?s:[],a&&n?Al(a):[])}return e.concat(s,Al(s,[],n))}function Vp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function mx(t){const e=Nn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Zn(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=td(n)!==i||td(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Rg(t){return kn(t)?t:t.contextElement}function io(t){const e=Rg(t);if(!Zn(e))return Wn(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=mx(e);let o=(i?td(n.width):n.width)/r,a=(i?td(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const oN=Wn(0);function gx(t){const e=en(t);return!Ag()||!e.visualViewport?oN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aN(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==en(t)?!1:e}function pi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Rg(t);let o=Wn(1);e&&(r?kn(r)&&(o=io(r)):o=io(t));const a=aN(i,n,r)?gx(i):Wn(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(i){const p=en(i),v=r&&kn(r)?en(r):r;let T=p,E=Vp(T);for(;E&&r&&v!==T;){const A=io(E),_=E.getBoundingClientRect(),w=Nn(E),C=_.left+(E.clientLeft+parseFloat(w.paddingLeft))*A.x,k=_.top+(E.clientTop+parseFloat(w.paddingTop))*A.y;c*=A.x,u*=A.y,d*=A.x,f*=A.y,c+=C,u+=k,T=en(E),E=Vp(T)}}return rd({width:d,height:f,x:c,y:u})}function Pg(t,e){const n=Bd(t).scrollLeft;return e?e.left+n:pi(tr(t)).left+n}function yx(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Pg(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function lN(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=tr(r),a=e?zd(e.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Wn(1);const d=Wn(0),f=Zn(r);if((f||!f&&!i)&&((Zo(r)!=="body"||Ql(o))&&(c=Bd(r)),Zn(r))){const v=pi(r);u=io(r),d.x=v.x+r.clientLeft,d.y=v.y+r.clientTop}const p=o&&!f&&!i?yx(o,c,!0):Wn(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function cN(t){return Array.from(t.getClientRects())}function uN(t){const e=tr(t),n=Bd(t),r=t.ownerDocument.body,s=Qt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Qt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Pg(t);const a=-n.scrollTop;return Nn(r).direction==="rtl"&&(o+=Qt(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function dN(t,e){const n=en(t),r=tr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=Ag();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function hN(t,e){const n=pi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Zn(t)?io(t):Wn(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function i_(t,e,n){let r;if(e==="viewport")r=dN(t,n);else if(e==="document")r=uN(tr(t));else if(kn(e))r=hN(e,n);else{const s=gx(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return rd(r)}function vx(t,e){const n=Es(t);return n===e||!kn(n)||Vo(n)?!1:Nn(n).position==="fixed"||vx(n,e)}function fN(t,e){const n=e.get(t);if(n)return n;let r=Al(t,[],!1).filter(a=>kn(a)&&Zo(a)!=="body"),s=null;const i=Nn(t).position==="fixed";let o=i?Es(t):t;for(;kn(o)&&!Vo(o);){const a=Nn(o),c=Cg(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ql(o)&&!c&&vx(t,o))?r=r.filter(d=>d!==o):s=a,o=Es(o)}return e.set(t,r),r}function pN(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?zd(e)?[]:fN(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,d)=>{const f=i_(e,d,s);return u.top=Qt(f.top,u.top),u.right=_s(f.right,u.right),u.bottom=_s(f.bottom,u.bottom),u.left=Qt(f.left,u.left),u},i_(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mN(t){const{width:e,height:n}=mx(t);return{width:e,height:n}}function gN(t,e,n){const r=Zn(e),s=tr(e),i=n==="fixed",o=pi(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=Wn(0);if(r||!r&&!i)if((Zo(e)!=="body"||Ql(s))&&(a=Bd(e)),r){const p=pi(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Pg(s));const u=s&&!r&&!i?yx(s,a):Wn(0),d=o.left+a.scrollLeft-c.x-u.x,f=o.top+a.scrollTop-c.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function df(t){return Nn(t).position==="static"}function o_(t,e){if(!Zn(t)||Nn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return tr(t)===n&&(n=n.ownerDocument.body),n}function _x(t,e){const n=en(t);if(zd(t))return n;if(!Zn(t)){let s=Es(t);for(;s&&!Vo(s);){if(kn(s)&&!df(s))return s;s=Es(s)}return n}let r=o_(t,e);for(;r&&sN(r)&&df(r);)r=o_(r,e);return r&&Vo(r)&&df(r)&&!Cg(r)?n:r||iN(t)||n}const yN=async function(t){const e=this.getOffsetParent||_x,n=this.getDimensions,r=await n(t.floating);return{reference:gN(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vN(t){return Nn(t).direction==="rtl"}const _N={convertOffsetParentRelativeRectToViewportRelativeRect:lN,getDocumentElement:tr,getClippingRect:pN,getOffsetParent:_x,getElementRects:yN,getClientRects:cN,getDimensions:mN,getScale:io,isElement:kn,isRTL:vN};function wx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wN(t,e){let n=null,r;const s=tr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:f,width:p,height:v}=u;if(a||e(),!p||!v)return;const T=Wc(f),E=Wc(s.clientWidth-(d+p)),A=Wc(s.clientHeight-(f+v)),_=Wc(d),C={rootMargin:-T+"px "+-E+"px "+-A+"px "+-_+"px",threshold:Qt(0,_s(1,c))||1};let k=!0;function L(V){const S=V[0].intersectionRatio;if(S!==c){if(!k)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!wx(u,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(L,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,C)}n.observe(t)}return o(!0),i}function EN(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Rg(t),d=s||i?[...u?Al(u):[],...Al(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&a?wN(u,n):null;let p=-1,v=null;o&&(v=new ResizeObserver(_=>{let[w]=_;w&&w.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(e)})),n()}),u&&!c&&v.observe(u),v.observe(e));let T,E=c?pi(t):null;c&&A();function A(){const _=pi(t);E&&!wx(E,_)&&n(),E=_,T=requestAnimationFrame(A)}return n(),()=>{var _;d.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(_=v)==null||_.disconnect(),v=null,c&&cancelAnimationFrame(T)}}const TN=eN,xN=tN,IN=X2,SN=rN,CN=J2,a_=Y2,AN=nN,RN=(t,e,n)=>{const r=new Map,s={platform:_N,...n},i={...s.platform,_c:r};return Q2(t,e,{...s,platform:i})};var gu=typeof document<"u"?R.useLayoutEffect:R.useEffect;function sd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!sd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!sd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Ex(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function l_(t,e){const n=Ex(t);return Math.round(e*n)/n}function hf(t){const e=R.useRef(t);return gu(()=>{e.current=t}),e}function PN(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[d,f]=R.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=R.useState(r);sd(p,r)||v(r);const[T,E]=R.useState(null),[A,_]=R.useState(null),w=R.useCallback(F=>{F!==V.current&&(V.current=F,E(F))},[]),C=R.useCallback(F=>{F!==S.current&&(S.current=F,_(F))},[]),k=i||T,L=o||A,V=R.useRef(null),S=R.useRef(null),y=R.useRef(d),I=c!=null,P=hf(c),N=hf(s),O=hf(u),b=R.useCallback(()=>{if(!V.current||!S.current)return;const F={placement:e,strategy:n,middleware:p};N.current&&(F.platform=N.current),RN(V.current,S.current,F).then(H=>{const Q={...H,isPositioned:O.current!==!1};Z.current&&!sd(y.current,Q)&&(y.current=Q,pg.flushSync(()=>{f(Q)}))})},[p,e,n,N,O]);gu(()=>{u===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[u]);const Z=R.useRef(!1);gu(()=>(Z.current=!0,()=>{Z.current=!1}),[]),gu(()=>{if(k&&(V.current=k),L&&(S.current=L),k&&L){if(P.current)return P.current(k,L,b);b()}},[k,L,b,P,I]);const ye=R.useMemo(()=>({reference:V,floating:S,setReference:w,setFloating:C}),[w,C]),se=R.useMemo(()=>({reference:k,floating:L}),[k,L]),ne=R.useMemo(()=>{const F={position:n,left:0,top:0};if(!se.floating)return F;const H=l_(se.floating,d.x),Q=l_(se.floating,d.y);return a?{...F,transform:"translate("+H+"px, "+Q+"px)",...Ex(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:Q}},[n,a,se.floating,d.x,d.y]);return R.useMemo(()=>({...d,update:b,refs:ye,elements:se,floatingStyles:ne}),[d,b,ye,se,ne])}const bN=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?a_({element:r.current,padding:s}).fn(n):{}:r?a_({element:r,padding:s}).fn(n):{}}}},kN=(t,e)=>({...TN(t),options:[t,e]}),NN=(t,e)=>({...xN(t),options:[t,e]}),ON=(t,e)=>({...AN(t),options:[t,e]}),DN=(t,e)=>({...IN(t),options:[t,e]}),LN=(t,e)=>({...SN(t),options:[t,e]}),MN=(t,e)=>({...CN(t),options:[t,e]}),VN=(t,e)=>({...bN(t),options:[t,e]});var jN="Arrow",Tx=R.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return g.jsx(xt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});Tx.displayName=jN;var FN=Tx;function bg(t){const[e,n]=R.useState(void 0);return Sl(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var xx="Popper",[Ix,Sx]=Yo(xx),[QU,Cx]=Ix(xx),Ax="PopperAnchor",Rx=R.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Cx(Ax,n),o=R.useRef(null),a=Ot(e,o);return R.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:g.jsx(xt.div,{...s,ref:a})});Rx.displayName=Ax;var kg="PopperContent",[UN,zN]=Ix(kg),Px=R.forwardRef((t,e)=>{var sn,lc,cc,Ls,Ms,Ci;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:T,...E}=t,A=Cx(kg,n),[_,w]=R.useState(null),C=Ot(e,rr=>w(rr)),[k,L]=R.useState(null),V=bg(k),S=(V==null?void 0:V.width)??0,y=(V==null?void 0:V.height)??0,I=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(u)?u:[u],O=N.length>0,b={padding:P,boundary:N.filter($N),altBoundary:O},{refs:Z,floatingStyles:ye,placement:se,isPositioned:ne,middlewareData:F}=PN({strategy:"fixed",placement:I,whileElementsMounted:(...rr)=>EN(...rr,{animationFrame:v==="always"}),elements:{reference:A.anchor},middleware:[kN({mainAxis:s+y,alignmentAxis:o}),c&&NN({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?ON():void 0,...b}),c&&DN({...b}),LN({...b,apply:({elements:rr,rects:Ai,availableWidth:la,availableHeight:uc})=>{const{width:fh,height:ph}=Ai.reference,Vs=rr.floating.style;Vs.setProperty("--radix-popper-available-width",`${la}px`),Vs.setProperty("--radix-popper-available-height",`${uc}px`),Vs.setProperty("--radix-popper-anchor-width",`${fh}px`),Vs.setProperty("--radix-popper-anchor-height",`${ph}px`)}}),k&&VN({element:k,padding:a}),HN({arrowWidth:S,arrowHeight:y}),p&&MN({strategy:"referenceHidden",...b})]}),[H,Q]=Nx(se),ie=Xo(T);Sl(()=>{ne&&(ie==null||ie())},[ne,ie]);const _e=(sn=F.arrow)==null?void 0:sn.x,ke=(lc=F.arrow)==null?void 0:lc.y,yn=((cc=F.arrow)==null?void 0:cc.centerOffset)!==0,[vn,_n]=R.useState();return Sl(()=>{_&&_n(window.getComputedStyle(_).zIndex)},[_]),g.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...ye,transform:ne?ye.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:vn,"--radix-popper-transform-origin":[(Ls=F.transformOrigin)==null?void 0:Ls.x,(Ms=F.transformOrigin)==null?void 0:Ms.y].join(" "),...((Ci=F.hide)==null?void 0:Ci.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(UN,{scope:n,placedSide:H,onArrowChange:L,arrowX:_e,arrowY:ke,shouldHideArrow:yn,children:g.jsx(xt.div,{"data-side":H,"data-align":Q,...E,ref:C,style:{...E.style,animation:ne?void 0:"none"}})})})});Px.displayName=kg;var bx="PopperArrow",BN={top:"bottom",right:"left",bottom:"top",left:"right"},kx=R.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=zN(bx,r),o=BN[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(FN,{...s,ref:n,style:{...s.style,display:"block"}})})});kx.displayName=bx;function $N(t){return t!==null}var HN=t=>({name:"transformOrigin",options:t,fn(e){var A,_,w;const{placement:n,rects:r,middlewareData:s}=e,o=((A=s.arrow)==null?void 0:A.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=Nx(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,v=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let T="",E="";return u==="bottom"?(T=o?f:`${p}px`,E=`${-c}px`):u==="top"?(T=o?f:`${p}px`,E=`${r.floating.height+c}px`):u==="right"?(T=`${-c}px`,E=o?f:`${v}px`):u==="left"&&(T=`${r.floating.width+c}px`,E=o?f:`${v}px`),{data:{x:T,y:E}}}});function Nx(t){const[e,n="center"]=t.split("-");return[e,n]}var qN=Rx,WN=Px,KN=kx;function GN(t,e){return R.useReducer((n,r)=>e[n][r]??n,t)}var Ng=t=>{const{present:e,children:n}=t,r=QN(e),s=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),i=Ot(r.ref,YN(s));return typeof n=="function"||r.isPresent?R.cloneElement(s,{ref:i}):null};Ng.displayName="Presence";function QN(t){const[e,n]=R.useState(),r=R.useRef({}),s=R.useRef(t),i=R.useRef("none"),o=t?"mounted":"unmounted",[a,c]=GN(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const u=Kc(r.current);i.current=a==="mounted"?u:"none"},[a]),Sl(()=>{const u=r.current,d=s.current;if(d!==t){const p=i.current,v=Kc(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Sl(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=v=>{const E=Kc(r.current).includes(v.animationName);if(v.target===e&&E&&(c("ANIMATION_END"),!s.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},p=v=>{v.target===e&&(i.current=Kc(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:R.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Kc(t){return(t==null?void 0:t.animationName)||"none"}function YN(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ox({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=XN({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Xo(n),c=R.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&a(f)}else s(u)},[i,t,s,a]);return[o,c]}function XN({defaultProp:t,onChange:e}){const n=R.useState(t),[r]=n,s=R.useRef(r),i=Xo(e);return R.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var JN="VisuallyHidden",Dx=R.forwardRef((t,e)=>g.jsx(xt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Dx.displayName=JN;var ZN=Dx,[$d,YU]=Yo("Tooltip",[Sx]),Og=Sx(),Lx="TooltipProvider",eO=700,c_="tooltip.open",[tO,Mx]=$d(Lx),Vx=t=>{const{__scopeTooltip:e,delayDuration:n=eO,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=R.useRef(!0),a=R.useRef(!1),c=R.useRef(0);return R.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),g.jsx(tO,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:R.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:R.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};Vx.displayName=Lx;var jx="Tooltip",[XU,Hd]=$d(jx),jp="TooltipTrigger",nO=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Hd(jp,n),i=Mx(jp,n),o=Og(n),a=R.useRef(null),c=Ot(e,a,s.onTriggerChange),u=R.useRef(!1),d=R.useRef(!1),f=R.useCallback(()=>u.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),g.jsx(qN,{asChild:!0,...o,children:g.jsx(xt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:it(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:it(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:it(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:it(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:it(t.onBlur,s.onClose),onClick:it(t.onClick,s.onClose)})})});nO.displayName=jp;var rO="TooltipPortal",[JU,sO]=$d(rO,{forceMount:void 0}),jo="TooltipContent",Fx=R.forwardRef((t,e)=>{const n=sO(jo,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Hd(jo,t.__scopeTooltip);return g.jsx(Ng,{present:r||o.open,children:o.disableHoverableContent?g.jsx(Ux,{side:s,...i,ref:e}):g.jsx(iO,{side:s,...i,ref:e})})}),iO=R.forwardRef((t,e)=>{const n=Hd(jo,t.__scopeTooltip),r=Mx(jo,t.__scopeTooltip),s=R.useRef(null),i=Ot(e,s),[o,a]=R.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:f}=r,p=R.useCallback(()=>{a(null),f(!1)},[f]),v=R.useCallback((T,E)=>{const A=T.currentTarget,_={x:T.clientX,y:T.clientY},w=uO(_,A.getBoundingClientRect()),C=dO(_,w),k=hO(E.getBoundingClientRect()),L=pO([...C,...k]);a(L),f(!0)},[f]);return R.useEffect(()=>()=>p(),[p]),R.useEffect(()=>{if(c&&d){const T=A=>v(A,d),E=A=>v(A,c);return c.addEventListener("pointerleave",T),d.addEventListener("pointerleave",E),()=>{c.removeEventListener("pointerleave",T),d.removeEventListener("pointerleave",E)}}},[c,d,v,p]),R.useEffect(()=>{if(o){const T=E=>{const A=E.target,_={x:E.clientX,y:E.clientY},w=(c==null?void 0:c.contains(A))||(d==null?void 0:d.contains(A)),C=!fO(_,o);w?p():C&&(p(),u())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[c,d,o,u,p]),g.jsx(Ux,{...t,ref:i})}),[oO,aO]=$d(jx,{isInside:!1}),lO=A2("TooltipContent"),Ux=R.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,c=Hd(jo,n),u=Og(n),{onClose:d}=c;return R.useEffect(()=>(document.addEventListener(c_,d),()=>document.removeEventListener(c_,d)),[d]),R.useEffect(()=>{if(c.trigger){const f=p=>{const v=p.target;v!=null&&v.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),g.jsx(ux,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:g.jsxs(WN,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(lO,{children:r}),g.jsx(oO,{scope:n,isInside:!0,children:g.jsx(ZN,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Fx.displayName=jo;var zx="TooltipArrow",cO=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Og(n);return aO(zx,n).isInside?null:g.jsx(KN,{...s,...r,ref:e})});cO.displayName=zx;function uO(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dO(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function hO(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function fO(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,u=e[o].x,d=e[o].y;c>r!=d>r&&n<(u-a)*(r-c)/(d-c)+a&&(s=!s)}return s}function pO(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),mO(e)}function mO(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var gO=Vx,Bx=Fx;const yO=gO,vO=R.forwardRef(({className:t,sideOffset:e=4,...n},r)=>g.jsx(Bx,{ref:r,sideOffset:e,className:Ge("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));vO.displayName=Bx.displayName;class _O extends R.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){var r,s;console.warn("ErrorBoundary caught an error:",e,n),(r=event==null?void 0:event.preventDefault)==null||r.call(event),(s=event==null?void 0:event.stopPropagation)==null||s.call(event)}render(){return this.state.hasError?this.props.fallback||g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs("div",{className:"text-center p-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Algo deu errado"}),g.jsx("p",{className:"text-gray-600 mb-4",children:"Recarregue a pgina para tentar novamente."}),g.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Recarregar Pgina"})]})}):this.props.children}}const wO=()=>{};var u_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},EO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Hx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,v=u&63;c||(v=64,o||(p=64)),r.push(n[d],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($x(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new TO;const p=i<<2|a>>4;if(r.push(p),u!==64){const v=a<<4&240|u>>2;if(r.push(v),f!==64){const T=u<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xO=function(t){const e=$x(t);return Hx.encodeByteArray(e,!0)},id=function(t){return xO(t).replace(/\./g,"")},qx=function(t){try{return Hx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=()=>IO().__FIREBASE_DEFAULTS__,CO=()=>{if(typeof process>"u"||typeof u_>"u")return;const t=u_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qx(t[1]);return e&&JSON.parse(e)},qd=()=>{try{return wO()||SO()||CO()||AO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wx=t=>{var e,n;return(n=(e=qd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kx=t=>{const e=Wx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gx=()=>{var t;return(t=qd())===null||t===void 0?void 0:t.config},Qx=t=>{var e;return(e=qd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[id(JSON.stringify(n)),id(JSON.stringify(o)),""].join(".")}const Za={};function PO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Za))Za[e]?t.emulator.push(e):t.prod.push(e);return t}function bO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let d_=!1;function Lg(t,e){if(typeof window>"u"||typeof document>"u"||!Os(window.location.host)||Za[t]===e||Za[t]||d_)return;Za[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=PO().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{d_=!0,o()},p}function d(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=bO(r),v=n("text"),T=document.getElementById(v)||document.createElement("span"),E=n("learnmore"),A=document.getElementById(E)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const C=p.element;a(C),d(A,E);const k=u();c(w,_),C.append(w,T,A,k),document.body.appendChild(C)}i?(T.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function NO(){var t;const e=(t=qd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MO(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VO(){return!NO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jO(){try{return typeof indexedDB=="object"}catch{return!1}}function FO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UO,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?zO(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new nr(s,a,r)}}function zO(t,e){return t.replace(BO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const BO=/\{\$([^}]+)}/g;function $O(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(h_(i)&&h_(o)){if(!mi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function h_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ja(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Fa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HO(t,e){const n=new qO(t,e);return n.subscribe.bind(n)}class qO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ff),s.error===void 0&&(s.error=ff),s.complete===void 0&&(s.complete=ff);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QO(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GO(t){return t===Hs?void 0:t}function QO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const XO={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},JO=le.INFO,ZO={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},eD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZO[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mg{constructor(e){this.name=e,this._logLevel=JO,this._logHandler=eD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const tD=(t,e)=>e.some(n=>t instanceof n);let f_,p_;function nD(){return f_||(f_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rD(){return p_||(p_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xx=new WeakMap,Fp=new WeakMap,Jx=new WeakMap,pf=new WeakMap,Vg=new WeakMap;function sD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xx.set(n,t)}).catch(()=>{}),Vg.set(e,t),e}function iD(t){if(Fp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Fp.set(t,e)}let Up={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oD(t){Up=t(Up)}function aD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mf(this),e,...n);return Jx.set(r,e.sort?e.sort():[e]),hs(r)}:rD().includes(t)?function(...e){return t.apply(mf(this),e),hs(Xx.get(this))}:function(...e){return hs(t.apply(mf(this),e))}}function lD(t){return typeof t=="function"?aD(t):(t instanceof IDBTransaction&&iD(t),tD(t,nD())?new Proxy(t,Up):t)}function hs(t){if(t instanceof IDBRequest)return sD(t);if(pf.has(t))return pf.get(t);const e=lD(t);return e!==t&&(pf.set(t,e),Vg.set(e,t)),e}const mf=t=>Vg.get(t);function cD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=hs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(hs(o.result),c.oldVersion,c.newVersion,hs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const uD=["get","getKey","getAll","getAllKeys","count"],dD=["put","add","delete","clear"],gf=new Map;function m_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=dD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||uD.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return gf.set(e,i),i}oD(t=>({...t,get:(e,n,r)=>m_(e,n)||t.get(e,n,r),has:(e,n)=>!!m_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zp="@firebase/app",g_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new Mg("@firebase/app"),pD="@firebase/app-compat",mD="@firebase/analytics-compat",gD="@firebase/analytics",yD="@firebase/app-check-compat",vD="@firebase/app-check",_D="@firebase/auth",wD="@firebase/auth-compat",ED="@firebase/database",TD="@firebase/data-connect",xD="@firebase/database-compat",ID="@firebase/functions",SD="@firebase/functions-compat",CD="@firebase/installations",AD="@firebase/installations-compat",RD="@firebase/messaging",PD="@firebase/messaging-compat",bD="@firebase/performance",kD="@firebase/performance-compat",ND="@firebase/remote-config",OD="@firebase/remote-config-compat",DD="@firebase/storage",LD="@firebase/storage-compat",MD="@firebase/firestore",VD="@firebase/ai",jD="@firebase/firestore-compat",FD="firebase",UD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="[DEFAULT]",zD={[zp]:"fire-core",[pD]:"fire-core-compat",[gD]:"fire-analytics",[mD]:"fire-analytics-compat",[vD]:"fire-app-check",[yD]:"fire-app-check-compat",[_D]:"fire-auth",[wD]:"fire-auth-compat",[ED]:"fire-rtdb",[TD]:"fire-data-connect",[xD]:"fire-rtdb-compat",[ID]:"fire-fn",[SD]:"fire-fn-compat",[CD]:"fire-iid",[AD]:"fire-iid-compat",[RD]:"fire-fcm",[PD]:"fire-fcm-compat",[bD]:"fire-perf",[kD]:"fire-perf-compat",[ND]:"fire-rc",[OD]:"fire-rc-compat",[DD]:"fire-gcs",[LD]:"fire-gcs-compat",[MD]:"fire-fst",[jD]:"fire-fst-compat",[VD]:"fire-vertex","fire-js":"fire-js",[FD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Map,BD=new Map,$p=new Map;function y_(t,e){try{t.container.addComponent(e)}catch(n){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gi(t){const e=t.name;if($p.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,t);for(const n of od.values())y_(n,t);for(const n of BD.values())y_(n,t);return!0}function Wd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new Yl("app","Firebase",$D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=UD;function Zx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw fs.create("bad-app-name",{appName:String(s)});if(n||(n=Gx()),!n)throw fs.create("no-options");const i=od.get(s);if(i){if(mi(n,i.options)&&mi(r,i.config))return i;throw fs.create("duplicate-app",{appName:s})}const o=new YO(s);for(const c of $p.values())o.addComponent(c);const a=new HD(n,r,o);return od.set(s,a),a}function jg(t=Bp){const e=od.get(t);if(!e&&t===Bp&&Gx())return Zx();if(!e)throw fs.create("no-app",{appName:t});return e}function Kn(t,e,n){var r;let s=(r=zD[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(a.join(" "));return}gi(new Ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="firebase-heartbeat-database",WD=1,Rl="firebase-heartbeat-store";let yf=null;function eI(){return yf||(yf=cD(qD,WD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw fs.create("idb-open",{originalErrorMessage:t.message})})),yf}async function KD(t){try{const n=(await eI()).transaction(Rl),r=await n.objectStore(Rl).get(tI(t));return await n.done,r}catch(e){if(e instanceof nr)Tr.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(n.message)}}}async function v_(t,e){try{const r=(await eI()).transaction(Rl,"readwrite");await r.objectStore(Rl).put(e,tI(t)),await r.done}catch(n){if(n instanceof nr)Tr.warn(n.message);else{const r=fs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tr.warn(r.message)}}}function tI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=1024,QD=30;class YD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=__();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>QD){const o=ZD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=__(),{heartbeatsToSend:r,unsentEntries:s}=XD(this._heartbeatsCache.heartbeats),i=id(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Tr.warn(n),""}}}function __(){return new Date().toISOString().substring(0,10)}function XD(t,e=GD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),w_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),w_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jO()?FO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return v_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return v_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function w_(t){return id(JSON.stringify({version:2,heartbeats:t})).length}function ZD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){gi(new Ts("platform-logger",e=>new hD(e),"PRIVATE")),gi(new Ts("heartbeat",e=>new YD(e),"PRIVATE")),Kn(zp,g_,t),Kn(zp,g_,"esm2017"),Kn("fire-js","")}eL("");function Fg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function nI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tL=nI,rI=new Yl("auth","Firebase",nI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Mg("@firebase/auth");function nL(t,...e){ad.logLevel<=le.WARN&&ad.warn(`Auth (${Ti}): ${t}`,...e)}function yu(t,...e){ad.logLevel<=le.ERROR&&ad.error(`Auth (${Ti}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw Ug(t,...e)}function Gn(t,...e){return Ug(t,...e)}function sI(t,e,n){const r=Object.assign(Object.assign({},tL()),{[e]:n});return new Yl("auth","Firebase",r).create(e,{appName:t.name})}function ps(t){return sI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ug(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rI.create(t,...e)}function X(t,e,...n){if(!t)throw Ug(e,...n)}function fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yu(e),new Error(e)}function xr(t,e){t||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rL(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rL()||DO()||"connection"in navigator)?navigator.onLine:!0}function iL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,xr(n>e,"Short delay should be less than long delay!"),this.isMobile=kO()||LO()}get(){return sL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e){xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lL=new Jl(3e4,6e4);function xi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ds(t,e,n,r,s={}){return oI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Xl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return OO()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Os(t.emulatorConfig.host)&&(u.credentials="include"),iI.fetch()(await aI(t,t.config.apiHost,n,a),u)})}async function oI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},oL),e);try{const s=new uL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Gc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Gc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Gc(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sI(t,d,u);On(t,d)}}catch(s){if(s instanceof nr)throw s;On(t,"network-request-failed",{message:String(s)})}}async function Kd(t,e,n,r,s={}){const i=await Ds(t,e,n,r,s);return"mfaPendingCredential"in i&&On(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function aI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?zg(t.config,s):`${t.config.apiScheme}://${s}`;return aL.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function cL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gn(this.auth,"network-request-failed")),lL.get())})}}function Gc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Gn(t,e,r);return s.customData._tokenResponse=n,s}function T_(t){return t!==void 0&&t.enterprise!==void 0}class dL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hL(t,e){return Ds(t,"GET","/v2/recaptchaConfig",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e){return Ds(t,"POST","/v1/accounts:delete",e)}async function ld(t,e){return Ds(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pL(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),s=Bg(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:el(vf(s.auth_time)),issuedAtTime:el(vf(s.iat)),expirationTime:el(vf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vf(t){return Number(t)*1e3}function Bg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yu("JWT malformed, contained fewer than 3 sections"),null;try{const s=qx(n);return s?JSON.parse(s):(yu("Failed to decode base64 JWT payload"),null)}catch(s){return yu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function x_(t){const e=Bg(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&mL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Pl(t,ld(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?lI(i.providerUserInfo):[],a=vL(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new qp(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function yL(t){const e=Tt(t);await cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function lI(t){return t.map(e=>{var{providerId:n}=e,r=Fg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e){const n=await oI(t,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await aI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Os(t.emulatorConfig.host)&&(c.credentials="include"),iI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wL(t,e){return Ds(t,"POST","/v2/accounts:revokeToken",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=x_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await _L(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new oo;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class An{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Fg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pL(this,e)}reload(){return yL(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new An(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await Pl(this,fL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:k,isAnonymous:L,providerData:V,stsTokenManager:S}=n;X(C&&S,e,"internal-error");const y=oo.fromJSON(this.name,S);X(typeof C=="string",e,"internal-error"),Mr(f,e.name),Mr(p,e.name),X(typeof k=="boolean",e,"internal-error"),X(typeof L=="boolean",e,"internal-error"),Mr(v,e.name),Mr(T,e.name),Mr(E,e.name),Mr(A,e.name),Mr(_,e.name),Mr(w,e.name);const I=new An({uid:C,auth:e,email:p,emailVerified:k,displayName:f,isAnonymous:L,photoURL:T,phoneNumber:v,tenantId:E,stsTokenManager:y,createdAt:_,lastLoginAt:w});return V&&Array.isArray(V)&&(I.providerData=V.map(P=>Object.assign({},P))),A&&(I._redirectEventId=A),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new oo;s.updateFromServerResponse(n);const i=new An({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?lI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new oo;a.updateFromIdToken(r);const c=new An({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new Map;function pr(t){xr(t instanceof Function,"Expected a class definition");let e=I_.get(t);return e?(xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cI.type="NONE";const S_=cI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t,e,n){return`firebase:${t}:${e}:${n}`}class ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vu(this.userKey,s.apiKey,i),this.fullPersistenceKey=vu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ld(this.auth,{idToken:e}).catch(()=>{});return n?An._fromGetAccountInfoResponse(this.auth,n,e):null}return An._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ao(pr(S_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||pr(S_);const o=vu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const p=await ld(e,{idToken:d}).catch(()=>{});if(!p)break;f=await An._fromGetAccountInfoResponse(e,p,d)}else f=An._fromJSON(e,d);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ao(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ao(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mI(e))return"Blackberry";if(gI(e))return"Webos";if(dI(e))return"Safari";if((e.includes("chrome/")||hI(e))&&!e.includes("edge/"))return"Chrome";if(pI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uI(t=Et()){return/firefox\//i.test(t)}function dI(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hI(t=Et()){return/crios\//i.test(t)}function fI(t=Et()){return/iemobile/i.test(t)}function pI(t=Et()){return/android/i.test(t)}function mI(t=Et()){return/blackberry/i.test(t)}function gI(t=Et()){return/webos/i.test(t)}function $g(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EL(t=Et()){var e;return $g(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TL(){return MO()&&document.documentMode===10}function yI(t=Et()){return $g(t)||pI(t)||gI(t)||mI(t)||/windows phone/i.test(t)||fI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e=[]){let n;switch(t){case"Browser":n=C_(Et());break;case"Worker":n=`${C_(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ti}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(t,e={}){return Ds(t,"GET","/v2/passwordPolicy",xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=6;class CL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A_(this),this.idTokenSubscription=new A_(this),this.beforeStateQueue=new xL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ld(this,{idToken:e}),r=await An._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(ps(this));const n=e?Tt(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IL(this),n=new CL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ea(t){return Tt(t)}class A_{constructor(e){this.auth=e,this.observer=null,this.addObserver=HO(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RL(t){Gd=t}function _I(t){return Gd.loadJS(t)}function PL(){return Gd.recaptchaEnterpriseScript}function bL(){return Gd.gapiScript}function kL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class NL{constructor(){this.enterprise=new OL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class OL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const DL="recaptcha-enterprise",wI="NO_RECAPTCHA";class LL{constructor(e){this.type=DL,this.auth=ea(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{hL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new dL(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;T_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(wI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NL().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&T_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=PL();c.length!==0&&(c+=a),_I(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function R_(t,e,n,r=!1,s=!1){const i=new LL(t);let o;if(s)o=wI;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function P_(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await R_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await R_(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t,e){const n=Wd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(mi(i,e??{}))return s;On(s,"already-initialized")}return n.initialize({options:e})}function VL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jL(t,e,n){const r=ea(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=EI(e),{host:o,port:a}=FL(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(mi(u,r.config.emulator)&&mi(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Os(o)?(Dg(`${i}//${o}${c}`),Lg("Auth",!0)):UL()}function EI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function FL(t){const e=EI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:b_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:b_(o)}}}function b_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,n){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}async function zL(t,e){return Ds(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e){return Kd(t,"POST","/v1/accounts:signInWithPassword",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t,e){return Kd(t,"POST","/v1/accounts:signInWithEmailLink",xi(t,e))}async function HL(t,e){return Kd(t,"POST","/v1/accounts:signInWithEmailLink",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Hg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new bl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new bl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P_(e,n,"signInWithPassword",BL);case"emailLink":return $L(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return P_(e,r,"signUpPassword",zL);case"emailLink":return HL(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e){return Kd(t,"POST","/v1/accounts:signInWithIdp",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="http://localhost";class yi extends Hg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Fg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new yi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,lo(e,n)}buildRequest(){const e={requestUri:qL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KL(t){const e=ja(Fa(t)).link,n=e?ja(Fa(e)).deep_link_id:null,r=ja(Fa(t)).deep_link_id;return(r?ja(Fa(r)).link:null)||r||n||e||t}class qg{constructor(e){var n,r,s,i,o,a;const c=ja(Fa(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=WL((s=c.mode)!==null&&s!==void 0?s:null);X(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=KL(e);try{return new qg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qg.parseLink(n);return X(r,"argument-error"),bl._fromEmailAndCode(e,r.code,r.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends TI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Zl{constructor(){super("facebook.com")}static credential(e){return yi._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yi._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Zl{constructor(){super("github.com")}static credential(e){return yi._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Zl{constructor(){super("twitter.com")}static credential(e,n){return yi._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await An._fromIdTokenResponse(e,r,s),o=k_(r);return new Fo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=k_(r);return new Fo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function k_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends nr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ud.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ud(e,n,r,s)}}function xI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ud._fromErrorAndOperation(t,i,e,r):i})}async function GL(t,e,n=!1){const r=await Pl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e,n=!1){const{auth:r}=t;if(un(r.app))return Promise.reject(ps(r));const s="reauthenticate";try{const i=await Pl(t,xI(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=Bg(i.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),Fo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&On(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(t,e,n=!1){if(un(t.app))return Promise.reject(ps(t));const r="signIn",s=await xI(t,r,e),i=await Fo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function YL(t,e){return II(ea(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t){const e=ea(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function JL(t,e,n){return un(t.app)?Promise.reject(ps(t)):YL(Tt(t),ta.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XL(t),r})}function ZL(t,e,n,r){return Tt(t).onIdTokenChanged(e,n,r)}function e4(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function SI(t,e,n,r){return Tt(t).onAuthStateChanged(e,n,r)}function t4(t){return Tt(t).signOut()}const dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1e3,r4=10;class AI extends CI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);TL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,r4):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},n4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AI.type="LOCAL";const s4=AI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends CI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RI.type="SESSION";const PI=RI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Qd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await i4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=Wg("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return window}function a4(t){Qn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}async function l4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function u4(){return bI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebaseLocalStorageDb",d4=1,hd="firebaseLocalStorage",NI="fbase_key";class ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yd(t,e){return t.transaction([hd],e?"readwrite":"readonly").objectStore(hd)}function h4(){const t=indexedDB.deleteDatabase(kI);return new ec(t).toPromise()}function Wp(){const t=indexedDB.open(kI,d4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hd,{keyPath:NI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hd)?e(r):(r.close(),await h4(),e(await Wp()))})})}async function N_(t,e,n){const r=Yd(t,!0).put({[NI]:e,value:n});return new ec(r).toPromise()}async function f4(t,e){const n=Yd(t,!1).get(e),r=await new ec(n).toPromise();return r===void 0?null:r.value}function O_(t,e){const n=Yd(t,!0).delete(e);return new ec(n).toPromise()}const p4=800,m4=3;class OI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>m4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qd._getInstance(u4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await l4(),!this.activeServiceWorker)return;this.sender=new o4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wp();return await N_(e,dd,"1"),await O_(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>N_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>f4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>O_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Yd(s,!1).getAll();return new ec(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OI.type="LOCAL";const g4=OI;new Jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t,e){return e?pr(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends Hg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function v4(t){return II(t.auth,new Kg(t),t.bypassAuthState)}function _4(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),QL(n,new Kg(t),t.bypassAuthState)}async function w4(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),GL(n,new Kg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v4;case"linkViaPopup":case"linkViaRedirect":return w4;case"reauthViaPopup":case"reauthViaRedirect":return _4;default:On(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new Jl(2e3,1e4);class Yi extends DI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Yi.currentPopupAction&&Yi.currentPopupAction.cancel(),Yi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=Wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E4.get())};e()}}Yi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="pendingRedirect",_u=new Map;class x4 extends DI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_u.get(this.auth._key());if(!e){try{const r=await I4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_u.set(this.auth._key(),e)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I4(t,e){const n=A4(e),r=C4(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function S4(t,e){_u.set(t._key(),e)}function C4(t){return pr(t._redirectPersistence)}function A4(t){return vu(T4,t.config.apiKey,t.name)}async function R4(t,e,n=!1){if(un(t.app))return Promise.reject(ps(t));const r=ea(t),s=y4(r,e),o=await new x4(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=10*60*1e3;class b4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P4&&this.cachedEventUids.clear(),this.cachedEventUids.has(D_(e))}saveEventToCache(e){this.cachedEventUids.add(D_(e)),this.lastProcessedEventTime=Date.now()}}function D_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(t,e={}){return Ds(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D4=/^https?/;async function L4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await N4(t);for(const n of e)try{if(M4(n))return}catch{}On(t,"unauthorized-domain")}function M4(t){const e=Hp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!D4.test(n))return!1;if(O4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new Jl(3e4,6e4);function L_(){const t=Qn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j4(t){return new Promise((e,n)=>{var r,s,i;function o(){L_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L_(),n(Gn(t,"network-request-failed"))},timeout:V4.get()})}if(!((s=(r=Qn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Qn().gapi)===null||i===void 0)&&i.load)o();else{const a=kL("iframefcb");return Qn()[a]=()=>{gapi.load?o():n(Gn(t,"network-request-failed"))},_I(`${bL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw wu=null,e})}let wu=null;function F4(t){return wu=wu||j4(t),wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=new Jl(5e3,15e3),z4="__/auth/iframe",B4="emulator/auth/iframe",$4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q4(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zg(e,B4):`https://${t.config.authDomain}/${z4}`,r={apiKey:e.apiKey,appName:t.name,v:Ti},s=H4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xl(r).slice(1)}`}async function W4(t){const e=await F4(t),n=Qn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:q4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Gn(t,"network-request-failed"),a=Qn().setTimeout(()=>{i(o)},U4.get());function c(){Qn().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G4=500,Q4=600,Y4="_blank",X4="http://localhost";class M_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J4(t,e,n,r=G4,s=Q4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},K4),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Et().toLowerCase();n&&(a=hI(u)?Y4:n),uI(u)&&(e=e||X4,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[v,T])=>`${p}${v}=${T},`,"");if(EL(u)&&a!=="_self")return Z4(e||"",a),new M_(null);const f=window.open(e||"",a,d);X(f,t,"popup-blocked");try{f.focus()}catch{}return new M_(f)}function Z4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="__/auth/handler",tM="emulator/auth/handler",nM=encodeURIComponent("fac");async function V_(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ti,eventId:s};if(e instanceof TI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$O(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Zl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${nM}=${encodeURIComponent(c)}`:"";return`${rM(t)}?${Xl(a).slice(1)}${u}`}function rM({config:t}){return t.emulator?zg(t,tM):`https://${t.authDomain}/${eM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class sM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PI,this._completeRedirectFn=R4,this._overrideRedirectResult=S4}async _openPopup(e,n,r,s){var i;xr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await V_(e,n,r,Hp(),s);return J4(e,o,Wg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await V_(e,n,r,Hp(),s);return a4(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(xr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await W4(e),r=new b4(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_f,{type:_f},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[_f];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yI()||dI()||$g()}}const iM=sM;var j_="@firebase/auth",F_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lM(t){gi(new Ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vI(t)},u=new AL(r,s,i,c);return VL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gi(new Ts("auth-internal",e=>{const n=ea(e.getProvider("auth").getImmediate());return(r=>new oM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(j_,F_,aM(t)),Kn(j_,F_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=5*60,uM=Qx("authIdTokenMaxAge")||cM;let U_=null;const dM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uM)return;const s=n==null?void 0:n.token;U_!==s&&(U_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MI(t=jg()){const e=Wd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ML(t,{popupRedirectResolver:iM,persistence:[g4,s4,PI]}),r=Qx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=dM(i.toString());e4(n,o,()=>o(n.currentUser)),ZL(n,a=>o(a))}}const s=Wx("auth");return s&&jL(n,`http://${s}`),n}function hM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Gn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",hM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lM("Browser");var fM="firebase",pM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(fM,pM,"app");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ms,VI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,y){function I(){}I.prototype=y.prototype,S.D=y.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(P,N,O){for(var b=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)b[Z-2]=arguments[Z];return y.prototype[N].apply(P,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,y,I){I||(I=0);var P=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)P[N]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(N=0;16>N;++N)P[N]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=S.g[0],I=S.g[1],N=S.g[2];var O=S.g[3],b=y+(O^I&(N^O))+P[0]+3614090360&4294967295;y=I+(b<<7&4294967295|b>>>25),b=O+(N^y&(I^N))+P[1]+3905402710&4294967295,O=y+(b<<12&4294967295|b>>>20),b=N+(I^O&(y^I))+P[2]+606105819&4294967295,N=O+(b<<17&4294967295|b>>>15),b=I+(y^N&(O^y))+P[3]+3250441966&4294967295,I=N+(b<<22&4294967295|b>>>10),b=y+(O^I&(N^O))+P[4]+4118548399&4294967295,y=I+(b<<7&4294967295|b>>>25),b=O+(N^y&(I^N))+P[5]+1200080426&4294967295,O=y+(b<<12&4294967295|b>>>20),b=N+(I^O&(y^I))+P[6]+2821735955&4294967295,N=O+(b<<17&4294967295|b>>>15),b=I+(y^N&(O^y))+P[7]+4249261313&4294967295,I=N+(b<<22&4294967295|b>>>10),b=y+(O^I&(N^O))+P[8]+1770035416&4294967295,y=I+(b<<7&4294967295|b>>>25),b=O+(N^y&(I^N))+P[9]+2336552879&4294967295,O=y+(b<<12&4294967295|b>>>20),b=N+(I^O&(y^I))+P[10]+4294925233&4294967295,N=O+(b<<17&4294967295|b>>>15),b=I+(y^N&(O^y))+P[11]+2304563134&4294967295,I=N+(b<<22&4294967295|b>>>10),b=y+(O^I&(N^O))+P[12]+1804603682&4294967295,y=I+(b<<7&4294967295|b>>>25),b=O+(N^y&(I^N))+P[13]+4254626195&4294967295,O=y+(b<<12&4294967295|b>>>20),b=N+(I^O&(y^I))+P[14]+2792965006&4294967295,N=O+(b<<17&4294967295|b>>>15),b=I+(y^N&(O^y))+P[15]+1236535329&4294967295,I=N+(b<<22&4294967295|b>>>10),b=y+(N^O&(I^N))+P[1]+4129170786&4294967295,y=I+(b<<5&4294967295|b>>>27),b=O+(I^N&(y^I))+P[6]+3225465664&4294967295,O=y+(b<<9&4294967295|b>>>23),b=N+(y^I&(O^y))+P[11]+643717713&4294967295,N=O+(b<<14&4294967295|b>>>18),b=I+(O^y&(N^O))+P[0]+3921069994&4294967295,I=N+(b<<20&4294967295|b>>>12),b=y+(N^O&(I^N))+P[5]+3593408605&4294967295,y=I+(b<<5&4294967295|b>>>27),b=O+(I^N&(y^I))+P[10]+38016083&4294967295,O=y+(b<<9&4294967295|b>>>23),b=N+(y^I&(O^y))+P[15]+3634488961&4294967295,N=O+(b<<14&4294967295|b>>>18),b=I+(O^y&(N^O))+P[4]+3889429448&4294967295,I=N+(b<<20&4294967295|b>>>12),b=y+(N^O&(I^N))+P[9]+568446438&4294967295,y=I+(b<<5&4294967295|b>>>27),b=O+(I^N&(y^I))+P[14]+3275163606&4294967295,O=y+(b<<9&4294967295|b>>>23),b=N+(y^I&(O^y))+P[3]+4107603335&4294967295,N=O+(b<<14&4294967295|b>>>18),b=I+(O^y&(N^O))+P[8]+1163531501&4294967295,I=N+(b<<20&4294967295|b>>>12),b=y+(N^O&(I^N))+P[13]+2850285829&4294967295,y=I+(b<<5&4294967295|b>>>27),b=O+(I^N&(y^I))+P[2]+4243563512&4294967295,O=y+(b<<9&4294967295|b>>>23),b=N+(y^I&(O^y))+P[7]+1735328473&4294967295,N=O+(b<<14&4294967295|b>>>18),b=I+(O^y&(N^O))+P[12]+2368359562&4294967295,I=N+(b<<20&4294967295|b>>>12),b=y+(I^N^O)+P[5]+4294588738&4294967295,y=I+(b<<4&4294967295|b>>>28),b=O+(y^I^N)+P[8]+2272392833&4294967295,O=y+(b<<11&4294967295|b>>>21),b=N+(O^y^I)+P[11]+1839030562&4294967295,N=O+(b<<16&4294967295|b>>>16),b=I+(N^O^y)+P[14]+4259657740&4294967295,I=N+(b<<23&4294967295|b>>>9),b=y+(I^N^O)+P[1]+2763975236&4294967295,y=I+(b<<4&4294967295|b>>>28),b=O+(y^I^N)+P[4]+1272893353&4294967295,O=y+(b<<11&4294967295|b>>>21),b=N+(O^y^I)+P[7]+4139469664&4294967295,N=O+(b<<16&4294967295|b>>>16),b=I+(N^O^y)+P[10]+3200236656&4294967295,I=N+(b<<23&4294967295|b>>>9),b=y+(I^N^O)+P[13]+681279174&4294967295,y=I+(b<<4&4294967295|b>>>28),b=O+(y^I^N)+P[0]+3936430074&4294967295,O=y+(b<<11&4294967295|b>>>21),b=N+(O^y^I)+P[3]+3572445317&4294967295,N=O+(b<<16&4294967295|b>>>16),b=I+(N^O^y)+P[6]+76029189&4294967295,I=N+(b<<23&4294967295|b>>>9),b=y+(I^N^O)+P[9]+3654602809&4294967295,y=I+(b<<4&4294967295|b>>>28),b=O+(y^I^N)+P[12]+3873151461&4294967295,O=y+(b<<11&4294967295|b>>>21),b=N+(O^y^I)+P[15]+530742520&4294967295,N=O+(b<<16&4294967295|b>>>16),b=I+(N^O^y)+P[2]+3299628645&4294967295,I=N+(b<<23&4294967295|b>>>9),b=y+(N^(I|~O))+P[0]+4096336452&4294967295,y=I+(b<<6&4294967295|b>>>26),b=O+(I^(y|~N))+P[7]+1126891415&4294967295,O=y+(b<<10&4294967295|b>>>22),b=N+(y^(O|~I))+P[14]+2878612391&4294967295,N=O+(b<<15&4294967295|b>>>17),b=I+(O^(N|~y))+P[5]+4237533241&4294967295,I=N+(b<<21&4294967295|b>>>11),b=y+(N^(I|~O))+P[12]+1700485571&4294967295,y=I+(b<<6&4294967295|b>>>26),b=O+(I^(y|~N))+P[3]+2399980690&4294967295,O=y+(b<<10&4294967295|b>>>22),b=N+(y^(O|~I))+P[10]+4293915773&4294967295,N=O+(b<<15&4294967295|b>>>17),b=I+(O^(N|~y))+P[1]+2240044497&4294967295,I=N+(b<<21&4294967295|b>>>11),b=y+(N^(I|~O))+P[8]+1873313359&4294967295,y=I+(b<<6&4294967295|b>>>26),b=O+(I^(y|~N))+P[15]+4264355552&4294967295,O=y+(b<<10&4294967295|b>>>22),b=N+(y^(O|~I))+P[6]+2734768916&4294967295,N=O+(b<<15&4294967295|b>>>17),b=I+(O^(N|~y))+P[13]+1309151649&4294967295,I=N+(b<<21&4294967295|b>>>11),b=y+(N^(I|~O))+P[4]+4149444226&4294967295,y=I+(b<<6&4294967295|b>>>26),b=O+(I^(y|~N))+P[11]+3174756917&4294967295,O=y+(b<<10&4294967295|b>>>22),b=N+(y^(O|~I))+P[2]+718787259&4294967295,N=O+(b<<15&4294967295|b>>>17),b=I+(O^(N|~y))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(N+(b<<21&4294967295|b>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var I=y-this.blockSize,P=this.B,N=this.h,O=0;O<y;){if(N==0)for(;O<=I;)s(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<y;)if(P[N++]=S.charCodeAt(O++),N==this.blockSize){s(this,P),N=0;break}}else for(;O<y;)if(P[N++]=S[O++],N==this.blockSize){s(this,P),N=0;break}}this.h=N,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var I=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=I&255,I/=256;for(this.u(S),S=Array(16),y=I=0;4>y;++y)for(var P=0;32>P;P+=8)S[I++]=this.g[y]>>>P&255;return S};function i(S,y){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=y(S)}function o(S,y){this.h=y;for(var I=[],P=!0,N=S.length-1;0<=N;N--){var O=S[N]|0;P&&O==y||(I[N]=O,P=!1)}this.g=I}var a={};function c(S){return-128<=S&&128>S?i(S,function(y){return new o([y|0],0>y?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return A(u(-S));for(var y=[],I=1,P=0;S>=I;P++)y[P]=S/I|0,I*=4294967296;return new o(y,0)}function d(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return A(d(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(y,8)),P=f,N=0;N<S.length;N+=8){var O=Math.min(8,S.length-N),b=parseInt(S.substring(N,N+O),y);8>O?(O=u(Math.pow(y,O)),P=P.j(O).add(u(b))):(P=P.j(I),P=P.add(u(b)))}return P}var f=c(0),p=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(E(this))return-A(this).m();for(var S=0,y=1,I=0;I<this.g.length;I++){var P=this.i(I);S+=(0<=P?P:4294967296+P)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(E(this))return"-"+A(this).toString(S);for(var y=u(Math.pow(S,6)),I=this,P="";;){var N=k(I,y).g;I=_(I,N.j(y));var O=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=N,T(I))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=_(this,S),E(S)?-1:T(S)?0:1};function A(S){for(var y=S.g.length,I=[],P=0;P<y;P++)I[P]=~S.g[P];return new o(I,~S.h).add(p)}t.abs=function(){return E(this)?A(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],P=0,N=0;N<=y;N++){var O=P+(this.i(N)&65535)+(S.i(N)&65535),b=(O>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);P=b>>>16,O&=65535,b&=65535,I[N]=b<<16|O}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(S,y){return S.add(A(y))}t.j=function(S){if(T(this)||T(S))return f;if(E(this))return E(S)?A(this).j(A(S)):A(A(this).j(S));if(E(S))return A(this.j(A(S)));if(0>this.l(v)&&0>S.l(v))return u(this.m()*S.m());for(var y=this.g.length+S.g.length,I=[],P=0;P<2*y;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<S.g.length;N++){var O=this.i(P)>>>16,b=this.i(P)&65535,Z=S.i(N)>>>16,ye=S.i(N)&65535;I[2*P+2*N]+=b*ye,w(I,2*P+2*N),I[2*P+2*N+1]+=O*ye,w(I,2*P+2*N+1),I[2*P+2*N+1]+=b*Z,w(I,2*P+2*N+1),I[2*P+2*N+2]+=O*Z,w(I,2*P+2*N+2)}for(P=0;P<y;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=y;P<2*y;P++)I[P]=0;return new o(I,0)};function w(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function C(S,y){this.g=S,this.h=y}function k(S,y){if(T(y))throw Error("division by zero");if(T(S))return new C(f,f);if(E(S))return y=k(A(S),y),new C(A(y.g),A(y.h));if(E(y))return y=k(S,A(y)),new C(A(y.g),y.h);if(30<S.g.length){if(E(S)||E(y))throw Error("slowDivide_ only works with positive integers.");for(var I=p,P=y;0>=P.l(S);)I=L(I),P=L(P);var N=V(I,1),O=V(P,1);for(P=V(P,2),I=V(I,2);!T(P);){var b=O.add(P);0>=b.l(S)&&(N=N.add(I),O=b),P=V(P,1),I=V(I,1)}return y=_(S,N.j(y)),new C(N,y)}for(N=f;0<=S.l(y);){for(I=Math.max(1,Math.floor(S.m()/y.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=u(I),b=O.j(y);E(b)||0<b.l(S);)I-=P,O=u(I),b=O.j(y);T(O)&&(O=p),N=N.add(O),S=_(S,b)}return new C(N,S)}t.A=function(S){return k(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],P=0;P<y;P++)I[P]=this.i(P)&S.i(P);return new o(I,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],P=0;P<y;P++)I[P]=this.i(P)|S.i(P);return new o(I,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),I=[],P=0;P<y;P++)I[P]=this.i(P)^S.i(P);return new o(I,this.h^S.h)};function L(S){for(var y=S.g.length+1,I=[],P=0;P<y;P++)I[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(I,S.h)}function V(S,y){var I=y>>5;y%=32;for(var P=S.g.length-I,N=[],O=0;O<P;O++)N[O]=0<y?S.i(O+I)>>>y|S.i(O+I+1)<<32-y:S.i(O+I);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,ms=o}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jI,Ua,FI,Eu,Kp,UI,zI,BI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var M=l[x];if(!(M in m))break e;m=m[M]}l=l[l.length-1],x=m[l],h=h(x),h!=x&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,x=!1,M={next:function(){if(!x&&m<l.length){var j=m++;return{value:h(j,l[j]),done:!1}}return x=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,m){return l.call.apply(l.bind,arguments)}function f(l,h,m){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,x),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function p(l,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function v(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function T(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(x,M,j){for(var $=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)$[Ee-2]=arguments[Ee];return h.prototype[M].apply(x,$)}}function E(l){const h=l.length;if(0<h){const m=Array(h);for(let x=0;x<h;x++)m[x]=l[x];return m}return[]}function A(l,h){for(let m=1;m<arguments.length;m++){const x=arguments[m];if(c(x)){const M=l.length||0,j=x.length||0;l.length=M+j;for(let $=0;$<j;$++)l[M+$]=x[$]}else l.push(x)}}class _{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function k(l){return k[" "](l),l}k[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function V(l,h,m){for(const x in l)h.call(m,l[x],x,l)}function S(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function y(l){const h={};for(const m in l)h[m]=l[m];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,h){let m,x;for(let M=1;M<arguments.length;M++){x=arguments[M];for(m in x)l[m]=x[m];for(let j=0;j<I.length;j++)m=I[j],Object.prototype.hasOwnProperty.call(x,m)&&(l[m]=x[m])}}function N(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function O(l){a.setTimeout(()=>{throw l},0)}function b(){var l=H;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Z{constructor(){this.h=this.g=null}add(h,m){const x=ye.get();x.set(h,m),this.h?this.h.next=x:this.g=x,this.h=x}}var ye=new _(()=>new se,l=>l.reset());class se{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,F=!1,H=new Z,Q=()=>{const l=a.Promise.resolve(void 0);ne=()=>{l.then(ie)}};var ie=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){O(m)}var h=ye;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}F=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return l}();function vn(l,h){if(ke.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{k(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:_n[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&vn.aa.h.call(this)}}T(vn,ke);var _n={2:"touch",3:"pen",4:"mouse"};vn.prototype.h=function(){vn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),lc=0;function cc(l,h,m,x,M){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!x,this.ha=M,this.key=++lc,this.da=this.fa=!1}function Ls(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ms(l){this.src=l,this.g={},this.h=0}Ms.prototype.add=function(l,h,m,x,M){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var $=rr(l,h,x,M);return-1<$?(h=l[$],m||(h.fa=!1)):(h=new cc(h,this.src,j,!!x,M),h.fa=m,l.push(h)),h};function Ci(l,h){var m=h.type;if(m in l.g){var x=l.g[m],M=Array.prototype.indexOf.call(x,h,void 0),j;(j=0<=M)&&Array.prototype.splice.call(x,M,1),j&&(Ls(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function rr(l,h,m,x){for(var M=0;M<l.length;++M){var j=l[M];if(!j.da&&j.listener==h&&j.capture==!!m&&j.ha==x)return M}return-1}var Ai="closure_lm_"+(1e6*Math.random()|0),la={};function uc(l,h,m,x,M){if(Array.isArray(h)){for(var j=0;j<h.length;j++)uc(l,h[j],m,x,M);return null}return m=Py(m),l&&l[sn]?l.K(h,m,u(x)?!!x.capture:!!x,M):fh(l,h,m,!1,x,M)}function fh(l,h,m,x,M,j){if(!h)throw Error("Invalid event type");var $=u(M)?!!M.capture:!!M,Ee=gh(l);if(Ee||(l[Ai]=Ee=new Ms(l)),m=Ee.add(h,m,x,$,j),m.proxy)return m;if(x=ph(),m.proxy=x,x.src=l,x.listener=m,l.addEventListener)yn||(M=$),M===void 0&&(M=!1),l.addEventListener(h.toString(),x,M);else if(l.attachEvent)l.attachEvent(Ry(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ph(){function l(m){return h.call(l.src,l.listener,m)}const h=nA;return l}function Vs(l,h,m,x,M){if(Array.isArray(h))for(var j=0;j<h.length;j++)Vs(l,h[j],m,x,M);else x=u(x)?!!x.capture:!!x,m=Py(m),l&&l[sn]?(l=l.i,h=String(h).toString(),h in l.g&&(j=l.g[h],m=rr(j,m,x,M),-1<m&&(Ls(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete l.g[h],l.h--)))):l&&(l=gh(l))&&(h=l.g[h.toString()],l=-1,h&&(l=rr(h,m,x,M)),(m=-1<l?h[l]:null)&&mh(m))}function mh(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[sn])Ci(h.i,l);else{var m=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(m,x,l.capture):h.detachEvent?h.detachEvent(Ry(m),x):h.addListener&&h.removeListener&&h.removeListener(x),(m=gh(h))?(Ci(m,l),m.h==0&&(m.src=null,h[Ai]=null)):Ls(l)}}}function Ry(l){return l in la?la[l]:la[l]="on"+l}function nA(l,h){if(l.da)l=!0;else{h=new vn(h,this);var m=l.listener,x=l.ha||l.src;l.fa&&mh(l),l=m.call(x,h)}return l}function gh(l){return l=l[Ai],l instanceof Ms?l:null}var yh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Py(l){return typeof l=="function"?l:(l[yh]||(l[yh]=function(h){return l.handleEvent(h)}),l[yh])}function ct(){_e.call(this),this.i=new Ms(this),this.M=this,this.F=null}T(ct,_e),ct.prototype[sn]=!0,ct.prototype.removeEventListener=function(l,h,m,x){Vs(this,l,h,m,x)};function It(l,h){var m,x=l.F;if(x)for(m=[];x;x=x.F)m.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new ke(h,l);else if(h instanceof ke)h.target=h.target||l;else{var M=h;h=new ke(x,l),P(h,M)}if(M=!0,m)for(var j=m.length-1;0<=j;j--){var $=h.g=m[j];M=dc($,x,!0,h)&&M}if($=h.g=l,M=dc($,x,!0,h)&&M,M=dc($,x,!1,h)&&M,m)for(j=0;j<m.length;j++)$=h.g=m[j],M=dc($,x,!1,h)&&M}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],x=0;x<m.length;x++)Ls(m[x]);delete l.g[h],l.h--}}this.F=null},ct.prototype.K=function(l,h,m,x){return this.i.add(String(l),h,!1,m,x)},ct.prototype.L=function(l,h,m,x){return this.i.add(String(l),h,!0,m,x)};function dc(l,h,m,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,j=0;j<h.length;++j){var $=h[j];if($&&!$.da&&$.capture==m){var Ee=$.listener,tt=$.ha||$.src;$.fa&&Ci(l.i,$),M=Ee.call(tt,x)!==!1&&M}}return M&&!x.defaultPrevented}function by(l,h,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function ky(l){l.g=by(()=>{l.g=null,l.i&&(l.i=!1,ky(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class rA extends _e{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ky(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ca(l){_e.call(this),this.h=l,this.g={}}T(ca,_e);var Ny=[];function Oy(l){V(l.g,function(h,m){this.g.hasOwnProperty(m)&&mh(h)},l),l.g={}}ca.prototype.N=function(){ca.aa.N.call(this),Oy(this)},ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vh=a.JSON.stringify,sA=a.JSON.parse,iA=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function _h(){}_h.prototype.h=null;function Dy(l){return l.h||(l.h=l.i())}function Ly(){}var ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wh(){ke.call(this,"d")}T(wh,ke);function Eh(){ke.call(this,"c")}T(Eh,ke);var js={},My=null;function hc(){return My=My||new ct}js.La="serverreachability";function Vy(l){ke.call(this,js.La,l)}T(Vy,ke);function da(l){const h=hc();It(h,new Vy(h))}js.STAT_EVENT="statevent";function jy(l,h){ke.call(this,js.STAT_EVENT,l),this.stat=h}T(jy,ke);function St(l){const h=hc();It(h,new jy(h,l))}js.Ma="timingevent";function Fy(l,h){ke.call(this,js.Ma,l),this.size=h}T(Fy,ke);function ha(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function fa(){this.g=!0}fa.prototype.xa=function(){this.g=!1};function oA(l,h,m,x,M,j){l.info(function(){if(l.g)if(j)for(var $="",Ee=j.split("&"),tt=0;tt<Ee.length;tt++){var me=Ee[tt].split("=");if(1<me.length){var ut=me[0];me=me[1];var dt=ut.split("_");$=2<=dt.length&&dt[1]=="type"?$+(ut+"="+me+"&"):$+(ut+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+x+") [attempt "+M+"]: "+h+`
`+m+`
`+$})}function aA(l,h,m,x,M,j,$){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+M+"]: "+h+`
`+m+`
`+j+" "+$})}function Ri(l,h,m,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+cA(l,m)+(x?" "+x:"")})}function lA(l,h){l.info(function(){return"TIMEOUT: "+h})}fa.prototype.info=function(){};function cA(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var x=m[l];if(!(2>x.length)){var M=x[1];if(Array.isArray(M)&&!(1>M.length)){var j=M[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return vh(m)}catch{return h}}var fc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Uy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Th;function pc(){}T(pc,_h),pc.prototype.g=function(){return new XMLHttpRequest},pc.prototype.i=function(){return{}},Th=new pc;function Pr(l,h,m,x){this.j=l,this.i=h,this.l=m,this.R=x||1,this.U=new ca(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zy}function zy(){this.i=null,this.g="",this.h=!1}var By={},xh={};function Ih(l,h,m){l.L=1,l.v=vc(sr(h)),l.m=m,l.P=!0,$y(l,null)}function $y(l,h){l.F=Date.now(),mc(l),l.A=sr(l.v);var m=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),rv(m.i,"t",x),l.C=0,m=l.j.J,l.h=new zy,l.g=Ev(l.j,m?h:null,!l.m),0<l.O&&(l.M=new rA(p(l.Y,l,l.g),l.O)),h=l.U,m=l.g,x=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Ny[0]=M.toString()),M=Ny);for(var j=0;j<M.length;j++){var $=uc(m,M[j],x||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),da(),oA(l.i,l.u,l.A,l.l,l.R,l.m)}Pr.prototype.ca=function(l){l=l.target;const h=this.M;h&&ir(l)==3?h.j():this.Y(l)},Pr.prototype.Y=function(l){try{if(l==this.g)e:{const dt=ir(this.g);var h=this.g.Ba();const ki=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||uv(this.g)))){this.J||dt!=4||h==7||(h==8||0>=ki?da(3):da(2)),Sh(this);var m=this.g.Z();this.X=m;t:if(Hy(this)){var x=uv(this.g);l="";var M=x.length,j=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fs(this),pa(this);var $="";break t}this.h.i=new a.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(x[h],{stream:!(j&&h==M-1)});x.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=m==200,aA(this.i,this.u,this.A,this.l,this.R,dt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,tt=this.g;if((Ee=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ee)){var me=Ee;break t}}me=null}if(m=me)Ri(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ch(this,m);else{this.o=!1,this.s=3,St(12),Fs(this),pa(this);break e}}if(this.P){m=!0;let wn;for(;!this.J&&this.C<$.length;)if(wn=uA(this,$),wn==xh){dt==4&&(this.s=4,St(14),m=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==By){this.s=4,St(15),Ri(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else Ri(this.i,this.l,wn,null),Ch(this,wn);if(Hy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||$.length!=0||this.h.h||(this.s=1,St(16),m=!1),this.o=this.o&&m,!m)Ri(this.i,this.l,$,"[Invalid Chunked Response]"),Fs(this),pa(this);else if(0<$.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Nh(ut),ut.M=!0,St(11))}}else Ri(this.i,this.l,$,null),Ch(this,$);dt==4&&Fs(this),this.o&&!this.J&&(dt==4?yv(this.j,this):(this.o=!1,mc(this)))}else AA(this.g),m==400&&0<$.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Fs(this),pa(this)}}}catch{}finally{}};function Hy(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function uA(l,h){var m=l.C,x=h.indexOf(`
`,m);return x==-1?xh:(m=Number(h.substring(m,x)),isNaN(m)?By:(x+=1,x+m>h.length?xh:(h=h.slice(x,x+m),l.C=x+m,h)))}Pr.prototype.cancel=function(){this.J=!0,Fs(this)};function mc(l){l.S=Date.now()+l.I,qy(l,l.I)}function qy(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ha(p(l.ba,l),h)}function Sh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Pr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(lA(this.i,this.A),this.L!=2&&(da(),St(17)),Fs(this),this.s=2,pa(this)):qy(this,this.S-l)};function pa(l){l.j.G==0||l.J||yv(l.j,l)}function Fs(l){Sh(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Oy(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Ch(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Ah(m.h,l))){if(!l.K&&Ah(m.h,l)&&m.G==3){try{var x=m.Da.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var M=x;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Ic(m),Tc(m);else break e;kh(m),St(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=ha(p(m.Za,m),6e3));if(1>=Gy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else zs(m,11)}else if((l.K||m.g==l)&&Ic(m),!w(h))for(M=m.Da.g.parse(h),h=0;h<M.length;h++){let me=M[h];if(m.T=me[0],me=me[1],m.G==2)if(me[0]=="c"){m.K=me[1],m.ia=me[2];const ut=me[3];ut!=null&&(m.la=ut,m.j.info("VER="+m.la));const dt=me[4];dt!=null&&(m.Aa=dt,m.j.info("SVER="+m.Aa));const ki=me[5];ki!=null&&typeof ki=="number"&&0<ki&&(x=1.5*ki,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const wn=l.g;if(wn){const Cc=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cc){var j=x.h;j.g||Cc.indexOf("spdy")==-1&&Cc.indexOf("quic")==-1&&Cc.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Rh(j,j.h),j.h=null))}if(x.D){const Oh=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Oh&&(x.ya=Oh,Ie(x.I,x.D,Oh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var $=l;if(x.qa=wv(x,x.J?x.ia:null,x.W),$.K){Qy(x.h,$);var Ee=$,tt=x.L;tt&&(Ee.I=tt),Ee.B&&(Sh(Ee),mc(Ee)),x.g=$}else mv(x);0<m.i.length&&xc(m)}else me[0]!="stop"&&me[0]!="close"||zs(m,7);else m.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?zs(m,7):bh(m):me[0]!="noop"&&m.l&&m.l.ta(me),m.v=0)}}da(4)}catch{}}var dA=class{constructor(l,h){this.g=l,this.map=h}};function Wy(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ky(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Gy(l){return l.h?1:l.g?l.g.size:0}function Ah(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Rh(l,h){l.g?l.g.add(h):l.h=h}function Qy(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Wy.prototype.cancel=function(){if(this.i=Yy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Yy(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return E(l.i)}function hA(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],m=l.length,x=0;x<m;x++)h.push(l[x]);return h}h=[],m=0;for(x in l)h[m++]=l[x];return h}function fA(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const x in l)h[m++]=x;return h}}}function Xy(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=fA(l),x=hA(l),M=x.length,j=0;j<M;j++)h.call(void 0,x[j],m&&m[j],l)}var Jy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pA(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var x=l[m].indexOf("="),M=null;if(0<=x){var j=l[m].substring(0,x);M=l[m].substring(x+1)}else j=l[m];h(j,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Us(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Us){this.h=l.h,gc(this,l.j),this.o=l.o,this.g=l.g,yc(this,l.s),this.l=l.l;var h=l.i,m=new ya;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Zy(this,m),this.m=l.m}else l&&(h=String(l).match(Jy))?(this.h=!1,gc(this,h[1]||"",!0),this.o=ma(h[2]||""),this.g=ma(h[3]||"",!0),yc(this,h[4]),this.l=ma(h[5]||"",!0),Zy(this,h[6]||"",!0),this.m=ma(h[7]||"")):(this.h=!1,this.i=new ya(null,this.h))}Us.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ga(h,ev,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ga(h,ev,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(ga(m,m.charAt(0)=="/"?yA:gA,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",ga(m,_A)),l.join("")};function sr(l){return new Us(l)}function gc(l,h,m){l.j=m?ma(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function yc(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Zy(l,h,m){h instanceof ya?(l.i=h,wA(l.i,l.h)):(m||(h=ga(h,vA)),l.i=new ya(h,l.h))}function Ie(l,h,m){l.i.set(h,m)}function vc(l){return Ie(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ma(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ga(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,mA),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function mA(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ev=/[#\/\?@]/g,gA=/[#\?:]/g,yA=/[#\?]/g,vA=/[#\?@]/g,_A=/#/g;function ya(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function br(l){l.g||(l.g=new Map,l.h=0,l.i&&pA(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=ya.prototype,t.add=function(l,h){br(this),this.i=null,l=Pi(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function tv(l,h){br(l),h=Pi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function nv(l,h){return br(l),h=Pi(l,h),l.g.has(h)}t.forEach=function(l,h){br(this),this.g.forEach(function(m,x){m.forEach(function(M){l.call(h,M,x,this)},this)},this)},t.na=function(){br(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let x=0;x<h.length;x++){const M=l[x];for(let j=0;j<M.length;j++)m.push(h[x])}return m},t.V=function(l){br(this);let h=[];if(typeof l=="string")nv(this,l)&&(h=h.concat(this.g.get(Pi(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return br(this),this.i=null,l=Pi(this,l),nv(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function rv(l,h,m){tv(l,h),0<m.length&&(l.i=null,l.g.set(Pi(l,h),E(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var x=h[m];const j=encodeURIComponent(String(x)),$=this.V(x);for(x=0;x<$.length;x++){var M=j;$[x]!==""&&(M+="="+encodeURIComponent(String($[x]))),l.push(M)}}return this.i=l.join("&")};function Pi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function wA(l,h){h&&!l.j&&(br(l),l.i=null,l.g.forEach(function(m,x){var M=x.toLowerCase();x!=M&&(tv(this,x),rv(this,M,m))},l)),l.j=h}function EA(l,h){const m=new fa;if(a.Image){const x=new Image;x.onload=v(kr,m,"TestLoadImage: loaded",!0,h,x),x.onerror=v(kr,m,"TestLoadImage: error",!1,h,x),x.onabort=v(kr,m,"TestLoadImage: abort",!1,h,x),x.ontimeout=v(kr,m,"TestLoadImage: timeout",!1,h,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function TA(l,h){const m=new fa,x=new AbortController,M=setTimeout(()=>{x.abort(),kr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(j=>{clearTimeout(M),j.ok?kr(m,"TestPingServer: ok",!0,h):kr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),kr(m,"TestPingServer: error",!1,h)})}function kr(l,h,m,x,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),x(m)}catch{}}function xA(){this.g=new iA}function IA(l,h,m){const x=m||"";try{Xy(l,function(M,j){let $=M;u(M)&&($=vh(M)),h.push(x+j+"="+encodeURIComponent($))})}catch(M){throw h.push(x+"type="+encodeURIComponent("_badmap")),M}}function _c(l){this.l=l.Ub||null,this.j=l.eb||!1}T(_c,_h),_c.prototype.g=function(){return new wc(this.l,this.j)},_c.prototype.i=function(l){return function(){return l}}({});function wc(l,h){ct.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(wc,ct),t=wc.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,_a(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,va(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sv(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function sv(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?va(this):_a(this),this.readyState==3&&sv(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,va(this))},t.Qa=function(l){this.g&&(this.response=l,va(this))},t.ga=function(){this.g&&va(this)};function va(l){l.readyState=4,l.l=null,l.j=null,l.v=null,_a(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function _a(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function iv(l){let h="";return V(l,function(m,x){h+=x,h+=":",h+=m,h+=`\r
`}),h}function Ph(l,h,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=iv(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Ie(l,h,m))}function Me(l){ct.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Me,ct);var SA=/^https?$/i,CA=["POST","PUT"];t=Me.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Th.g(),this.v=this.o?Dy(this.o):Dy(Th),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(j){ov(this,j);return}if(l=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var M in x)m.set(M,x[M]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const j of x.keys())m.set(j,x.get(j));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CA,h,void 0))||x||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of m)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cv(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){ov(this,j)}};function ov(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,av(l),Ec(l)}function av(l){l.A||(l.A=!0,It(l,"complete"),It(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,It(this,"complete"),It(this,"abort"),Ec(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ec(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lv(this):this.bb())},t.bb=function(){lv(this)};function lv(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ir(l)!=4||l.Z()!=2)){if(l.u&&ir(l)==4)by(l.Ea,0,l);else if(It(l,"readystatechange"),ir(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var x;if(x=$===0){var M=String(l.D).match(Jy)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),x=!SA.test(M?M.toLowerCase():"")}m=x}if(m)It(l,"complete"),It(l,"success");else{l.m=6;try{var j=2<ir(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",av(l)}}finally{Ec(l)}}}}function Ec(l,h){if(l.g){cv(l);const m=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||It(l,"ready");try{m.onreadystatechange=x}catch{}}}function cv(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ir(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),sA(h)}};function uv(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function AA(l){const h={};l=(l.g&&2<=ir(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(w(l[x]))continue;var m=N(l[x]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const j=h[M]||[];h[M]=j,j.push(m)}S(h,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function dv(l){this.Aa=0,this.i=[],this.j=new fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,l),this.cb=wa("retryDelaySeedMs",1e4,l),this.Wa=wa("forwardChannelMaxRetries",2,l),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Wy(l&&l.concurrentRequestLimit),this.Da=new xA,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dv.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,x){St(0),this.W=l,this.H=h||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=wv(this,null,this.W),xc(this)};function bh(l){if(hv(l),l.G==3){var h=l.U++,m=sr(l.I);if(Ie(m,"SID",l.K),Ie(m,"RID",h),Ie(m,"TYPE","terminate"),Ea(l,m),h=new Pr(l,l.j,h),h.L=2,h.v=vc(sr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=Ev(h.j,null),h.g.ea(h.v)),h.F=Date.now(),mc(h)}_v(l)}function Tc(l){l.g&&(Nh(l),l.g.cancel(),l.g=null)}function hv(l){Tc(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ic(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function xc(l){if(!Ky(l.h)&&!l.s){l.s=!0;var h=l.Ga;ne||Q(),F||(ne(),F=!0),H.add(h,l),l.B=0}}function RA(l,h){return Gy(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ha(p(l.Ga,l,h),vv(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Pr(this,this.j,l);let j=this.o;if(this.S&&(j?(j=y(j),P(j,this.S)):j=this.S),this.m!==null||this.O||(M.H=j,j=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=pv(this,M,h),m=sr(this.I),Ie(m,"RID",l),Ie(m,"CVER",22),this.D&&Ie(m,"X-HTTP-Session-Id",this.D),Ea(this,m),j&&(this.O?h="headers="+encodeURIComponent(String(iv(j)))+"&"+h:this.m&&Ph(m,this.m,j)),Rh(this.h,M),this.Ua&&Ie(m,"TYPE","init"),this.P?(Ie(m,"$req",h),Ie(m,"SID","null"),M.T=!0,Ih(M,m,null)):Ih(M,m,h),this.G=2}}else this.G==3&&(l?fv(this,l):this.i.length==0||Ky(this.h)||fv(this))};function fv(l,h){var m;h?m=h.l:m=l.U++;const x=sr(l.I);Ie(x,"SID",l.K),Ie(x,"RID",m),Ie(x,"AID",l.T),Ea(l,x),l.m&&l.o&&Ph(x,l.m,l.o),m=new Pr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=pv(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Rh(l.h,m),Ih(m,x,h)}function Ea(l,h){l.H&&V(l.H,function(m,x){Ie(h,x,m)}),l.l&&Xy({},function(m,x){Ie(h,x,m)})}function pv(l,h,m){m=Math.min(l.i.length,m);var x=l.l?p(l.l.Na,l.l,l):null;e:{var M=l.i;let j=-1;for(;;){const $=["count="+m];j==-1?0<m?(j=M[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let Ee=!0;for(let tt=0;tt<m;tt++){let me=M[tt].g;const ut=M[tt].map;if(me-=j,0>me)j=Math.max(0,M[tt].g-100),Ee=!1;else try{IA(ut,$,"req"+me+"_")}catch{x&&x(ut)}}if(Ee){x=$.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,x}function mv(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ne||Q(),F||(ne(),F=!0),H.add(h,l),l.v=0}}function kh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ha(p(l.Fa,l),vv(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,gv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ha(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Tc(this),gv(this))};function Nh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function gv(l){l.g=new Pr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=sr(l.qa);Ie(h,"RID","rpc"),Ie(h,"SID",l.K),Ie(h,"AID",l.T),Ie(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ie(h,"TO",l.ja),Ie(h,"TYPE","xmlhttp"),Ea(l,h),l.m&&l.o&&Ph(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=vc(sr(h)),m.m=null,m.P=!0,$y(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Tc(this),kh(this),St(19))};function Ic(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function yv(l,h){var m=null;if(l.g==h){Ic(l),Nh(l),l.g=null;var x=2}else if(Ah(l.h,h))m=h.D,Qy(l.h,h),x=1;else return;if(l.G!=0){if(h.o)if(x==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;x=hc(),It(x,new Fy(x,m)),xc(l)}else mv(l);else if(M=h.s,M==3||M==0&&0<h.X||!(x==1&&RA(l,h)||x==2&&kh(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),M){case 1:zs(l,5);break;case 4:zs(l,10);break;case 3:zs(l,6);break;default:zs(l,2)}}}function vv(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function zs(l,h){if(l.j.info("Error code "+h),h==2){var m=p(l.fb,l),x=l.Xa;const M=!x;x=new Us(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gc(x,"https"),vc(x),M?EA(x.toString(),m):TA(x.toString(),m)}else St(2);l.G=0,l.l&&l.l.sa(h),_v(l),hv(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function _v(l){if(l.G=0,l.ka=[],l.l){const h=Yy(l.h);(h.length!=0||l.i.length!=0)&&(A(l.ka,h),A(l.ka,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.ra()}}function wv(l,h,m){var x=m instanceof Us?sr(m):new Us(m);if(x.g!="")h&&(x.g=h+"."+x.g),yc(x,x.s);else{var M=a.location;x=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var j=new Us(null);x&&gc(j,x),h&&(j.g=h),M&&yc(j,M),m&&(j.l=m),x=j}return m=l.D,h=l.ya,m&&h&&Ie(x,m,h),Ie(x,"VER",l.la),Ea(l,x),x}function Ev(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Me(new _c({eb:m})):new Me(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tv(){}t=Tv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sc(){}Sc.prototype.g=function(l,h){return new Wt(l,h)};function Wt(l,h){ct.call(this),this.g=new dv(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new bi(this)}T(Wt,ct),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){bh(this.g)},Wt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=vh(l),l=m);h.i.push(new dA(h.Ya++,l)),h.G==3&&xc(h)},Wt.prototype.N=function(){this.g.l=null,delete this.j,bh(this.g),delete this.g,Wt.aa.N.call(this)};function xv(l){wh.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}T(xv,wh);function Iv(){Eh.call(this),this.status=1}T(Iv,Eh);function bi(l){this.g=l}T(bi,Tv),bi.prototype.ua=function(){It(this.g,"a")},bi.prototype.ta=function(l){It(this.g,new xv(l))},bi.prototype.sa=function(l){It(this.g,new Iv)},bi.prototype.ra=function(){It(this.g,"b")},Sc.prototype.createWebChannel=Sc.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,BI=function(){return new Sc},zI=function(){return hc()},UI=js,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fc.NO_ERROR=0,fc.TIMEOUT=8,fc.HTTP_ERROR=6,Eu=fc,Uy.COMPLETE="complete",FI=Uy,Ly.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Ua=Ly,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,jI=Me}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const B_="@firebase/firestore",$_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Mg("@firebase/firestore");function Di(){return vi.logLevel}function q(t,...e){if(vi.logLevel<=le.DEBUG){const n=e.map(Gg);vi.debug(`Firestore (${na}): ${t}`,...n)}}function Ir(t,...e){if(vi.logLevel<=le.ERROR){const n=e.map(Gg);vi.error(`Firestore (${na}): ${t}`,...n)}}function xs(t,...e){if(vi.logLevel<=le.WARN){const n=e.map(Gg);vi.warn(`Firestore (${na}): ${t}`,...n)}}function Gg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$I(t,r,n)}function $I(t,e,n){let r=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ir(r),new Error(r)}function De(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$I(e,s,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class gM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yM{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ii,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ii)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string",31837,{l:r}),new HI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class vM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _M{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new vM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new H_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new H_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=EM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Gp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return oe(r,s);{const i=qI(),o=TM(i.encode(q_(t,n)),i.encode(q_(e,n)));return o!==0?o:oe(r,s)}}n+=r>65535?2:1}return oe(t.length,e.length)}function q_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function TM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function Uo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="__name__";class Vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Vn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=Vn.isNumericId(e),s=Vn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):Gp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ms.fromString(e.substring(4,e.length-2))}}class Pe extends Vn{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const xM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Vn{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return xM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W_}static keyField(){return new _t([W_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Pe.fromString(e))}static fromName(e){return new Y(Pe.fromString(e).popFirst(5))}static empty(){return new Y(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Pe(e.slice()))}}function IM(t,e,n,r){if(e===!0&&r===!0)throw new K(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function K_(t){if(Y.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Qp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(t);throw new K(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t,e){const n={typeString:t};return e&&(n.value=e),n}function tc(t,e){if(!KI(t))throw new K(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=-62135596800,Q_=1e6;class be{static now(){return be.fromMillis(Date.now())}static fromDate(e){return be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Q_);return new be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<G_)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q_}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tc(e,be._jsonSchema))return new be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-G_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}be._jsonSchemaVersion="firestore/timestamp/1.0",be._jsonSchema={type:qe("string",be._jsonSchemaVersion),seconds:qe("number"),nanoseconds:qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new be(0,0))}static max(){return new ee(new be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function SM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new Is(s,Y.empty(),e)}function CM(t){return new Is(t.readTime,t.key,kl)}class Is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Is(ee.min(),Y.empty(),kl)}static max(){return new Is(ee.max(),Y.empty(),kl)}}function AM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==RM)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function bM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ra(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Zd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=-1;function eh(t){return t==null}function fd(t){return t===0&&1/t==-1/0}function NM(t){return typeof t=="number"&&Number.isInteger(t)&&!fd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="";function OM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Y_(e)),e=DM(t.get(n),e);return Y_(e)}function DM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case GI:n+="";break;default:n+=i}}return n}function Y_(t){return t+GI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J_(this.data.getIterator())}getIteratorFrom(e){return new J_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class J_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new ns([])}unionWith(e){let n=new Qe(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ns(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new YI("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const LM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=LM.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="server_timestamp",JI="__type__",ZI="__previous_value__",eS="__local_write_time__";function Qg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[JI])===null||n===void 0?void 0:n.stringValue)===XI}function th(t){const e=t.mapValue.fields[ZI];return Qg(e)?th(e):e}function Nl(t){const e=Ss(t.mapValue.fields[eS].timestampValue);return new be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,s,i,o,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const pd="(default)";class Ol{constructor(e,n){this.projectId=e,this.database=n||pd}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="__type__",nS="__max__",Xc={mapValue:{fields:{__type__:{stringValue:nS}}}},rS="__vector__",md="value";function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qg(t)?4:jM(t)?9007199254740991:VM(t)?10:11:te(28295,{value:t})}function er(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nl(t).isEqual(Nl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ss(s.timestampValue),a=Ss(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Cs(s.bytesValue).isEqual(Cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),a=Fe(i.doubleValue);return o===a?fd(o)===fd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(X_(o)!==X_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!er(o[c],a[c])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Dl(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function zo(t,e){if(t===e)return 0;const n=As(t),r=As(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Z_(t.timestampValue,e.timestampValue);case 4:return Z_(Nl(t),Nl(e));case 5:return Gp(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cs(i),c=Cs(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=oe(a[u],c[u]);if(d!==0)return d}return oe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=oe(Fe(i.latitude),Fe(o.latitude));return a!==0?a:oe(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ew(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,d;const f=i.fields||{},p=o.fields||{},v=(a=f[md])===null||a===void 0?void 0:a.arrayValue,T=(c=p[md])===null||c===void 0?void 0:c.arrayValue,E=oe(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:ew(v,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Xc.mapValue&&o===Xc.mapValue)return 0;if(i===Xc.mapValue)return 1;if(o===Xc.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const p=Gp(c[f],d[f]);if(p!==0)return p;const v=zo(a[c[f]],u[d[f]]);if(v!==0)return v}return oe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw te(23264,{le:n})}}function Z_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=Ss(t),r=Ss(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function ew(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=zo(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Bo(t){return Yp(t)}function Yp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Yp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Yp(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function Tu(t){switch(As(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=th(t);return e?16+Tu(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Tu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return sa(r.fields,(i,o)=>{s+=i.length+Tu(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function tw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xp(t){return!!t&&"integerValue"in t}function Yg(t){return!!t&&"arrayValue"in t}function nw(t){return!!t&&"nullValue"in t}function rw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wf(t){return!!t&&"mapValue"in t}function VM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[tS])===null||n===void 0?void 0:n.stringValue)===rS}function tl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(n)}setAll(e){let n=_t.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=tl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){sa(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new $n(tl(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vt(e,0,ee.min(),ee.min(),ee.min(),$n.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,ee.min(),ee.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,ee.min(),ee.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.position=e,this.inclusive=n}}function sw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=zo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n="asc"){this.field=e,this.dir=n}}function FM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{}class He extends sS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zM(e,n,r):n==="array-contains"?new HM(e,r):n==="in"?new qM(e,r):n==="not-in"?new WM(e,r):n==="array-contains-any"?new KM(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BM(e,r):new $M(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends sS{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Dn(e,n)}matches(e){return iS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function iS(t){return t.op==="and"}function oS(t){return UM(t)&&iS(t)}function UM(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function Jp(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Bo(t.value);if(oS(t))return t.filters.map(e=>Jp(e)).join(",");{const e=t.filters.map(n=>Jp(n)).join(",");return`${t.op}(${e})`}}function aS(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&er(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&aS(o,s.filters[a]),!0):!1}(t,e):void te(19439)}function lS(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(lS).join(" ,")+"}"}(t):"Filter"}class zM extends He{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class BM extends He{constructor(e,n){super(e,"in",n),this.keys=cS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $M extends He{constructor(e,n){super(e,"not-in",n),this.keys=cS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class HM extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yg(n)&&Dl(n.arrayValue,this.value)}}class qM extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}}class WM extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dl(this.value.arrayValue,n)}}class KM extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function ow(t,e=null,n=[],r=[],s=null,i=null,o=null){return new GM(t,e,n,r,s,i,o)}function Xg(t){const e=he(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bo(r)).join(",")),e.Pe=n}return e.Pe}function Jg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iw(t.startAt,e.startAt)&&iw(t.endAt,e.endAt)}function Zp(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function QM(t,e,n,r,s,i,o,a){return new ia(t,e,n,r,s,i,o,a)}function uS(t){return new ia(t)}function aw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dS(t){return t.collectionGroup!==null}function nl(t){const e=he(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(_t.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Ll(i,r))}),n.has(_t.keyField().canonicalString())||e.Te.push(new Ll(_t.keyField(),r))}return e.Te}function Yn(t){const e=he(t);return e.Ie||(e.Ie=YM(e,nl(t))),e.Ie}function YM(t,e){if(t.limitType==="F")return ow(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ll(s.field,i)});const n=t.endAt?new gd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gd(t.startAt.position,t.startAt.inclusive):null;return ow(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function em(t,e){const n=t.filters.concat([e]);return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tm(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nh(t,e){return Jg(Yn(t),Yn(e))&&t.limitType===e.limitType}function hS(t){return`${Xg(Yn(t))}|lt:${t.limitType}`}function Li(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>lS(s)).join(", ")}]`),eh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Bo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Bo(s)).join(",")),`Target(${r})`}(Yn(t))}; limitType=${t.limitType})`}function rh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of nl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=sw(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,nl(r),s)||r.endAt&&!function(o,a,c){const u=sw(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,nl(r),s))}(t,e)}function XM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fS(t){return(e,n)=>{let r=!1;for(const s of nl(t)){const i=JM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function JM(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?zo(c,u):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return QI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=new ze(Y.comparator);function Rs(){return ZM}const pS=new ze(Y.comparator);function za(...t){let e=pS;for(const n of t)e=e.insert(n.key,n);return e}function eV(t){let e=pS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return rl()}function mS(){return rl()}function rl(){return new Ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const tV=new Qe(Y.comparator);function fe(...t){let e=tV;for(const n of t)e=e.add(n);return e}const nV=new Qe(oe);function rV(){return nV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fd(e)?"-0":e}}function gS(t){return{integerValue:""+t}}function sV(t,e){return NM(e)?gS(e):Zg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this._=void 0}}function iV(t,e,n){return t instanceof nm?function(s,i){const o={fields:{[JI]:{stringValue:XI},[eS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Qg(i)&&(i=th(i)),i&&(o.fields[ZI]=i),{mapValue:o}}(n,e):t instanceof yd?yS(t,e):t instanceof vd?vS(t,e):function(s,i){const o=aV(s,i),a=lw(o)+lw(s.Ee);return Xp(o)&&Xp(s.Ee)?gS(a):Zg(s.serializer,a)}(t,e)}function oV(t,e,n){return t instanceof yd?yS(t,e):t instanceof vd?vS(t,e):n}function aV(t,e){return t instanceof rm?function(r){return Xp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nm extends sh{}class yd extends sh{constructor(e){super(),this.elements=e}}function yS(t,e){const n=_S(e);for(const r of t.elements)n.some(s=>er(s,r))||n.push(r);return{arrayValue:{values:n}}}class vd extends sh{constructor(e){super(),this.elements=e}}function vS(t,e){let n=_S(e);for(const r of t.elements)n=n.filter(s=>!er(s,r));return{arrayValue:{values:n}}}class rm extends sh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lw(t){return Fe(t.integerValue||t.doubleValue)}function _S(t){return Yg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function lV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof yd&&s instanceof yd||r instanceof vd&&s instanceof vd?Uo(r.elements,s.elements,er):r instanceof rm&&s instanceof rm?er(r.Ee,s.Ee):r instanceof nm&&s instanceof nm}(t.transform,e.transform)}class oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ey{}function wS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new uV(t.key,oi.none()):new ty(t.key,t.data,oi.none());{const n=t.data,r=$n.empty();let s=new Qe(_t.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ih(t.key,r,new ns(s.toArray()),oi.none())}}function cV(t,e,n){t instanceof ty?function(s,i,o){const a=s.value.clone(),c=uw(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ih?function(s,i,o){if(!xu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=uw(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ES(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function sl(t,e,n,r){return t instanceof ty?function(i,o,a,c){if(!xu(i.precondition,o))return a;const u=i.value.clone(),d=dw(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ih?function(i,o,a,c){if(!xu(i.precondition,o))return a;const u=dw(i.fieldTransforms,c,o),d=o.data;return d.setAll(ES(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return xu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function cw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Uo(r,s,(i,o)=>lV(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ty extends ey{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ih extends ey{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ES(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function uw(t,e,n){const r=new Map;De(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,oV(o,a,n[s]))}return r}function dw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,iV(i,o,e))}return r}class uV extends ey{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mS();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=wS(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,r)=>cw(n,r))&&Uo(this.baseMutations,e.baseMutations,(n,r)=>cw(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,de;function TS(t){if(t===void 0)return Ir("GRPC error has no .code"),B.UNKNOWN;switch(t){case Be.OK:return B.OK;case Be.CANCELLED:return B.CANCELLED;case Be.UNKNOWN:return B.UNKNOWN;case Be.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Be.INTERNAL:return B.INTERNAL;case Be.UNAVAILABLE:return B.UNAVAILABLE;case Be.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Be.NOT_FOUND:return B.NOT_FOUND;case Be.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Be.ABORTED:return B.ABORTED;case Be.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Be.DATA_LOSS:return B.DATA_LOSS;default:return te(39323,{code:t})}}(de=Be||(Be={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new ms([4294967295,4294967295],0);function hw(t){const e=qI().encode(t),n=new VI;return n.update(e),new Uint8Array(n.digest())}function fw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ms([n,r],0),new ms([s,i],0)]}class ny{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ba(`Invalid padding: ${n}`);if(r<0)throw new Ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ms.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(ms.fromNumber(r)));return s.compare(pV)===1&&(s=new ms([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=hw(e),[r,s]=fw(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ny(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=hw(e),[r,s]=fw(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new oh(ee.min(),s,new ze(oe),Rs(),fe())}}class nc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nc(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class xS{constructor(e,n){this.targetId=e,this.De=n}}class IS{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class pw{constructor(){this.ve=0,this.Ce=mw(),this.Fe=lt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),n=fe(),r=fe();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new nc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=mw()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class mV{constructor(e){this.We=e,this.Ge=new Map,this.ze=Rs(),this.je=Jc(),this.Je=Jc(),this.He=new ze(oe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Zp(i))if(r===0){const o=new Y(i.path);this.Xe(n,o,vt.newNoDocument(o,ee.min()))}else De(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Cs(r).toUint8Array()}catch(c){if(c instanceof YI)return xs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ny(o,s,i)}catch(c){return xs(c instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&Zp(a.target)){const c=new Y(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,vt.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=fe();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new oh(e,n,this.He,this.ze,r);return this.ze=Rs(),this.je=Jc(),this.Je=Jc(),this.He=new ze(oe),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new pw,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Qe(oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Qe(oe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new pw),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Jc(){return new ze(Y.comparator)}function mw(){return new ze(Y.comparator)}const gV={asc:"ASCENDING",desc:"DESCENDING"},yV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vV={and:"AND",or:"OR"};class _V{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sm(t,e){return t.useProto3Json||eh(e)?e:{value:e}}function im(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function co(t){return De(!!t,49232),ee.fromTimestamp(function(n){const r=Ss(n);return new be(r.seconds,r.nanos)}(t))}function CS(t,e){return om(t,e).canonicalString()}function om(t,e){const n=function(s){return new Pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AS(t){const e=Pe.fromString(t);return De(NS(e),10190,{key:e.toString()}),e}function Ef(t,e){const n=AS(e);if(n.get(1)!==t.databaseId.projectId)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(PS(n))}function RS(t,e){return CS(t.databaseId,e)}function wV(t){const e=AS(t);return e.length===4?Pe.emptyPath():PS(e)}function gw(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PS(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function EV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(De(d===void 0||typeof d=="string",58123),lt.fromBase64String(d||"")):(De(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?B.UNKNOWN:TS(u.code);return new K(d,u.message||"")}(o);n=new IS(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ef(t,r.document.name),i=co(r.document.updateTime),o=r.document.createTime?co(r.document.createTime):ee.min(),a=new $n({mapValue:{fields:r.document.fields}}),c=vt.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Iu(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ef(t,r.document),i=r.readTime?co(r.readTime):ee.min(),o=vt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Iu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ef(t,r.document),i=r.removedTargetIds||[];n=new Iu([],i,s,null)}else{if(!("filter"in e))return te(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new fV(s,i),a=r.targetId;n=new xS(a,o)}}return n}function TV(t,e){return{documents:[RS(t,e.path)]}}function xV(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=RS(t,s);const i=function(u){if(u.length!==0)return kS(Dn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Mi(p.field),direction:CV(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:s}}function IV(t){let e=wV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=bS(f);return p instanceof Dn&&oS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(T){return new Ll(Vi(T.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,eh(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,v=f.values||[];return new gd(v,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,v=f.values||[];return new gd(v,p)}(n.endAt)),QM(e,s,o,i,a,"F",c,u)}function SV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vi(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vi(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vi(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vi(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(Vi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>bS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function CV(t){return gV[t]}function AV(t){return yV[t]}function RV(t){return vV[t]}function Mi(t){return{fieldPath:t.canonicalString()}}function Vi(t){return _t.fromServerFormat(t.fieldPath)}function kS(t){return t instanceof He?function(n){if(n.op==="=="){if(rw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NAN"}};if(nw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NAN"}};if(nw(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mi(n.field),op:AV(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>kS(s));return r.length===1?r[0]:{compositeFilter:{op:RV(n.op),filters:r}}}(t):te(54877,{filter:t})}function NS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.gt=e}}function bV(t){const e=IV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.Dn=new NV}addToCollectionParentIndex(e,n){return this.Dn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Is.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class NV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(Pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OS=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(OS,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new $o(0)}static ur(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="LruGarbageCollector",OV=1048576;function _w([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class DV{constructor(e){this.Tr=e,this.buffer=new Qe(_w),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_w(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){q(vw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ra(n)?q(vw,"Ignoring IndexedDB error during garbage collection: ",n):await Jd(n)}await this.Rr(3e5)})}}class MV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Zd.ue);const r=new DV(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(yw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yw):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Di()<=le.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function VV(t,e){return new MV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.changes=new Ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&sl(r.mutation,s,ns.empty(),be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=Gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=za();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Rs();const o=rl(),a=function(){return rl()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof ih)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),sl(d.mutation,u,d.mutation.getFieldMask(),be.now())):o.set(u.key,ns.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new FV(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=rl();let s=new ze((o,a)=>o-a),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||ns.empty();d=a.applyToLocalView(u,d),r.set(c,d);const f=(s.get(a.batchId)||fe()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,f=mS();d.forEach(p=>{if(!i.has(p)){const v=wS(n.get(p),r.get(p));v!==null&&f.set(p,v),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Gs());let a=kl,c=i;return o.next(u=>U.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,fe())).next(d=>({batchId:a,changes:eV(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=za();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=za();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,c=>{const u=function(f,p){return new ia(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,vt.newInvalidDocument(d)))});let a=za();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&sl(d.mutation,u,ns.empty(),be.now()),rh(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:co(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:bV(s.bundledQuery),readTime:co(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.overlays=new ze(Y.comparator),this.kr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Gs(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Gs(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Gs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return U.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hV(n,r));let i=this.kr.get(n);i===void 0&&(i=fe(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.qr=new Qe(Ye.Qr),this.$r=new Qe(Ye.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ye(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Y(new Pe([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Y(new Pe([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=fe();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Y.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Qe(Ye.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dV(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new Ye(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?kM:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(oe);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new Y(i),0);let a=new Qe(oe);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Hr)),!0)},o),U.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Ye(n,0),s=this.Yr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.ni=e,this.docs=function(){return new ze(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=Rs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rs();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||AM(CM(d),r)<=0||(s.has(d.key)||rh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ri(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new WV(this)}getSize(e){return U.resolve(this.size)}}class WV extends jV{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.persistence=e,this.ii=new Ii(n=>Xg(n),Jg),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new ry,this.targetCount=0,this._i=$o.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),U.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.hr(n),U.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.ai={},this.overlays={},this.ui=new Zd(0),this.ci=!1,this.ci=!0,this.li=new $V,this.referenceDelegate=e(this),this.hi=new KV(this),this.indexManager=new kV,this.remoteDocumentCache=function(s){return new qV(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new PV(n),this.Ti=new zV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new HV(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new GV(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class GV extends PM{constructor(e){super(),this.currentSequenceNumber=e}}class sy{constructor(e){this.persistence=e,this.Ai=new ry,this.Ri=null}static Vi(e){return new sy(e)}get mi(){if(this.Ri)return this.Ri;throw te(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{const s=Y.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class _d{constructor(e,n){this.persistence=e,this.gi=new Ii(r=>OM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=VV(this,n)}static Vi(e,n){return new _d(e,n)}Ii(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return U.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tu(e.data.value)),n}Sr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new iy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return VO()?8:bM(Et())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new QV;return this.ws(e,n,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Di()<=le.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Di()<=le.DEBUG&&q("QueryEngine","Query:",Li(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Di()<=le.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):U.resolve())}ps(e,n){if(aw(n))return U.resolve(null);let r=Yn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tm(n,null,"F"),r=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,a);return this.Ds(n,u,o,c.readTime)?this.ps(e,tm(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,s){return aw(n)||s.isEqual(ee.min())?U.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?U.resolve(null):(Di()<=le.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Li(n)),this.vs(e,o,n,SM(s,kl)).next(a=>a))})}bs(e,n){let r=new Qe(fS(e));return n.forEach((s,i)=>{rh(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Di()<=le.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Li(n)),this.gs.getDocumentsMatchingQuery(e,n,Is.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LocalStore",XV=3e8;class JV{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new ze(oe),this.Ms=new Ii(i=>Xg(i),Jg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function ZV(t,e,n,r){return new JV(t,e,n,r)}async function LS(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=fe();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function MS(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function ej(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.hi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,f)));let v=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(lt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(f,v),function(E,A,_){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=XV?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,v,d)&&a.push(n.hi.updateTargetData(i,v))});let c=Rs(),u=fe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(tj(i,o,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ee.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(f=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Fs=s,i))}function tj(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rs();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q(oy,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function nj(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new rs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function am(t,e,n){const r=he(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ra(o))throw o;q(oy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function ww(t,e,n){const r=he(t);let s=ee.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=he(c),p=f.Ms.get(d);return p!==void 0?U.resolve(f.Fs.get(p)):f.hi.getTargetData(u,d)}(r,o,Yn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:fe())).next(a=>(rj(r,XM(e),a),{documents:a,qs:i})))}function rj(t,e,n){let r=t.xs.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Ew{constructor(){this.activeTargetIds=rV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sj{constructor(){this.Fo=new Ew,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ew,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="ConnectivityMonitor";class xw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){q(Tw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){q(Tw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function lm(){return Zc===null?Zc=function(){return 268435456+Math.round(2147483648*Math.random())}():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",oj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===pd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=lm(),a=this.Go(e,n.toUriEncodedString());q(Tf,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(a),d=Os(u);return this.jo(e,a,c,r,d).then(f=>(q(Tf,`Received RPC '${e}' ${o}: `,f),f),f=>{throw xs(Tf,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=oj[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class cj extends aj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=lm();return new Promise((a,c)=>{const u=new jI;u.setWithCredentials(!0),u.listenOnce(FI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Eu.NO_ERROR:const f=u.getResponseJson();q(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Eu.TIMEOUT:q(pt,`RPC '${e}' ${o} timed out`),c(new K(B.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:const p=u.getStatus();if(q(pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const E=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(T.status);c(new K(E,T.message))}else c(new K(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(B.UNAVAILABLE,"Connection failed."));break;default:te(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{q(pt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);q(pt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}P_(e,n,r){const s=lm(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BI(),a=zI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");q(pt,`Creating RPC '${e}' stream ${s}: ${d}`,c);const f=o.createWebChannel(d,c);this.T_(f);let p=!1,v=!1;const T=new lj({Ho:A=>{v?q(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(p||(q(pt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),q(pt,`RPC '${e}' stream ${s} sending:`,A),f.send(A))},Yo:()=>f.close()}),E=(A,_,w)=>{A.listen(_,C=>{try{w(C)}catch(k){setTimeout(()=>{throw k},0)}})};return E(f,Ua.EventType.OPEN,()=>{v||(q(pt,`RPC '${e}' stream ${s} transport opened.`),T.s_())}),E(f,Ua.EventType.CLOSE,()=>{v||(v=!0,q(pt,`RPC '${e}' stream ${s} transport closed`),T.__(),this.I_(f))}),E(f,Ua.EventType.ERROR,A=>{v||(v=!0,xs(pt,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),T.__(new K(B.UNAVAILABLE,"The operation could not be completed")))}),E(f,Ua.EventType.MESSAGE,A=>{var _;if(!v){const w=A.data[0];De(!!w,16349);const C=w,k=(C==null?void 0:C.error)||((_=C[0])===null||_===void 0?void 0:_.error);if(k){q(pt,`RPC '${e}' stream ${s} received error:`,k);const L=k.status;let V=function(I){const P=Be[I];if(P!==void 0)return TS(P)}(L),S=k.message;V===void 0&&(V=B.INTERNAL,S="Unknown error status: "+L+" with message "+k.message),v=!0,T.__(new K(V,S)),f.close()}else q(pt,`RPC '${e}' stream ${s} received:`,w),T.a_(w)}}),E(a,UI.STAT_EVENT,A=>{A.stat===Kp.PROXY?q(pt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Kp.NOPROXY&&q(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){return new _V(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="PersistentStream";class uj{constructor(e,n,r,s,i,o,a,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new VS(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Ir(n.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new K(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return q(Iw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(q(Iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dj extends uj{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=EV(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?co(o.readTime):ee.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=gw(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Zp(c)?{documents:TV(i,c)}:{query:xV(i,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SS(i,o.resumeToken);const u=sm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=im(i,o.snapshotVersion.toTimestamp());const u=sm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=SV(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=gw(this.serializer),n.removeTarget=e,this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{}class fj extends hj{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,om(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(B.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,om(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(B.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class pj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ir(n),this._a=!1):q("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class mj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{sc(this)&&(q(Ho,"Restarting streams for network reachability change."),await async function(c){const u=he(c);u.Ia.add(4),await rc(u),u.Aa.set("Unknown"),u.Ia.delete(4),await lh(u)}(this))})}),this.Aa=new pj(r,s)}}async function lh(t){if(sc(t))for(const e of t.da)await e(!0)}async function rc(t){for(const e of t.da)await e(!1)}function jS(t,e){const n=he(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),uy(n)?cy(n):oa(n).x_()&&ly(n,e))}function ay(t,e){const n=he(t),r=oa(n);n.Ta.delete(e),r.x_()&&FS(n,e),n.Ta.size===0&&(r.x_()?r.B_():sc(n)&&n.Aa.set("Unknown"))}function ly(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).H_(e)}function FS(t,e){t.Ra.$e(e),oa(t).Y_(e)}function cy(t){t.Ra=new mV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.Aa.aa()}function uy(t){return sc(t)&&!oa(t).M_()&&t.Ta.size>0}function sc(t){return he(t).Ia.size===0}function US(t){t.Ra=void 0}async function gj(t){t.Aa.set("Online")}async function yj(t){t.Ta.forEach((e,n)=>{ly(t,e)})}async function vj(t,e){US(t),uy(t)?(t.Aa.la(e),cy(t)):t.Aa.set("Unknown")}async function _j(t,e,n){if(t.Aa.set("Online"),e instanceof IS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(t,e)}catch(r){q(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sw(t,r)}else if(e instanceof Iu?t.Ra.Ye(e):e instanceof xS?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ee.min()))try{const r=await MS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ta.get(u);d&&i.Ta.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const d=i.Ta.get(c);if(!d)return;i.Ta.set(c,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),FS(i,c);const f=new rs(d.target,c,u,d.sequenceNumber);ly(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(Ho,"Failed to raise snapshot:",r),await Sw(t,r)}}async function Sw(t,e,n){if(!ra(e))throw e;t.Ia.add(1),await rc(t),t.Aa.set("Offline"),n||(n=()=>MS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Ho,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await lh(t)})}async function Cw(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),q(Ho,"RemoteStore received new credentials");const r=sc(n);n.Ia.add(3),await rc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await lh(n)}async function wj(t,e){const n=he(t);e?(n.Ia.delete(2),await lh(n)):e||(n.Ia.add(2),await rc(n),n.Aa.set("Unknown"))}function oa(t){return t.Va||(t.Va=function(n,r,s){const i=he(n);return i.ia(),new dj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:gj.bind(null,t),e_:yj.bind(null,t),n_:vj.bind(null,t),J_:_j.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),uy(t)?cy(t):t.Aa.set("Unknown")):(await t.Va.stop(),US(t))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new dy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zS(t,e){if(Ir("AsyncQueue",`${e}: ${t}`),ra(t))return new K(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{static emptySet(e){return new uo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=za(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof uo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new uo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.fa=new ze(Y.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):te(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class qo{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qo(e,n,uo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Tj{constructor(){this.queries=Rw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=Rw(),i.forEach((o,a)=>{for(const c of a.wa)c.onError(r)})})(this,new K(B.ABORTED,"Firestore shutting down"))}}function Rw(){return new Ii(t=>hS(t),nh)}async function xj(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new Ej,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=zS(o,`Initialization of query '${Li(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&hy(n)}async function Ij(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Sj(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&hy(n)}function Cj(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function hy(t){t.Da.forEach(e=>{e.next()})}var cm,Pw;(Pw=cm||(cm={})).Fa="default",Pw.Cache="cache";class Aj{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.key=e}}class $S{constructor(e){this.key=e}}class Rj{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=fS(e),this.eu=new uo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Aw,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),v=rh(this.query,f)?f:null,T=!!p&&this.mutatedKeys.has(p.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;p&&v?p.data.isEqual(v.data)?T!==E&&(r.track({type:3,doc:v}),A=!0):this.iu(p,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.Xa(v,c)>0||u&&this.Xa(v,u)<0)&&(a=!0)):!p&&v?(r.track({type:0,doc:v}),A=!0):p&&!v&&(r.track({type:1,doc:p}),A=!0,(c||u)&&(a=!0)),A&&(v?(o=o.add(v),i=E?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,f)=>function(v,T){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{At:A})}};return E(v)-E(T)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new qo(this.query,e.eu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Aw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new $S(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new BS(r))}),n}uu(e){this.Ha=e.qs,this.Za=fe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return qo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fy="SyncEngine";class Pj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bj{constructor(e){this.key=e,this.lu=!1}}class kj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ii(a=>hS(a),nh),this.Tu=new Map,this.Iu=new Set,this.du=new ze(Y.comparator),this.Eu=new Map,this.Au=new ry,this.Ru={},this.Vu=new Map,this.mu=$o.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Nj(t,e,n=!0){const r=GS(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await HS(r,e,n,!0),s}async function Oj(t,e){const n=GS(t);await HS(n,e,!0,!1)}async function HS(t,e,n,r){const s=await nj(t.localStore,Yn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Dj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&jS(t.remoteStore,s),a}async function Dj(t,e,n,r,s){t.gu=(f,p,v)=>async function(E,A,_,w){let C=A.view.nu(_);C.Ds&&(C=await ww(E.localStore,A.query,!1).then(({documents:S})=>A.view.nu(S,C)));const k=w&&w.targetChanges.get(A.targetId),L=w&&w.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(C,E.isPrimaryClient,k,L);return kw(E,A.targetId,V._u),V.snapshot}(t,f,p,v);const i=await ww(t.localStore,e,!0),o=new Rj(e,i.qs),a=o.nu(i.documents),c=nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);kw(t,n,u._u);const d=new Pj(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function Lj(t,e,n){const r=he(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!nh(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await am(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ay(r.remoteStore,s.targetId),um(r,s.targetId)}).catch(Jd)):(um(r,s.targetId),await am(r.localStore,s.targetId,!0))}async function Mj(t,e){const n=he(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ay(n.remoteStore,r.targetId))}async function qS(t,e){const n=he(t);try{const r=await ej(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?De(o.lu,14607):s.removedDocuments.size>0&&(De(o.lu,42227),o.lu=!1))}),await KS(n,r,e)}catch(r){await Jd(r)}}function bw(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=he(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(const p of f.wa)p.va(a)&&(u=!0)}),u&&hy(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Vj(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new ze(Y.comparator);o=o.insert(i,vt.newNoDocument(i,ee.min()));const a=fe().add(i),c=new oh(ee.min(),new Map,new ze(oe),o,a);await qS(r,c),r.du=r.du.remove(i),r.Eu.delete(e),py(r)}else await am(r.localStore,e,!1).then(()=>um(r,e,n)).catch(Jd)}function um(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||WS(t,r)})}function WS(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ay(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),py(t))}function kw(t,e,n){for(const r of n)r instanceof BS?(t.Au.addReference(r.key,e),jj(t,r)):r instanceof $S?(q(fy,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||WS(t,r.key)):te(19791,{yu:r})}function jj(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(q(fy,"New document in limbo: "+n),t.Iu.add(r),py(t))}function py(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Y(Pe.fromString(e)),r=t.mu.next();t.Eu.set(r,new bj(n)),t.du=t.du.insert(n,r),jS(t.remoteStore,new rs(Yn(uS(n.path)),r,"TargetPurposeLimboResolution",Zd.ue))}}async function KS(t,e,n){const r=he(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=iy.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,u){const d=he(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(u,p=>U.forEach(p.Is,v=>d.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>U.forEach(p.ds,v=>d.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!ra(f))throw f;q(oy,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const v=d.Fs.get(p),T=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(T);d.Fs=d.Fs.insert(p,E)}}}(r.localStore,i))}async function Fj(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){q(fy,"User change. New user:",e.toKey());const r=await LS(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(c=>{c.reject(new K(B.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await KS(n,r.Bs)}}function Uj(t,e){const n=he(t),r=n.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let s=fe();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const a=n.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}function GS(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vj.bind(null,e),e.hu.J_=Sj.bind(null,e.eventManager),e.hu.pu=Cj.bind(null,e.eventManager),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ah(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return ZV(this.persistence,new YV,e.initialUser,this.serializer)}Du(e){return new DS(sy.Vi,this.serializer)}bu(e){return new sj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class zj extends wd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){De(this.persistence.referenceDelegate instanceof _d,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LV(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new DS(r=>_d.Vi(r,n),this.serializer)}}class dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fj.bind(null,this.syncEngine),await wj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Tj}()}createDatastore(e){const n=ah(e.databaseInfo.databaseId),r=function(i){return new cj(i)}(e.databaseInfo);return function(i,o,a,c){return new fj(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new mj(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bw(this.syncEngine,n,0),function(){return xw.C()?new xw:new ij}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,d){const f=new kj(s,i,o,a,c,u);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);q(Ho,"RemoteStore shutting down."),i.Ia.add(5),await rc(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class $j{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=WI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(Ps,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(Ps,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function If(t,e){t.asyncQueue.verifyOperationInProgress(),q(Ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await LS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{xs("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{xs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Nw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Hj(t);q(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Cw(e.remoteStore,s)),t._onlineComponents=e}async function Hj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Ps,"Using user provided OfflineComponentProvider");try{await If(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;xs("Error using user provided cache. Falling back to memory cache: "+n),await If(t,new wd)}}else q(Ps,"Using default OfflineComponentProvider"),await If(t,new zj(void 0));return t._offlineComponents}async function qj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Ps,"Using user provided OnlineComponentProvider"),await Nw(t,t._uninitializedComponentsProvider._online)):(q(Ps,"Using default OnlineComponentProvider"),await Nw(t,new dm))),t._onlineComponents}async function Wj(t){const e=await qj(t),n=e.eventManager;return n.onListen=Nj.bind(null,e.syncEngine),n.onUnlisten=Lj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Oj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Mj.bind(null,e.syncEngine),n}function Kj(t,e,n={}){const r=new ii;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new Bj({next:p=>{d.Ou(),o.enqueueAndForget(()=>Ij(i,f)),p.fromCache&&c.source==="server"?u.reject(new K(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Aj(a,d,{includeMetadataChanges:!0,ka:!0});return xj(i,f)}(await Wj(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firestore.googleapis.com",Dw=!0;class Lw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YS,this.ssl=Dw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Dw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OV)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class my{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mM;switch(r.type){case"firstParty":return new _M(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ow.get(n);r&&(q("ComponentProvider","Removing Datastore"),Ow.delete(n),r.terminate())}(this),Promise.resolve()}}function Gj(t,e,n,r={}){var s;t=Qp(t,my);const i=Os(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Dg(`https://${c}`),Lg("Firestore",!0)),o.host!==YS&&o.host!==c&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!mi(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=gt.MOCK_USER;else{d=Yx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new K(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new gt(p)}t._authCredentials=new gM(new HI(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tc(n,kt._jsonSchema))return new kt(e,r||null,new Y(Pe.fromString(n.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:qe("string",kt._jsonSchemaVersion),referencePath:qe("string")};class ho extends Si{constructor(e,n,r){super(e,n,uS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Y(e))}withConverter(e){return new ho(this.firestore,e,this._path)}}function Qj(t,e,...n){if(t=Tt(t),t instanceof my){const r=Pe.fromString(e,...n);return K_(r),new ho(t,null,r)}{if(!(t instanceof kt||t instanceof ho))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return K_(r),new ho(t.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="AsyncQueue";class Vw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new VS(this,"async_queue_retry"),this.oc=()=>{const r=xf();r&&q(Mw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=xf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ii;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ra(e))throw e;q(Mw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ir("INTERNAL UNHANDLED ERROR: ",jw(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=dy.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&te(47125,{hc:jw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function jw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class XS extends my{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Vw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vw(e),this._firestoreClient=void 0,await e}}}function Yj(t,e){const n=typeof t=="object"?t:jg(),r=typeof t=="string"?t:pd,s=Wd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Kx("firestore");i&&Gj(s,...i)}return s}function Xj(t){if(t._terminated)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jj(t),t._firestoreClient}function Jj(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,d){return new MM(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,QS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new $j(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dn(lt.fromBase64String(e))}catch(n){throw new K(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dn(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tc(e,dn._jsonSchema))return dn.fromBase64String(e.bytes)}}dn._jsonSchemaVersion="firestore/bytes/1.0",dn._jsonSchema={type:qe("string",dn._jsonSchemaVersion),bytes:qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xn._jsonSchemaVersion}}static fromJSON(e){if(tc(e,Xn._jsonSchema))return new Xn(e.latitude,e.longitude)}}Xn._jsonSchemaVersion="firestore/geoPoint/1.0",Xn._jsonSchema={type:qe("string",Xn._jsonSchemaVersion),latitude:qe("number"),longitude:qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tc(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jn(e.vectorValues);throw new K(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:qe("string",Jn._jsonSchemaVersion),vectorValues:qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=/^__.*__$/;function eC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ec:t})}}class gy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new gy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return hm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(eC(this.Ec)&&Zj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class eF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ah(e)}Dc(e,n,r,s=!1){return new gy({Ec:e,methodName:n,bc:r,path:_t.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tF(t){const e=t._freezeSettings(),n=ah(t._databaseId);return new eF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nF(t,e,n,r=!1){return yy(n,t.Dc(r?4:3,e))}function yy(t,e){if(tC(t=Tt(t)))return sF("Unsupported field value:",e,t),rF(t,e);if(t instanceof ZS)return function(r,s){if(!eC(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=yy(a,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=be.fromDate(r);return{timestampValue:im(s.serializer,i)}}if(r instanceof be){const i=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:im(s.serializer,i)}}if(r instanceof Xn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dn)return{bytesValue:SS(s.serializer,r._byteString)};if(r instanceof kt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:CS(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Jn)return function(o,a){return{mapValue:{fields:{[tS]:{stringValue:rS},[md]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return Zg(a.serializer,u)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Xd(r)}`)}(t,e)}function rF(t,e){const n={};return QI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(r,s)=>{const i=yy(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function tC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof Xn||t instanceof dn||t instanceof kt||t instanceof ZS||t instanceof Jn)}function sF(t,e,n){if(!tC(n)||!KI(n)){const r=Xd(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}const iF=new RegExp("[~\\*/\\[\\]]");function oF(t,e,n){if(e.search(iF)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new JS(...e.split("."))._internalPath}catch{throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(B.INVALID_ARGUMENT,a+t+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ch("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aF extends nC{data(){return super.data()}}function ch(t,e){return typeof e=="string"?oF(t,e):e instanceof JS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class rC extends vy{}function Fw(t,e,...n){let r=[];e instanceof vy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof _y).length,a=i.filter(c=>c instanceof uh).length;if(o>1||o>0&&a>0)throw new K(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uh extends rC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uh(e,n,r)}_apply(e){const n=this._parse(e);return sC(e._query,n),new Si(e.firestore,e.converter,em(e._query,n))}_parse(e){const n=tF(e.firestore);return function(i,o,a,c,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){zw(f,d);const T=[];for(const E of f)T.push(Uw(c,i,E));p={arrayValue:{values:T}}}else p=Uw(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||zw(f,d),p=nF(a,o,f,d==="in"||d==="not-in");return He.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cF(t,e,n){const r=e,s=ch("where",t);return uh._create(s,r,n)}class _y extends vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _y(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)sC(o,c),o=em(o,c)}(e._query,n),new Si(e.firestore,e.converter,em(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wy extends rC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ll(i,o)}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ia(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function uF(t,e="asc"){const n=e,r=ch("orderBy",t);return wy._create(r,n)}function Uw(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new K(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dS(e)&&n.indexOf("/")!==-1)throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!Y.isDocumentKey(r))throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tw(t,new Y(r))}if(n instanceof kt)return tw(t,n._key);throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xd(n)}.`)}function zw(t,e){if(!Array.isArray(t)||t.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sC(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dF{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return sa(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[md].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new Jn(i)}convertGeoPoint(e){return new Xn(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=th(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);De(NS(r),9688,{name:e});const s=new Ol(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class eu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fo extends nC{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ch("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",fo._jsonSchema={type:qe("string",fo._jsonSchemaVersion),bundleSource:qe("string","DocumentSnapshot"),bundleName:qe("string"),bundle:qe("string")};class Su extends fo{data(e={}){return super.data(e)}}class po{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new eu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Su(this._firestore,this._userDataWriter,r.key,r,new eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new eu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new eu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:hF(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=WI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:qe("string",po._jsonSchemaVersion),bundleSource:qe("string","QuerySnapshot"),bundleName:qe("string"),bundle:qe("string")};class fF extends dF{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function Bw(t){t=Qp(t,Si);const e=Qp(t.firestore,XS),n=Xj(e),r=new fF(e);return lF(t._query),Kj(n,t._query).then(s=>new po(e,r,t,s))}(function(e,n=!0){(function(s){na=s})(Ti),gi(new Ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new XS(new yM(r.getProvider("auth-internal")),new wM(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Kn(B_,$_,e),Kn(B_,$_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="firebasestorage.googleapis.com",oC="storageBucket",pF=2*60*1e3,mF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et extends nr{constructor(e,n,r=0){super(Sf(e),`Firebase Storage: ${n} (${Sf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ze;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ze||(Ze={}));function Sf(t){return"storage/"+t}function aC(){const t="An unknown error occurred, please check the error payload for server response.";return new et(Ze.UNKNOWN,t)}function gF(t){return new et(Ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yF(t){return new et(Ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new et(Ze.UNAUTHENTICATED,t)}function _F(){return new et(Ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wF(t){return new et(Ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EF(){return new et(Ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TF(){return new et(Ze.CANCELED,"User canceled the upload/download.")}function xF(t){return new et(Ze.INVALID_URL,"Invalid URL '"+t+"'.")}function IF(t){return new et(Ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function SF(){return new et(Ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oC+"' property when initializing the app?")}function CF(){return new et(Ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function fm(t){return new et(Ze.INVALID_ARGUMENT,t)}function lC(){return new et(Ze.APP_DELETED,"The Firebase app was deleted.")}function AF(t){return new et(Ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Na(t){throw new et(Ze.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jt.makeFromUrl(e,n)}catch{return new Jt(e,"")}if(r.path==="")return r;throw IF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),T={bucket:1,path:3},E=n===iC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",_=new RegExp(`^https?://${E}/${s}/${A}`,"i"),C=[{regex:a,indices:c,postModify:i},{regex:v,indices:T,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<C.length;k++){const L=C[k],V=L.regex.exec(e);if(V){const S=V[L.indices.bucket];let y=V[L.indices.path];y||(y=""),r=new Jt(S,y),L.postModify(r);break}}if(r==null)throw xF(e);return r}}class RF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function d(...A){u||(u=!0,e.apply(null,A))}function f(A){s=setTimeout(()=>{s=null,t(v,c())},A)}function p(){i&&clearTimeout(i)}function v(A,..._){if(u){p();return}if(A){p(),d.call(null,A,..._);return}if(c()||o){p(),d.call(null,A,..._);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,f(C)}let T=!1;function E(A){T||(T=!0,p(),!u&&(s!==null?(A||(a=2),clearTimeout(s),f(0)):A||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function bF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(t){return t!==void 0}function NF(t){return typeof t=="object"&&!Array.isArray(t)}function cC(t){return typeof t=="string"||t instanceof String}function $w(t,e,n,r){if(r<e)throw fm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function dC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ai;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ai||(ai={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,n,r,s,i,o,a,c,u,d,f,p=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,E)=>{this.resolve_=T,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new tu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ai.NO_ERROR,c=i.getStatus();if(!a||OF(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ai.ABORT;r(!1,new tu(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new tu(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());kF(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=aC();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?lC():TF();o(c)}else{const c=EF();o(c)}};this.canceled_?n(!1,new tu(!1,null,!0)):this.backoffId_=PF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function LF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function FF(t,e,n,r,s,i,o=!0,a=!1){const c=dC(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return VF(d,e),LF(d,n),MF(d,i),jF(d,r),new DF(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){let e;try{e=JSON.parse(t)}catch{return null}return NF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function fC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e){return e}class Ct{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||BF}}let nu=null;function $F(t){return!cC(t)||t.length<2?t:fC(t)}function HF(){if(nu)return nu;const t=[];t.push(new Ct("bucket")),t.push(new Ct("generation")),t.push(new Ct("metageneration")),t.push(new Ct("name","fullPath",!0));function e(i,o){return $F(o)}const n=new Ct("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Ct("size");return s.xform=r,t.push(s),t.push(new Ct("timeCreated")),t.push(new Ct("updated")),t.push(new Ct("md5Hash",null,!0)),t.push(new Ct("cacheControl",null,!0)),t.push(new Ct("contentDisposition",null,!0)),t.push(new Ct("contentEncoding",null,!0)),t.push(new Ct("contentLanguage",null,!0)),t.push(new Ct("contentType",null,!0)),t.push(new Ct("metadata","customMetadata",!0)),nu=t,nu}function qF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Jt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function WF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return qF(r,t),r}function KF(t,e,n){const r=hC(e);return r===null?null:WF(t,r,n)}function GF(t,e,n,r){const s=hC(e);if(s===null||!cC(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),v=uC(p,n,r),T=dC({alt:"media",token:u});return v+T})[0]}class QF{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){if(!t)throw aC()}function XF(t,e){function n(r,s){const i=KF(t,s,e);return YF(i!==null),GF(i,s,t.host,t._protocol)}return n}function JF(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=_F():s=vF():n.getStatus()===402?s=yF(t.bucket):n.getStatus()===403?s=wF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ZF(t){const e=JF(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=gF(t.path)),i.serverResponse=s.serverResponse,i}return n}function e3(t,e,n){const r=e.fullServerUrl(),s=uC(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new QF(s,i,XF(t,n),o);return a.errorHandler=ZF(e),a}class t3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ai.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ai.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ai.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Na("cannot .send() more than once");if(Os(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Na("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Na("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Na("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Na("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class n3 extends t3{initXhr(){this.xhr_.responseType="text"}}function r3(){return new n3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this._service=e,n instanceof Jt?this._location=n:this._location=Jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _i(e,n)}get root(){const e=new Jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fC(this._location.path)}get storage(){return this._service}get parent(){const e=UF(this._location.path);if(e===null)return null;const n=new Jt(this._location.bucket,e);return new _i(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AF(e)}}function s3(t){t._throwIfRoot("getDownloadURL");const e=e3(t.storage,t._location,HF());return t.storage.makeRequestWithTokens(e,r3).then(n=>{if(n===null)throw CF();return n})}function i3(t,e){const n=zF(t._location.path,e),r=new Jt(t._location.bucket,n);return new _i(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){return/^[A-Za-z]+:\/\//.test(t)}function a3(t,e){return new _i(t,e)}function pC(t,e){if(t instanceof Ey){const n=t;if(n._bucket==null)throw SF();const r=new _i(n,n._bucket);return e!=null?pC(r,e):r}else return e!==void 0?i3(t,e):t}function l3(t,e){if(e&&o3(e)){if(t instanceof Ey)return a3(t,e);throw fm("To use ref(service, url), the first argument must be a Storage instance.")}else return pC(t,e)}function Hw(t,e){const n=e==null?void 0:e[oC];return n==null?null:Jt.makeFromBucketSpec(n,t)}function c3(t,e,n,r={}){t.host=`${e}:${n}`;const s=Os(e);s&&(Dg(`https://${t.host}/b`),Lg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Yx(i,t.app.options.projectId))}class Ey{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=iC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pF,this._maxUploadRetryTime=mF,this._requests=new Set,s!=null?this._bucket=Jt.makeFromBucketSpec(s,this._host):this._bucket=Hw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jt.makeFromBucketSpec(this._url,e):this._bucket=Hw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _i(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new RF(lC());{const o=FF(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const qw="@firebase/storage",Ww="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="storage";function u3(t){return t=Tt(t),s3(t)}function d3(t,e){return t=Tt(t),l3(t,e)}function h3(t=jg(),e){t=Tt(t);const r=Wd(t,mC).getImmediate({identifier:e}),s=Kx("storage");return s&&f3(r,...s),r}function f3(t,e,n,r={}){c3(t,e,n,r)}function p3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ey(n,r,s,e,Ti)}function m3(){gi(new Ts(mC,p3,"PUBLIC").setMultipleInstances(!0)),Kn(qw,Ww,""),Kn(qw,Ww,"esm2017")}m3();const Ed={apiKey:"AIzaSyAWLbxmvwAKx1_rXS_4qMcZWttCRbPsyF4",authDomain:"app-hinos.firebaseapp.com",projectId:"app-hinos",storageBucket:"app-hinos.firebasestorage.app",messagingSenderId:"1070834473436",appId:"1:1070834473436:web:ff068364f18cb587f25719"};console.log("Firebase config status:",{hasApiKey:!0,hasProjectId:!0,hasAppId:!0,projectId:"app-hinos",authDomain:Ed.authDomain,storageBucket:Ed.storageBucket});const hn=Object.values(Ed).every(t=>t&&!String(t).startsWith("your_"));let ru,pm,mm,zt,Ty;if(hn){ru=Zx(Ed),pm=Yj(ru);try{console.log("Production mode: Using Firebase online mode")}catch(t){console.warn("Could not enable Firestore persistence:",t)}mm=h3(ru),zt=MI(ru),Ty=Promise.resolve().then(()=>{console.log("Firebase authentication initialized")})}else console.warn("Firebase not configured. Running in offline mode.");const gC=R.createContext(void 0);function ic(){const t=R.useContext(gC);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function g3({children:t}){const[e,n]=R.useState(null),[r,s]=R.useState(!0);R.useEffect(()=>{if(!hn||!zt){s(!1);return}return SI(zt,u=>{n(u),s(!1)})},[]);const a={user:e,loading:r,login:async(c,u)=>{if(!hn||!zt)throw new Error("Firebase no est configurado");try{await JL(zt,c,u)}catch(d){throw console.error("Login error:",d),d}},logout:async()=>{if(!hn||!zt)throw new Error("Firebase no est configurado");try{await t4(zt)}catch(c){throw console.error("Logout error:",c),c}}};return g.jsx(gC.Provider,{value:a,children:t})}const yC=R.createContext(void 0),Kw="programacao";function y3({children:t}){const[e,n]=R.useState([]);R.useEffect(()=>{try{const a=localStorage.getItem(Kw);a&&n(JSON.parse(a))}catch(a){console.error("Erro ao carregar programacao do localStorage",a)}},[]),R.useEffect(()=>{try{localStorage.setItem(Kw,JSON.stringify(e))}catch(a){console.error("Erro ao salvar programacao no localStorage",a)}},[e]);const r=a=>{n(c=>c.some(u=>u.organKey===a.organKey&&u.hymnIndex===a.hymnIndex)?c:[...c,a])},s=(a,c)=>{n(u=>u.filter(d=>!(d.organKey===a&&d.hymnIndex===c)))},i=a=>{n(c=>c.some(d=>d.organKey===a.organKey&&d.hymnIndex===a.hymnIndex)?c.filter(d=>!(d.organKey===a.organKey&&d.hymnIndex===a.hymnIndex)):[...c,a])},o=(a,c)=>e.some(u=>u.organKey===a&&u.hymnIndex===c);return g.jsx(yC.Provider,{value:{programacao:e,addItem:r,removeItem:s,toggleItem:i,isProgrammed:o},children:t})}function dh(){const t=R.useContext(yC);if(!t)throw new Error("useProgramacao must be used within a ProgramacaoProvider");return t}class v3{constructor(){this.registration=null,this.onUpdateCallback=null}async register(){if(!("serviceWorker"in navigator))return console.log("[PWA] Service Worker not supported"),null;try{return this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("[PWA] Service Worker registered successfully"),this.registration.addEventListener("updatefound",()=>{var n;const e=(n=this.registration)==null?void 0:n.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[PWA] New version available"),this.onUpdateCallback&&this.onUpdateCallback({hasUpdate:!0,waitingWorker:e}))})}),this.registration.waiting&&this.onUpdateCallback&&this.onUpdateCallback({hasUpdate:!0,waitingWorker:this.registration.waiting}),this.registration}catch(e){return console.error("[PWA] Service Worker registration failed:",e),null}}async checkForUpdates(){if(!this.registration)return console.log("[PWA] No registration available"),!1;try{await this.registration.update();const e=this.registration.active||navigator.serviceWorker.controller;return e?new Promise(n=>{const r=new MessageChannel;r.port1.onmessage=s=>{console.log("[PWA] Update check result:",s.data),n(s.data.hasUpdates||!1)},e.postMessage({type:"CHECK_UPDATES"},[r.port2]),setTimeout(()=>n(!1),1e4)}):(console.log("[PWA] Update check completed"),!1)}catch(e){return console.error("[PWA] Update check failed:",e),!1}}activateUpdate(){var e;(e=this.registration)!=null&&e.waiting&&(this.registration.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())}onUpdate(e){this.onUpdateCallback=e}async clearCache(){if("caches"in window){const e=await caches.keys();await Promise.all(e.map(n=>caches.delete(n))),console.log("[PWA] All caches cleared")}}async getCacheSize(){if(!("caches"in window))return 0;let e=0;const n=await caches.keys();for(const r of n){const s=await caches.open(r),i=await s.keys();for(const o of i){const a=await s.match(o);if(a){const c=await a.blob();e+=c.size}}}return e}async prefetchHymns(){console.log("[PWA] Starting hymn prefetch...");const e=["campanha","comissao","conjunto-musical","coral","criancas","grupo-jovem","proat","uniao-adolescentes"],n=await caches.open("belem-play-v1-audio"),r=new Set;(await n.keys()).forEach(i=>r.add(i.url));for(const i of e)try{const a=await(await fetch(`/data/hymns/${i}.json`)).json(),c=a.filter(d=>d.audioUrl&&!r.has(d.audioUrl)).map(d=>d.audioUrl);console.log(`[PWA] Prefetching ${c.length} new hymns for ${i} (${a.length-c.length} already cached)`);const u=c.map(async d=>{try{const f=await fetch(d);if(f.ok){const p=f.clone();await n.put(d,p)}}catch(f){console.warn(`[PWA] Failed to prefetch audio ${d}:`,f)}});await Promise.all(u)}catch(o){console.error(`[PWA] Failed to prefetch ${i}:`,o)}console.log("[PWA] Hymn prefetch completed")}isOnline(){return navigator.onLine}onOnlineStatusChange(e){window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1))}}const bt=new v3;async function _3(){if(navigator.storage&&navigator.storage.persist){const t=await navigator.storage.persist();return console.log(`[PWA] Persistent storage: ${t?"granted":"denied"}`),t}return!1}async function w3(){if(navigator.storage&&navigator.storage.estimate){const t=await navigator.storage.estimate();return{usage:t.usage||0,quota:t.quota||0}}return null}const Gw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Qw=ex,xy=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Qw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],f=i==null?void 0:i[u];if(d===null)return null;const p=Gw(d)||Gw(f);return s[u][p]}),a=n&&Object.entries(n).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:p,...v}=d;return Object.entries(v).every(T=>{let[E,A]=T;return Array.isArray(A)?A.includes({...i,...a}[E]):{...i,...a}[E]===A})?[...u,f,p]:u},[]);return Qw(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},E3=xy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xe=R.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?S2:"button";return g.jsx(o,{className:Ge(E3({variant:e,size:n,className:t})),ref:i,...s})});xe.displayName="Button";const Dt=R.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:Ge("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Dt.displayName="Card";const Sr=R.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:Ge("flex flex-col space-y-1.5 p-6",t),...e}));Sr.displayName="CardHeader";const Cr=R.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:Ge("text-2xl font-semibold leading-none tracking-tight",t),...e}));Cr.displayName="CardTitle";const oc=R.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));oc.displayName="CardDescription";const Lt=R.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:Ge("p-6 pt-0",t),...e}));Lt.displayName="CardContent";const T3=R.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:Ge("flex items-center p-6 pt-0",t),...e}));T3.displayName="CardFooter";const x3=1,I3=1e6;let Cf=0;function S3(){return Cf=(Cf+1)%Number.MAX_SAFE_INTEGER,Cf.toString()}const Af=new Map,Yw=t=>{if(Af.has(t))return;const e=setTimeout(()=>{Af.delete(t),il({type:"REMOVE_TOAST",toastId:t})},I3);Af.set(t,e)},C3=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,x3)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Yw(n):t.toasts.forEach(r=>{Yw(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Cu=[];let Au={toasts:[]};function il(t){Au=C3(Au,t),Cu.forEach(e=>{e(Au)})}function A3({...t}){const e=S3(),n=s=>il({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>il({type:"DISMISS_TOAST",toastId:e});return il({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function vC(){const[t,e]=R.useState(Au);return R.useEffect(()=>{const n=r=>{requestAnimationFrame(()=>{e(r)})};return Cu.push(n),()=>{const r=Cu.indexOf(n);r>-1&&Cu.splice(r,1)}},[]),{...t,toast:A3,dismiss:n=>il({type:"DISMISS_TOAST",toastId:n})}}function R3(){const[t,e]=R.useState(!1),[n,r]=R.useState(!1);return R.useEffect(()=>{const s="pwa_hymns_prefetched";if(localStorage.getItem(s)==="true"){r(!0);return}if(navigator.onLine&&"serviceWorker"in navigator){const o=setTimeout(async()=>{e(!0);try{await bt.prefetchHymns(),localStorage.setItem(s,"true"),r(!0)}catch(a){console.error("[PWA] Prefetch failed:",a)}finally{e(!1)}},5e3);return()=>clearTimeout(o)}},[]),null}function P3(){const[t,e]=R.useState(null),[n,r]=R.useState(navigator.onLine);R.useState(!1);const{toast:s}=vC();R.useEffect(()=>{bt.register().then(()=>{console.log("[PWA] Service Worker registration complete")}),bt.onUpdate(c=>{e(c),c.hasUpdate&&s({title:"Nova atualizao disponvel",description:"Uma nova verso do app est pronta para ser instalada."})});let o=null;"serviceWorker"in navigator&&(o=async c=>{if(c.data&&c.data.type==="HYMNS_UPDATED"){console.log("[PWA] Received HYMNS_UPDATED broadcast"),s({title:"Novos hinos disponveis",description:"Baixando novos hinos automaticamente..."});try{localStorage.removeItem("pwa_hymns_prefetched"),await bt.prefetchHymns(),localStorage.setItem("pwa_hymns_prefetched","true"),s({title:"Hinos atualizados!",description:"Os novos hinos foram baixados. Recarregando..."}),setTimeout(()=>{window.location.reload()},2e3)}catch(u){console.error("[PWA] Error prefetching after broadcast:",u)}}},navigator.serviceWorker.addEventListener("message",o)),bt.onOnlineStatusChange(c=>{r(c),s(c?{title:"Voc est online",description:"Conexo com a internet restaurada."}:{title:"Voc est offline",description:"O app continuar funcionando com o contedo em cache.",variant:"destructive"})});const a=setInterval(async()=>{navigator.onLine&&await bt.checkForUpdates()&&(console.log("[PWA] New hymns detected, prefetching..."),s({title:"Novos hinos disponveis",description:"Baixando novos hinos automaticamente..."}),localStorage.removeItem("pwa_hymns_prefetched"),await bt.prefetchHymns(),localStorage.setItem("pwa_hymns_prefetched","true"),s({title:"Hinos atualizados!",description:"Os novos hinos foram baixados e esto prontos para uso."}),setTimeout(()=>{window.location.reload()},2e3))},5*60*1e3);return()=>{o&&"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",o),clearInterval(a)}},[s]);const i=()=>{bt.activateUpdate()};return t!=null&&t.hasUpdate?g.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm","data-testid":"pwa-update-prompt",children:g.jsxs(Dt,{className:"shadow-lg border-2 border-primary",children:[g.jsxs(Sr,{className:"pb-3",children:[g.jsxs(Cr,{className:"flex items-center gap-2 text-lg",children:[g.jsx(Zu,{className:"h-5 w-5"}),"Nova Verso Disponvel"]}),g.jsx(oc,{children:"Uma atualizao est pronta para ser instalada"})]}),g.jsx(Lt,{className:"flex gap-2",children:g.jsxs(xe,{onClick:i,className:"flex-1","data-testid":"button-update-pwa",children:[g.jsx(YT,{className:"h-4 w-4 mr-2"}),"Atualizar Agora"]})})]})}):null}function b3(){const[t,e]=R.useState(navigator.onLine);return R.useEffect(()=>{bt.onOnlineStatusChange(e)},[]),t?null:g.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-black py-2 px-4 text-center text-sm font-medium z-50 flex items-center justify-center gap-2","data-testid":"pwa-offline-banner",children:[g.jsx(Uk,{className:"h-4 w-4"}),"Modo Offline - Usando contedo em cache"]})}function k3(){const[t,e]=R.useState(null),[n,r]=R.useState(!1);R.useEffect(()=>{const o=a=>{a.preventDefault(),e(a),r(!0)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const s=async()=>{if(!t)return;t.prompt();const{outcome:o}=await t.userChoice;o==="accepted"&&console.log("[PWA] User accepted the install prompt"),e(null),r(!1)},i=()=>{r(!1)};return n?g.jsx("div",{className:"fixed bottom-4 left-4 z-50 max-w-sm","data-testid":"pwa-install-prompt",children:g.jsxs(Dt,{className:"shadow-lg border-2 border-primary",children:[g.jsxs(Sr,{className:"pb-3",children:[g.jsxs(Cr,{className:"flex items-center gap-2 text-lg",children:[g.jsx(Zu,{className:"h-5 w-5"}),"Instalar Belm Play"]}),g.jsx(oc,{children:"Instale o app na sua tela inicial para acesso rpido e uso offline"})]}),g.jsxs(Lt,{className:"flex gap-2",children:[g.jsx(xe,{onClick:s,className:"flex-1","data-testid":"button-install-pwa",children:"Instalar"}),g.jsx(xe,{onClick:i,variant:"outline","data-testid":"button-dismiss-install",children:"Agora No"})]})]})}):null}function N3({onFinish:t,holdMs:e=3200,xfadeMs:n=950,logoHoldMs:r=1e3}){const[a,c]=R.useState(!1),[u,d]=R.useState(!1);return R.useEffect(()=>{const f=setTimeout(()=>{c(!0),d(!0)},e),p=setTimeout(()=>{t==null||t()},e+n+r);return()=>{clearTimeout(f),clearTimeout(p)}},[e,n,r,t]),g.jsxs("div",{style:{position:"fixed",inset:0,zIndex:9999,display:"grid",placeItems:"center",background:"linear-gradient(135deg,#0a2a59,#0f4e98)"},children:[g.jsx("style",{children:`
        @keyframes sp_eqCenter{
          0%   { transform: scaleY(var(--sp-a0)); }
          25%  { transform: scaleY(var(--sp-a1)); }
          50%  { transform: scaleY(var(--sp-a2)); }
          75%  { transform: scaleY(var(--sp-a3)); }
          100% { transform: scaleY(var(--sp-a0)); }
        }
      `}),g.jsxs("div",{style:{position:"relative",width:"min(92vw, 900px)",height:"min(60vh, 520px)"},children:[g.jsxs("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",transform:`translate(0px, 0px) ${a?" translateX(140px)":""}`,transition:`transform ${n}ms ease, opacity ${n}ms ease, filter ${n}ms ease`,opacity:a?0:1,filter:a?"blur(4px)":"none"},children:[g.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,zIndex:-1,opacity:.22,background:"radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.45), transparent 60%)",filter:"blur(18px)"}}),g.jsx("div",{style:{display:"flex",gap:14,alignItems:"center",height:70,filter:"drop-shadow(0 12px 30px rgba(0,0,0,.25))"},children:[{h:80,delay:0,amp:.45},{h:140,delay:.15,amp:.95},{h:110,delay:.3,amp:.7},{h:90,delay:.45,amp:.8}].map((f,p)=>g.jsx("div",{style:{width:9,height:f.h,borderRadius:999,background:"linear-gradient(180deg,#05d7ff,#34c17d)",boxShadow:"0 6px 24px rgba(0,0,0,.25), inset 0 0 18px rgba(5,215,255,.15)",transformOrigin:"center","--sp-a0":`calc(.70 + ${f.amp}*.05)`,"--sp-a1":`calc(.95 + ${f.amp}*.35)`,"--sp-a2":`calc(1.15 + ${f.amp}*.20)`,"--sp-a3":`calc(.90 + ${f.amp}*.30)`,animation:`sp_eqCenter 1.1s ease-in-out ${f.delay}s infinite`}},p))})]}),g.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",opacity:u?1:0,transform:u?"scale(1)":"scale(0.985)",transition:`opacity ${n}ms ease, transform ${n}ms ease`},children:g.jsx("img",{src:"/logo.png",alt:"Belm Play",style:{display:"block",width:"clamp(234px, 40vmin, 540px)",height:"auto",filter:"drop-shadow(0 10px 22px rgba(0,0,0,.25))"}})})]})]})}function Yt({children:t,title:e="",breadcrumbs:n,showBackButton:r=!1,onBackClick:s,showSettingsButton:i=!1}){const[o,a]=Rr(),{user:c,loading:u}=ic();R.useEffect(()=>{const T=()=>{try{sessionStorage.setItem("wasReload","1")}catch{}};return window.addEventListener("beforeunload",T),()=>window.removeEventListener("beforeunload",T)},[]),R.useEffect(()=>{let T=!1;try{T=sessionStorage.getItem("wasReload")==="1"}catch{}if(T){try{sessionStorage.removeItem("wasReload")}catch{}o!=="/"&&a("/",{replace:!0})}},[]);const[d,f]=R.useState(()=>!window.__splashShown),p=()=>{s?s():a("/")},v=()=>{u||a(c?"/config":"/login")};return g.jsxs("div",{className:"min-h-screen bg-church-bg",children:[d&&g.jsx(N3,{holdMs:1200,xfadeMs:950,logoHoldMs:800,onFinish:()=>{window.__splashShown=!0,f(!1)}}),g.jsxs("header",{className:"shadow-lg relative flex items-center",style:{background:"linear-gradient(90deg, #0F2247, #4DB4E7)",height:"100px"},children:[g.jsx("img",{src:"/detalhe-header.png",alt:"Detalhe",style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",height:"140%",opacity:.6,zIndex:1,mixBlendMode:"overlay",pointerEvents:"none"}}),g.jsxs("div",{className:"container mx-auto px-4 h-full",style:{position:"relative",zIndex:2},children:[g.jsxs("div",{className:"flex items-center justify-between h-full",children:[g.jsxs("div",{className:"flex items-center h-full",children:[r&&g.jsx(xe,{variant:"ghost",size:"sm",onClick:p,className:"mr-4 text-white hover:text-white hover:bg-white/10 p-4 rounded-lg",children:g.jsx(WT,{className:"h-6 w-6"})}),e?g.jsx("h1",{className:"text-white font-bold ml-5 text-[25px]",children:e}):g.jsx("img",{src:"/logo.svg",alt:"Belm Play",style:{maxHeight:"120%",marginLeft:15,display:"block"}})]}),i&&g.jsx("div",{className:"flex items-center",children:g.jsx(xe,{variant:"outline",size:"sm",onClick:v,className:"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-9 text-white hover:text-white hover:bg-white/10 p-5 rounded-xl border-2 border-white/30 hover:border-white/50 bg-[#3d8ebd] mt-[0px] mb-[0px] pt-[20px] pb-[20px]",style:{minHeight:"56px",minWidth:"56px"},children:g.jsx(kk,{className:"h-8 w-8"})})})]}),n&&n.length>0&&g.jsxs("nav",{className:"mt-2 text-church-light text-sm",children:[g.jsx("span",{children:"Incio"}),n.map((T,E)=>g.jsxs("span",{children:[g.jsx("span",{className:"mx-2",children:""}),g.jsx("span",{children:T})]},E))]})]})]}),g.jsx("main",{className:"container mx-auto px-4 py-8",children:t})]})}const ac=[{key:"coral",name:"Coral",description:"Hinos do coral da igreja",icon:"users"},{key:"conjunto-musical",name:"Conjunto Musical",description:"Instrumentos e vocais",icon:"music"},{key:"criancas",name:"Crianas",description:"Hinos infantis",icon:"baby"},{key:"proat",name:"PROATI",description:"Programa de Orientao  Terceira Idade",icon:"user-check"},{key:"uniao-adolescentes",name:"Unio de Adolescentes",description:"Hinos para adolescentes",icon:"user-plus"},{key:"grupo-jovem",name:"Grupo Jovem",description:"Louvor dos jovens",icon:"guitar"},{key:"comissao",name:"Comisso",description:"Hinos da comisso",icon:"heart"},{key:"campanha",name:"Campanha",description:"Hinos de campanha",icon:"flag"}],O3=xy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function D3({className:t,variant:e,...n}){return g.jsx("div",{className:Ge(O3({variant:e}),t),...n})}const L3={users:JT,music:Pk,baby:_k,"user-check":Mk,"user-plus":Vk,guitar:Ck,heart:Rk,flag:Sk};function M3(){const[,t]=Rr(),{programacao:e}=dh(),n=r=>{t(`/organ/${r}`)};return g.jsx(Yt,{showSettingsButton:!0,children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsx("div",{className:"flex justify-center mb-6",children:g.jsxs(xe,{onClick:()=>t("/programacao"),className:"relative px-8 py-8 text-xl rounded-xl font-semibold",children:["Programao",e.length>0&&g.jsx(D3,{variant:"destructive",className:"ml-3 px-3 py-1 text-sm",children:e.length})]})}),g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h2",{className:"font-bold text-church-primary mb-2 text-[27px]",children:"Selecione o rgo"}),g.jsx("p",{className:"text-church-text opacity-75",children:"Escolha o rgo da igreja para acessar os hinos"})]}),g.jsx("div",{className:"flex flex-col items-center",children:g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 w-full max-w-4xl",children:ac.map(r=>{const s=L3[r.icon]||JT;return g.jsx(xe,{variant:"ghost",className:"h-auto p-0 min-h-[80px] w-full",onClick:()=>n(r.key),children:g.jsx(Dt,{className:"w-full bg-gradient-to-r from-white to-blue-50 hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-church-secondary group hover:scale-105 active:scale-100 shadow-md",children:g.jsx(Lt,{className:"p-6 min-h-[80px] flex items-center",children:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsxs("div",{className:"text-left flex items-center",children:[g.jsx(s,{className:"text-church-secondary mr-4 h-8 w-8"}),g.jsx("h3",{className:"font-semibold text-church-primary group-hover:text-church-secondary text-center md:text-left text-[18px]",style:{fontSize:"16px",fontWeight:"600"},children:r.name})]}),g.jsx(KT,{className:"text-church-accent opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6"})]})})})},r.key)})})})]})})}async function V3(t){var e,n,r;if(!hn||!pm)return console.warn("Firebase not configured, using offline mode"),[];try{console.log("Getting hymns for organ using Firebase SDK:",t);const s=Qj(pm,"hinos"),i=Fw(s,cF("orgao","==",t),uF("numero","asc")),o=await Bw(i);if(console.log("Firebase SDK query completed, documents found:",o.size),o.size===0){console.log("No documents found for exact match, checking all documents for debugging...");const c=Fw(s),u=await Bw(c);console.log("Total documents in hinos collection:",u.size);const d=new Set;u.docs.forEach(f=>{const p=f.data();p.orgao&&d.add(p.orgao)}),console.log("Available organ names in database:",Array.from(d)),console.log("Looking for organ name:",t)}const a=[];for(const c of o.docs){const u=c.data();console.log("Processing hymn:",u);let d="";if(u.audioPath&&mm)try{const p=d3(mm,u.audioPath);d=await u3(p),console.log("Got download URL:",d)}catch(p){console.error("Error getting download URL for",u.audioPath,p)}const f={numero:u.numero||0,titulo:u.titulo||"",orgao:u.orgao||"",audioPath:u.audioPath||"",audioUrl:d,criadoEm:((r=(n=(e=u.criadoEm)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||u.criadoEm||new Date().toISOString()};a.push(f)}return console.log("Final hymns processed via SDK:",a.length),a}catch(s){return console.error("Error fetching hymns by organ with Firebase SDK:",s),[]}}const j3={coral:"Coral","conjunto-musical":"Conjunto Musical",criancas:"Crianas",proat:"PROATI","uniao-adolescentes":"Unio de Adolescentes","grupo-jovem":"Grupo Jovem",comissao:"Comisso",campanha:"Campanha"};function _C(t){const[e,n]=R.useState(navigator.onLine),[r,s]=R.useState(!1),[i,o]=R.useState([]),[a,c]=R.useState(!1),[u,d]=R.useState(0);R.useEffect(()=>{const A=()=>n(!0),_=()=>n(!1);return window.addEventListener("online",A),window.addEventListener("offline",_),()=>{window.removeEventListener("online",A),window.removeEventListener("offline",_)}},[]),R.useEffect(()=>{const A=_=>{d(w=>w+1)};return window.addEventListener("hymn-added",A),()=>{window.removeEventListener("hymn-added",A)}},[]),R.useEffect(()=>{(async()=>{if(!hn&&t){c(!0);try{const _=await fetch(`/data/hymns/${t}.json`);if(_.ok){const w=await _.json();o(w)}}catch(_){console.error("Error loading fallback data:",_)}finally{c(!1)}}})()},[t]),R.useEffect(()=>{hn&&e&&!r&&s(!0)},[e,r]);const f=hk({queryKey:["hymns",t,"sdk",u],queryFn:async()=>{if(!hn)throw new Error("Firebase not configured");const A=j3[t];if(!A)throw new Error("rgo no encontrado");return await V3(A)},enabled:hn&&!!t,staleTime:3e4,retry:3});let p=[],v=[],T=!1,E=null;if(!hn)p=i,T=a,v=[];else{const A=f.data||[];v=A,p=A.map(_=>({titulo:_.titulo,url:_.audioUrl||""})),T=f.isLoading,E=f.error}return{hymns:p,firebaseHymns:v,isLoading:T,error:E,isOnline:e,hasOfflineData:!1,refetch:f==null?void 0:f.refetch}}function F3(t,e){const{hymns:n,firebaseHymns:r,isLoading:s,error:i,isOnline:o}=_C(t),a=n[e]||null,c=r[e]||null;return{hymn:a,firebaseHymn:c,isLoading:s,error:i,isOnline:o}}function wC(t){const e=R.useRef({value:t,previous:t});return R.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Iy="Checkbox",[U3,e6]=Yo(Iy),[z3,B3]=U3(Iy),EC=R.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:d,...f}=t,[p,v]=R.useState(null),T=Ot(e,k=>v(k)),E=R.useRef(!1),A=p?d||!!p.closest("form"):!0,[_=!1,w]=Ox({prop:s,defaultProp:i,onChange:u}),C=R.useRef(_);return R.useEffect(()=>{const k=p==null?void 0:p.form;if(k){const L=()=>w(C.current);return k.addEventListener("reset",L),()=>k.removeEventListener("reset",L)}},[p,w]),g.jsxs(z3,{scope:n,state:_,disabled:a,children:[g.jsx(xt.button,{type:"button",role:"checkbox","aria-checked":gs(_)?"mixed":_,"aria-required":o,"data-state":IC(_),"data-disabled":a?"":void 0,disabled:a,value:c,...f,ref:T,onKeyDown:it(t.onKeyDown,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:it(t.onClick,k=>{w(L=>gs(L)?!0:!L),A&&(E.current=k.isPropagationStopped(),E.current||k.stopPropagation())})}),A&&g.jsx($3,{control:p,bubbles:!E.current,name:r,value:c,checked:_,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:gs(i)?!1:i})]})});EC.displayName=Iy;var TC="CheckboxIndicator",xC=R.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=B3(TC,n);return g.jsx(Ng,{present:r||gs(i.state)||i.state===!0,children:g.jsx(xt.span,{"data-state":IC(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});xC.displayName=TC;var $3=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,o=R.useRef(null),a=wC(n),c=bg(e);R.useEffect(()=>{const d=o.current,f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(a!==n&&v){const T=new Event("click",{bubbles:r});d.indeterminate=gs(n),v.call(d,gs(n)?!1:n),d.dispatchEvent(T)}},[a,n,r]);const u=R.useRef(gs(n)?!1:n);return g.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...i,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function gs(t){return t==="indeterminate"}function IC(t){return gs(t)?"indeterminate":t?"checked":"unchecked"}var SC=EC,H3=xC;const CC=R.forwardRef(({className:t,...e},n)=>g.jsx(SC,{ref:n,className:Ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:g.jsx(H3,{className:Ge("flex items-center justify-center text-current"),children:g.jsx(wk,{className:"h-4 w-4"})})}));CC.displayName=SC.displayName;function q3({organKey:t}){const[,e]=Rr(),n=ac.find(p=>p.key===t),{hymns:r,isLoading:s,error:i,isOnline:o,hasOfflineData:a}=_C(t),{toggleItem:c,isProgrammed:u}=dh(),d=p=>{e(`/organ/${t}/hymn/${p}`)},f=()=>{e("/")};return n?s?g.jsx(Yt,{title:n.name,breadcrumbs:[n.name],showBackButton:!0,onBackClick:f,children:g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"h-8 w-8 mx-auto mb-4 border-2 border-church-primary border-r-transparent rounded-full animate-spin"}),g.jsx("p",{className:"text-church-text",children:"Carregando hinos..."})]})}):i&&!a?g.jsx(Yt,{title:n.name,breadcrumbs:[n.name],showBackButton:!0,onBackClick:f,children:g.jsx("div",{className:"text-center py-8",children:g.jsx("p",{className:"text-church-text text-red-600",children:"Erro ao carregar hinos. Verifique sua conexo."})})}):g.jsx(Yt,{title:n.name,breadcrumbs:[n.name],showBackButton:!0,onBackClick:f,children:g.jsx("div",{className:"max-w-4xl mx-auto",children:g.jsxs(Dt,{className:"bg-white shadow-lg overflow-hidden",children:[g.jsxs("div",{className:"bg-church-primary p-6",children:[g.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:["Hinos do ",n.name]}),g.jsxs("p",{className:"text-church-light",children:["Selecione um hino para reproduzir ou programar",!o&&a&&" (modo offline)"]})]}),g.jsx(Lt,{className:"p-6",children:r.length===0?g.jsx("div",{className:"text-center py-8",children:g.jsx("p",{className:"text-church-text opacity-75",children:"Nenhum hino encontrado para este rgo."})}):g.jsx("div",{className:"space-y-3",children:r.map((p,v)=>g.jsx(xe,{variant:"ghost",className:"w-full h-auto p-0",onClick:()=>d(v),children:g.jsx(Dt,{className:"w-full border-2 border-gray-100 hover:border-church-secondary hover:bg-church-light hover:bg-opacity-10 transition-all duration-200 group",children:g.jsx(Lt,{className:"p-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center text-left flex-1 min-w-0",children:[g.jsx("span",{className:"text-church-primary font-bold text-lg mr-3 md:mr-4 bg-church-light bg-opacity-30 w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center flex-shrink-0 text-sm md:text-lg",children:v+1}),g.jsxs("div",{className:"flex-1 min-w-0 pr-2 text-left",children:[g.jsx("h3",{className:"text-church-text font-semibold group-hover:text-church-primary text-sm md:text-base truncate text-left",children:p.titulo}),g.jsxs("p",{className:"text-church-text opacity-60 text-xs md:text-sm text-left",children:["Hino ",v+1]})]})]}),g.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2 flex-shrink-0",children:[g.jsxs("label",{className:"flex items-center space-x-1 whitespace-nowrap",onClick:T=>T.stopPropagation(),children:[g.jsx(CC,{checked:u(t,v),onCheckedChange:()=>c({organKey:t,hymnIndex:v,titulo:p.titulo})}),g.jsx("span",{className:"text-xs md:text-sm text-church-text",children:"Programar"})]}),g.jsx(QT,{className:"text-church-accent text-lg mr-1 md:mr-2 opacity-0 group-hover:opacity-100 transition-opacity h-4 w-4 md:h-5 md:w-5"}),g.jsx(KT,{className:"text-church-text opacity-40 group-hover:opacity-100 transition-opacity h-4 w-4"})]})]})})})},`hymn-${v}-${p.titulo}`))})})]})})}):g.jsx(Yt,{title:"rgo no encontrado",showBackButton:!0,onBackClick:f,children:g.jsx("div",{className:"text-center",children:g.jsx("p",{className:"text-church-text",children:"rgo no encontrado."})})})}function AC(t,[e,n]){return Math.min(n,Math.max(e,t))}var W3=R.createContext(void 0);function K3(t){const e=R.useContext(W3);return t||e||"ltr"}function G3(t){const e=t+"CollectionProvider",[n,r]=Yo(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=E=>{const{scope:A,children:_}=E,w=Vr.useRef(null),C=Vr.useRef(new Map).current;return g.jsx(s,{scope:A,itemMap:C,collectionRef:w,children:_})};o.displayName=e;const a=t+"CollectionSlot",c=ed(a),u=Vr.forwardRef((E,A)=>{const{scope:_,children:w}=E,C=i(a,_),k=Ot(A,C.collectionRef);return g.jsx(c,{ref:k,children:w})});u.displayName=a;const d=t+"CollectionItemSlot",f="data-radix-collection-item",p=ed(d),v=Vr.forwardRef((E,A)=>{const{scope:_,children:w,...C}=E,k=Vr.useRef(null),L=Ot(A,k),V=i(d,_);return Vr.useEffect(()=>(V.itemMap.set(k,{ref:k,...C}),()=>void V.itemMap.delete(k))),g.jsx(p,{[f]:"",ref:L,children:w})});v.displayName=d;function T(E){const A=i(t+"CollectionConsumer",E);return Vr.useCallback(()=>{const w=A.collectionRef.current;if(!w)return[];const C=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(A.itemMap.values()).sort((V,S)=>C.indexOf(V.ref.current)-C.indexOf(S.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:o,Slot:u,ItemSlot:v},T,r]}var RC=["PageUp","PageDown"],PC=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},aa="Slider",[gm,Q3,Y3]=G3(aa),[kC,t6]=Yo(aa,[Y3]),[X3,hh]=kC(aa),NC=R.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:v=!1,form:T,...E}=t,A=R.useRef(new Set),_=R.useRef(0),C=o==="horizontal"?J3:Z3,[k=[],L]=Ox({prop:d,defaultProp:u,onChange:N=>{var b;(b=[...A.current][_.current])==null||b.focus(),f(N)}}),V=R.useRef(k);function S(N){const O=sU(k,N);P(N,O)}function y(N){P(N,_.current)}function I(){const N=V.current[_.current];k[_.current]!==N&&p(k)}function P(N,O,{commit:b}={commit:!1}){const Z=lU(i),ye=cU(Math.round((N-r)/i)*i+r,Z),se=AC(ye,[r,s]);L((ne=[])=>{const F=nU(ne,se,O);if(aU(F,c*i)){_.current=F.indexOf(se);const H=String(F)!==String(ne);return H&&b&&p(F),H?F:ne}else return ne})}return g.jsx(X3,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:_,thumbs:A.current,values:k,orientation:o,form:T,children:g.jsx(gm.Provider,{scope:t.__scopeSlider,children:g.jsx(gm.Slot,{scope:t.__scopeSlider,children:g.jsx(C,{"aria-disabled":a,"data-disabled":a?"":void 0,...E,ref:e,onPointerDown:it(E.onPointerDown,()=>{a||(V.current=k)}),min:r,max:s,inverted:v,onSlideStart:a?void 0:S,onSlideMove:a?void 0:y,onSlideEnd:a?void 0:I,onHomeKeyDown:()=>!a&&P(r,0,{commit:!0}),onEndKeyDown:()=>!a&&P(s,k.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:O})=>{if(!a){const ye=RC.includes(N.key)||N.shiftKey&&PC.includes(N.key)?10:1,se=_.current,ne=k[se],F=i*ye*O;P(ne+F,se,{commit:!0})}}})})})})});NC.displayName=aa;var[OC,DC]=kC(aa,{startEdge:"left",endEdge:"right",size:"width",direction:1}),J3=R.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...d}=t,[f,p]=R.useState(null),v=Ot(e,C=>p(C)),T=R.useRef(void 0),E=K3(s),A=E==="ltr",_=A&&!i||!A&&i;function w(C){const k=T.current||f.getBoundingClientRect(),L=[0,k.width],S=Sy(L,_?[n,r]:[r,n]);return T.current=k,S(C-k.left)}return g.jsx(OC,{scope:t.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:g.jsx(LC,{dir:E,"data-orientation":"horizontal",...d,ref:v,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const k=w(C.clientX);o==null||o(k)},onSlideMove:C=>{const k=w(C.clientX);a==null||a(k)},onSlideEnd:()=>{T.current=void 0,c==null||c()},onStepKeyDown:C=>{const L=bC[_?"from-left":"from-right"].includes(C.key);u==null||u({event:C,direction:L?-1:1})}})})}),Z3=R.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:c,...u}=t,d=R.useRef(null),f=Ot(e,d),p=R.useRef(void 0),v=!s;function T(E){const A=p.current||d.current.getBoundingClientRect(),_=[0,A.height],C=Sy(_,v?[r,n]:[n,r]);return p.current=A,C(E-A.top)}return g.jsx(OC,{scope:t.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:g.jsx(LC,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:E=>{const A=T(E.clientY);i==null||i(A)},onSlideMove:E=>{const A=T(E.clientY);o==null||o(A)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:E=>{const _=bC[v?"from-bottom":"from-top"].includes(E.key);c==null||c({event:E,direction:_?-1:1})}})})}),LC=R.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:c,...u}=t,d=hh(aa,n);return g.jsx(xt.span,{...u,ref:e,onKeyDown:it(t.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):RC.concat(PC).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:it(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(p)?p.focus():r(f)}),onPointerMove:it(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:it(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),i(f))})})}),MC="SliderTrack",VC=R.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=hh(MC,n);return g.jsx(xt.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});VC.displayName=MC;var ym="SliderRange",jC=R.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=hh(ym,n),i=DC(ym,n),o=R.useRef(null),a=Ot(e,o),c=s.values.length,u=s.values.map(p=>UC(p,s.min,s.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return g.jsx(xt.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...t.style,[i.startEdge]:d+"%",[i.endEdge]:f+"%"}})});jC.displayName=ym;var vm="SliderThumb",FC=R.forwardRef((t,e)=>{const n=Q3(t.__scopeSlider),[r,s]=R.useState(null),i=Ot(e,a=>s(a)),o=R.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return g.jsx(eU,{...t,ref:i,index:o})}),eU=R.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...i}=t,o=hh(vm,n),a=DC(vm,n),[c,u]=R.useState(null),d=Ot(e,w=>u(w)),f=c?o.form||!!c.closest("form"):!0,p=bg(c),v=o.values[r],T=v===void 0?0:UC(v,o.min,o.max),E=rU(r,o.values.length),A=p==null?void 0:p[a.size],_=A?iU(A,T,a.direction):0;return R.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${T}% + ${_}px)`},children:[g.jsx(gm.ItemSlot,{scope:t.__scopeSlider,children:g.jsx(xt.span,{role:"slider","aria-label":t["aria-label"]||E,"aria-valuemin":o.min,"aria-valuenow":v,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:v===void 0?{display:"none"}:t.style,onFocus:it(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&g.jsx(tU,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:v},r)]})});FC.displayName=vm;var tU=t=>{const{value:e,...n}=t,r=R.useRef(null),s=wC(e);return R.useEffect(()=>{const i=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==e&&c){const u=new Event("input",{bubbles:!0});c.call(i,e),i.dispatchEvent(u)}},[s,e]),g.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function nU(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,i)=>s-i)}function UC(t,e,n){const i=100/(n-e)*(t-e);return AC(i,[0,100])}function rU(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function sU(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function iU(t,e,n){const r=t/2,i=Sy([0,50],[0,r]);return(r-i(e)*n)*n}function oU(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function aU(t,e){if(e>0){const n=oU(t);return Math.min(...n)>=e}return!0}function Sy(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function lU(t){return(String(t).split(".")[1]||"").length}function cU(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var zC=NC,uU=VC,dU=jC,hU=FC;const _m=R.forwardRef(({className:t,...e},n)=>g.jsxs(zC,{ref:n,className:Ge("relative flex w-full touch-none select-none items-center",t),...e,children:[g.jsx(uU,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:g.jsx(dU,{className:"absolute h-full bg-primary"})}),g.jsx(hU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_m.displayName=zC.displayName;function fU({hymn:t,onError:e,onPlay:n}){const r=R.useRef(null),[s,i]=R.useState(!1),[o,a]=R.useState(0),[c,u]=R.useState(0),[d,f]=R.useState(50),[p,v]=R.useState(!1),[T,E]=R.useState(!0);R.useEffect(()=>{const y=r.current;if(!y)return;if(!t.url||t.url.trim()===""){E(!1),e==null||e("URL do udio no disponvel. Tente sincronizar novamente.");return}const I=y.src,P=t.url;if(I!==P){E(!0),i(!1),a(0),u(0),y.removeAttribute("src"),y.load();const H=P.trim().replace(/\n/g,"").replace(/\r/g,"").replace(/\s+/g," ").trim();try{H.includes("firebasestorage.googleapis.com"),y.removeAttribute("crossOrigin"),y.src=H,y.load()}catch{e==null||e("Erro ao carregar udio. Tente novamente.")}}const N=()=>{u(y.duration),E(!1)},O=()=>a(y.currentTime),b=()=>{i(!1),a(0)},Z=()=>{E(!1),e==null||e("Erro ao reproduzir o udio. Faa deploy da aplicao.")},ye=()=>E(!0),se=()=>E(!1),ne=()=>i(!0),F=()=>i(!1);return y.addEventListener("loadedmetadata",N),y.addEventListener("timeupdate",O),y.addEventListener("ended",b),y.addEventListener("error",Z),y.addEventListener("loadstart",ye),y.addEventListener("canplay",se),y.addEventListener("play",ne),y.addEventListener("pause",F),()=>{try{y.removeEventListener("loadedmetadata",N),y.removeEventListener("timeupdate",O),y.removeEventListener("ended",b),y.removeEventListener("error",Z),y.removeEventListener("loadstart",ye),y.removeEventListener("canplay",se),y.removeEventListener("play",ne),y.removeEventListener("pause",F)}catch{}}},[t.url,e]),R.useEffect(()=>{const y=r.current;y&&(y.volume=p?0:d/100)},[d,p]);const A=async()=>{const y=r.current;if(y)try{s?y.pause():(await y.play(),n==null||n(),i(!0))}catch(I){e==null||e(`Erro ao reproduzir o udio: ${I.message}`)}},_=y=>{const I=r.current;if(I&&c>0){const P=y[0]/100*c;I.currentTime=P,a(P)}},w=()=>{const y=r.current;y&&(y.currentTime=Math.max(0,y.currentTime-10))},C=()=>{const y=r.current;y&&(y.currentTime=Math.min(c,y.currentTime+10))},k=()=>v(!p),L=y=>{const I=y[0];f(I);const P=r.current;P&&(P.volume=p?0:I/100)},V=y=>{const I=Math.floor(y/60),P=Math.floor(y%60);return`${I}:${P.toString().padStart(2,"0")}`},S=c>0?o/c*100:0;return!t.url||t.url.trim()===""?g.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:g.jsxs("div",{className:"bg-gradient-to-r from-church-primary to-church-secondary p-8 text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t.titulo}),g.jsx("p",{className:"text-church-light",children:"udio no disponvel. Tente sincronizar novamente."})]})}):g.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[g.jsxs("div",{className:"bg-gradient-to-r from-church-primary to-church-secondary p-8 text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t.titulo}),g.jsx("p",{className:"text-church-light",children:T?"Carregando...":"Pronto para reproduzir"})]}),g.jsxs("div",{className:"p-8",children:[g.jsx("audio",{ref:r,preload:"metadata",crossOrigin:"anonymous",controls:!1,children:"Seu navegador no suporta o elemento de udio."}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("div",{className:"flex justify-between text-sm text-church-text mb-2",children:[g.jsx("span",{children:V(o)}),g.jsx("span",{children:V(c)})]}),g.jsx(_m,{value:[S],onValueChange:_,max:100,step:1,className:"w-full"})]}),g.jsxs("div",{className:"flex items-center justify-center space-x-6 mb-6",children:[g.jsx(xe,{variant:"ghost",size:"lg",onClick:w,disabled:T,className:"text-church-secondary hover:text-church-primary",children:g.jsx(Nk,{className:"h-6 w-6"})}),g.jsx(xe,{onClick:A,disabled:T,className:"bg-church-primary hover:bg-church-secondary text-white rounded-full w-16 h-16 shadow-lg",size:"lg",children:s?g.jsx(bk,{className:"h-6 w-6"}):g.jsx(QT,{className:"h-6 w-6 ml-1"})}),g.jsx(xe,{variant:"ghost",size:"lg",onClick:C,disabled:T,className:"text-church-secondary hover:text-church-primary",children:g.jsx(Ok,{className:"h-6 w-6"})})]}),s&&g.jsx("div",{className:"audio-visualizer flex justify-center items-center mb-4 h-12",children:g.jsx("div",{className:"flex items-end space-x-1",children:[...Array(15)].map((y,I)=>g.jsx("div",{className:"bg-gradient-to-t from-church-primary to-church-secondary rounded-t-sm equalizer-bar",style:{width:"4px",height:`${8+I%3*4}px`,animationDelay:`${I*.1}s`,animationDuration:`${.5+I%3*.2}s`}},I))})}),g.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[g.jsx(xe,{variant:"ghost",size:"sm",onClick:k,className:"text-church-text",children:p?g.jsx(Fk,{className:"h-4 w-4"}):g.jsx(jk,{className:"h-4 w-4"})}),g.jsx("div",{className:"w-32",children:g.jsx(_m,{value:[d],onValueChange:L,max:100,step:1,className:"w-full"})}),g.jsxs("span",{className:"text-xs text-church-text w-8",children:[d,"%"]},`volume-${d}`)]})]})]})}function pU({onRetry:t}){return g.jsxs(Dt,{className:"w-full max-w-md mx-auto border-red-200",children:[g.jsxs(Sr,{className:"text-center",children:[g.jsx("div",{className:"mx-auto mb-2 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:g.jsx(Eg,{className:"w-6 h-6 text-red-600"})}),g.jsx(Cr,{className:"text-red-800",children:"Problema de Conexo"})]}),g.jsxs(Lt,{className:"text-center space-y-4",children:[g.jsx("p",{className:"text-gray-700 text-sm",children:"Este problema ocorre porque estamos em ambiente de desenvolvimento. Para ouvir os hinos, a aplicao precisa ser implantada."}),g.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-left",children:[g.jsx("h4",{className:"font-semibold text-blue-800 text-sm mb-2",children:"Soluo:"}),g.jsx("p",{className:"text-blue-700 text-xs",children:"Implante a aplicao no Firebase Hosting para resolver automaticamente os problemas de CORS e permitir a reproduo de udio."})]}),t&&g.jsx(xe,{onClick:t,variant:"outline",size:"sm",className:"w-full",children:"Tentar Novamente"}),g.jsx("div",{className:"text-xs text-gray-500",children:g.jsx("p",{children:"Cdigo do erro: CORS/Media Element"})})]})]})}function mU({organKey:t,hymnIndex:e}){const[,n]=Rr(),[r,s]=R.useState(null),[i,o]=R.useState(!1),a=ac.find(_=>_.key===t),c=parseInt(e,10),{hymn:u,isLoading:d,error:f,isOnline:p}=F3(t,c),{removeItem:v}=dh(),T=()=>{n(`/organ/${t}`)},E=_=>{console.error("Audio player error:",_),s(_),(_.includes("CORS")||_.includes("Media Element")||_.includes("deploy")||_.includes("formato"))&&o(!0)},A=()=>{s(null),o(!1)};return a?d?g.jsx(Yt,{title:"Carregando...",breadcrumbs:[a.name,"Carregando..."],showBackButton:!0,onBackClick:T,children:g.jsxs("div",{className:"max-w-2xl mx-auto text-center py-8",children:[g.jsx("div",{className:"h-8 w-8 mx-auto mb-4 border-2 border-church-primary border-r-transparent rounded-full animate-spin"}),g.jsx("p",{className:"text-church-text",children:"Carregando hino..."})]})}):f?g.jsx(Yt,{title:"Erro",breadcrumbs:[a.name,"Erro"],showBackButton:!0,onBackClick:T,children:g.jsx("div",{className:"max-w-2xl mx-auto text-center py-8",children:g.jsx("p",{className:"text-church-text text-red-600",children:"Erro ao carregar hino. Verifique sua conexo."})})}):u?g.jsx(Yt,{title:u.titulo,breadcrumbs:[a.name,u.titulo],showBackButton:!0,onBackClick:T,children:g.jsxs("div",{className:"max-w-2xl mx-auto",children:[i?g.jsx(pU,{onRetry:A}):g.jsx(fU,{hymn:u,onError:E,onPlay:()=>v(t,c)}),r&&!i&&g.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center mt-4",children:g.jsx("p",{className:"text-red-800 text-sm",children:r})}),!p&&g.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:g.jsx("p",{className:"text-sm text-blue-800",children:" Reproduzindo em modo offline"})})]})}):g.jsx(Yt,{title:"Hino no encontrado",breadcrumbs:[a.name,"Hino no encontrado"],showBackButton:!0,onBackClick:T,children:g.jsx("div",{className:"max-w-2xl mx-auto text-center",children:g.jsx("p",{className:"text-church-text",children:"Hino no encontrado."})})}):g.jsx(Yt,{title:"rgo no encontrado",showBackButton:!0,onBackClick:()=>n("/"),children:g.jsx("div",{className:"text-center",children:g.jsx("p",{className:"text-church-text",children:"rgo no encontrado."})})})}const Ml=R.forwardRef(({className:t,type:e,...n},r)=>g.jsx("input",{type:e,className:Ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ml.displayName="Input";var gU="Label",BC=R.forwardRef((t,e)=>g.jsx(xt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));BC.displayName=gU;var $C=BC;const yU=xy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),mo=R.forwardRef(({className:t,...e},n)=>g.jsx($C,{ref:n,className:Ge(yU(),t),...e}));mo.displayName=$C.displayName;const HC="app-hinos",ur="app-hinos.firebasestorage.app";async function Vl(){if(!(zt!=null&&zt.currentUser))throw new Error("User not authenticated");try{const t=await zt.currentUser.getIdToken(!0);return console.log("Auth token obtained successfully"),t}catch(t){throw console.error("Failed to get auth token:",t),new Error("Failed to get authentication token")}}async function vU(t,e,n){try{if(console.log("Starting upload for file:",t.name,"size:",t.size,"type:",t.type),console.log("Upload path:",e),!t)throw new Error("No file provided for upload");if(!t.type.startsWith("audio/"))throw new Error("File must be an audio file");const r=await Vl();console.log("Got auth token, proceeding with upload..."),console.log("Original STORAGE_BUCKET:",ur);const s=e.startsWith("hinos/")?e:`hinos/${e}`,i=`https://firebasestorage.googleapis.com/v0/b/${ur}/o?name=${encodeURIComponent(s)}`;return console.log("Upload URL:",i),console.log("Clean path:",s),console.log("Storage bucket:",ur),new Promise((o,a)=>{const c=new XMLHttpRequest;c.upload.addEventListener("progress",u=>{if(u.lengthComputable){const d=u.loaded/u.total*100;console.log(`Upload progress: ${d.toFixed(1)}%`),n==null||n(d)}}),c.addEventListener("load",()=>{console.log("Upload completed with status:",c.status),console.log("Upload response:",c.responseText);try{if(c.status===200){const u=JSON.parse(c.responseText);console.log("Upload successful, response:",u),o(u.name||s)}else{const u=c.responseText||c.statusText;console.error("Upload error response:",u),console.error("Upload error status:",c.status),a(new Error(`Upload failed: ${c.status} ${u}`))}}catch(u){console.error("Error parsing upload response:",u),console.error("Raw response text:",c.responseText),a(new Error("Invalid response from upload server"))}}),c.addEventListener("error",u=>{console.error("Upload network error:",u),console.error("XHR error details:",c.status,c.statusText),a(new Error(`Upload failed due to network error: ${c.status} ${c.statusText}`))}),c.addEventListener("timeout",()=>{console.error("Upload timeout"),a(new Error("Upload timeout"))}),c.open("POST",i),c.setRequestHeader("Authorization",`Bearer ${r}`),c.setRequestHeader("Content-Type",t.type),c.timeout=6e4,console.log("Sending file via XHR..."),c.send(t)})}catch(r){console.error("Error in uploadFileToStorage:",r);const s=r instanceof Error?r.message:"Unknown error",i=r instanceof Error?r.stack:void 0;throw console.error("Error details:",s,i),new Error(`Upload setup failed: ${s}`)}}async function _U(t){try{const e=t.startsWith("hinos/")?t:`hinos/${t}`;try{const s=await Vl(),i=`https://firebasestorage.googleapis.com/v0/b/${ur}/o/${encodeURIComponent(e)}`;console.log("Getting file metadata from:",i);const o=await fetch(i,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(o.ok){const a=await o.json();if(console.log("File metadata:",a),a.downloadTokens){const c=`https://firebasestorage.googleapis.com/v0/b/${ur}/o/${encodeURIComponent(e)}?alt=media&token=${a.downloadTokens}`;return console.log("Using authenticated URL:",c),c}}}catch(s){console.log("Metadata fetch failed, trying direct URL:",s)}const n=`https://firebasestorage.googleapis.com/v0/b/${ur}/o/${encodeURIComponent(e)}?alt=media`;console.log("Trying public URL:",n);const r=await fetch(n,{method:"HEAD"});if(r.ok)return console.log("Public URL works:",n),n;{console.log("Public URL failed, status:",r.status);const s=await Vl(),i=`https://firebasestorage.googleapis.com/v0/b/${ur}/o/${encodeURIComponent(e)}?alt=media&token=${s}`;return console.log("Using auth URL:",i),i}}catch(e){console.error("Error getting download URL:",e);const n=t.startsWith("hinos/")?t:`hinos/${t}`,r=`https://firebasestorage.googleapis.com/v0/b/${ur}/o/${encodeURIComponent(n)}?alt=media`;return console.log("Using fallback URL:",r),r}}async function wU(t,e){try{const n=await Vl();console.log("Adding document to collection:",t,"Data:",e);const r=`https://firestore.googleapis.com/v1/projects/${HC}/databases/(default)/documents/${t}`,s={fields:{numero:{integerValue:e.numero.toString()},titulo:{stringValue:e.titulo},orgao:{stringValue:e.orgao},audioPath:{stringValue:e.audioPath},criadoEm:{timestampValue:new Date().toISOString()}}};console.log("Firestore payload:",JSON.stringify(s,null,2));const i=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await i.text();if(console.log("Firestore response status:",i.status),console.log("Firestore response text:",o),!i.ok)throw new Error(`Firestore write failed: ${i.status} - ${o}`);return JSON.parse(o).name.split("/").pop()}catch(n){throw console.error("Error in addDocumentToFirestore:",n),n}}async function qC(t,e,n){try{const r=await Vl();console.log("Getting documents from collection:",t);let s=`https://firestore.googleapis.com/v1/projects/${HC}/databases/(default)/documents/${t}`;const i=await fetch(s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!i.ok){const a=await i.text();throw console.error("Firestore read error:",i.status,a),new Error(`Firestore read failed: ${i.status} - ${a}`)}const o=await i.json();return console.log("Firestore response:",o),o.documents?o.documents.map(a=>({id:a.name.split("/").pop(),numero:parseInt(a.fields.numero.integerValue),titulo:a.fields.titulo.stringValue,orgao:a.fields.orgao.stringValue,audioPath:a.fields.audioPath.stringValue.trim(),criadoEm:new Date(a.fields.criadoEm.timestampValue)})):[]}catch(r){throw console.error("Error in getDocumentsFromFirestore:",r),r}}async function EU(t){try{console.log("Getting next hymn number for organ:",t);const e=await qC("hinos");console.log("Total hymns found:",e.length);const n=e.filter(i=>i.orgao===t);if(console.log("Hymns for organ",t,":",n.length),n.length===0)return console.log("No hymns found for organ, starting with 1"),1;const s=Math.max(...n.map(i=>i.numero))+1;return console.log("Next hymn number will be:",s),s}catch(e){return console.error("Error getting hymn number:",e),console.warn("Using random number as fallback"),Math.floor(Math.random()*9e3)+1e3}}const WC="hinos";async function TU(t,e,n,r){var s,i,o,a;try{if(r==null||r(5,"Verificando autenticao..."),await Ty,!(zt!=null&&zt.currentUser))throw new Error("Usurio no autenticado. Recarregue a pgina e tente novamente.");r==null||r(10,"Calculando nmero do hino...");let c;try{c=await EU(e)}catch(f){console.warn("Error getting hymn number, using random:",f),c=Math.floor(Math.random()*9e3)+1e3}const u=`hinos/${e.toLowerCase().replace(/\s+/g,"-")}-${c}-${Date.now()}.mp3`;r==null||r(15,"Iniciando upload do arquivo...");try{console.log("About to upload file:",n.name,"to path:",u),await vU(n,u,f=>{const p=f*.65+15;r==null||r(p,`Enviando arquivo... ${Math.round(f)}%`)}),console.log("Upload completed successfully"),r==null||r(80,"Upload do arquivo concludo")}catch(f){throw console.error("Upload error:",f),console.error("Upload error type:",typeof f),console.error("Upload error message:",f==null?void 0:f.message),console.error("Upload error stack:",f==null?void 0:f.stack),(s=f==null?void 0:f.message)!=null&&s.includes("unauthorized")?new Error("Sem permisso para upload. Verifique as regras do Firebase Storage."):(i=f==null?void 0:f.message)!=null&&i.includes("network")?new Error("Erro de conexo no upload. Verifique sua internet."):new Error(`Erro no upload: ${(f==null?void 0:f.message)||JSON.stringify(f)||"Erro desconhecido"}`)}r==null||r(85,"Salvando informaes do hino...");let d;try{d=await wU(WC,{numero:c,titulo:t,orgao:e,audioPath:u})}catch(f){console.error("Firestore error:",f);try{console.warn("Upload successful but Firestore save failed. Manual cleanup may be needed.")}catch(p){console.warn("Could not clean up uploaded file:",p)}throw(o=f.message)!=null&&o.includes("permission")?new Error("Sem permisso para salvar no Firestore. Verifique as regras do Firebase."):(a=f.message)!=null&&a.includes("401")?new Error("Erro de autenticao. Recarregue a pgina e tente novamente."):new Error(`Erro ao salvar no Firestore: ${f.message||"Erro desconhecido"}`)}r==null||r(95,"Atualizando dados locais...");try{await IU()}catch(f){console.warn("Failed to refresh offline data:",f)}return r==null||r(100,"Hino adicionado com sucesso!"),d}catch(c){throw console.error("Error adding hymn:",c),new Error(c.message||"Erro ao adicionar hino")}}async function xU(){try{await Ty;const t=await qC(WC),e=[];for(const n of t)try{let r;n.audioPath.startsWith("http")?r=n.audioPath:r=await _U(n.audioPath),e.push({numero:n.numero,titulo:n.titulo,orgao:n.orgao,audioUrl:r,criadoEm:n.criadoEm})}catch(r){console.warn(`Failed to get URL for hymn ${n.numero}:`,r),e.push({numero:n.numero,titulo:n.titulo,orgao:n.orgao,audioUrl:"",criadoEm:n.criadoEm})}localStorage.setItem("hymns_offline_data",JSON.stringify(e)),localStorage.setItem("hymns_last_sync",new Date().toISOString()),console.log("Offline data initialized with",e.length,"hymns")}catch(t){throw console.error("Error initializing offline data:",t),new Error("Erro ao inicializar dados offline")}}async function IU(){await xU()}var Cy="Progress",Ay=100,[SU,n6]=Yo(Cy),[CU,AU]=SU(Cy),KC=R.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=RU,...o}=t;(s||s===0)&&!Xw(s)&&console.error(PU(`${s}`,"Progress"));const a=Xw(s)?s:Ay;r!==null&&!Jw(r,a)&&console.error(bU(`${r}`,"Progress"));const c=Jw(r,a)?r:null,u=Td(c)?i(c,a):void 0;return g.jsx(CU,{scope:n,value:c,max:a,children:g.jsx(xt.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Td(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":YC(c,a),"data-value":c??void 0,"data-max":a,...o,ref:e})})});KC.displayName=Cy;var GC="ProgressIndicator",QC=R.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=AU(GC,n);return g.jsx(xt.div,{"data-state":YC(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});QC.displayName=GC;function RU(t,e){return`${Math.round(t/e*100)}%`}function YC(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Td(t){return typeof t=="number"}function Xw(t){return Td(t)&&!isNaN(t)&&t>0}function Jw(t,e){return Td(t)&&!isNaN(t)&&t<=e&&t>=0}function PU(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ay}\`.`}function bU(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ay} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var XC=KC,kU=QC;const JC=R.forwardRef(({className:t,value:e,...n},r)=>g.jsx(XC,{ref:r,className:Ge("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:g.jsx(kU,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));JC.displayName=XC.displayName;function ZC(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[s,i]=R.useState(null),[o,a]=R.useState(!1),[c,u]=R.useState(0),[d,f]=R.useState(""),p=10*1024*1024,v=R.useCallback(E=>{var A;try{const _=(A=E.target.files)==null?void 0:A[0];if(_){if(!_.type.startsWith("audio/")){Oi("Por favor, selecione um arquivo de udio vlido.","error");return}if(_.size>p){Oi(`Arquivo muito grande. Mximo ${Math.round(p/(1024*1024))}MB, atual: ${Math.round(_.size/(1024*1024))}MB`,"error");return}i(_),u(0),f("")}}catch(_){console.warn("File change error:",_),Oi("Erro ao processar o arquivo selecionado.","error")}},[p]),T=R.useCallback(async E=>{if(E.preventDefault(),!t||!n||!s){Oi("Por favor, preencha todos os campos.","error");return}if(!o){a(!0),u(0),f("Iniciando upload...");try{const _=await TU(t,n,s,(w,C)=>{u(w),f(C)});u(100),f("Upload concludo!"),Oi("Hino adicionado com sucesso!","success"),e(""),r(""),i(null),u(0),f("");try{const w=document.getElementById("audioFile");w&&(w.value="")}catch(w){console.warn("File input reset error:",w)}setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("hymn-added",{detail:{docId:_,orgao:n}}))}catch(w){console.warn("Event dispatch error:",w)}},100)}catch(A){console.error("Error adding hymn:",A),u(0),f(""),Oi(typeof(A==null?void 0:A.message)=="string"?A.message:"Erro ao adicionar hino. Verifique sua conexo e tente novamente.","error")}finally{a(!1)}}},[t,n,s]);return g.jsxs(Dt,{className:"w-full max-w-md",children:[g.jsx(Sr,{children:g.jsx(Cr,{className:"text-church-primary",children:"Adicionar Hino"})}),g.jsx(Lt,{children:g.jsxs("form",{onSubmit:T,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(mo,{htmlFor:"titulo",children:"Ttulo do Hino"}),g.jsx(Ml,{id:"titulo",type:"text",value:t,onChange:E=>e(E.target.value),placeholder:"Digite o ttulo do hino",required:!0})]}),g.jsxs("div",{children:[g.jsx(mo,{htmlFor:"orgao",children:"rgo"}),g.jsxs("select",{value:n,onChange:E=>r(E.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[g.jsx("option",{value:"",children:"Selecione o rgo"}),ac.map(E=>g.jsx("option",{value:E.name,children:E.name},E.key))]})]}),g.jsxs("div",{children:[g.jsx(mo,{htmlFor:"audioFile",children:"Arquivo de udio"}),g.jsx(Ml,{id:"audioFile",type:"file",accept:"audio/*",onChange:v,required:!0}),s&&g.jsxs("div",{className:"mt-1",children:[g.jsxs("p",{className:"text-sm text-gray-600",children:["Arquivo selecionado: ",s.name]}),g.jsxs("p",{className:"text-xs text-gray-500",children:["Tamanho: ",Math.round(s.size/(1024*1024)*100)/100,"MB"]})]}),o&&g.jsxs("div",{className:"mt-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("div",{className:"h-4 w-4 border-2 border-church-primary border-r-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-sm text-gray-600",children:d})]}),g.jsx(JC,{value:c,className:"w-full"}),g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(c),"% concludo"]})]})]}),g.jsx(xe,{type:"submit",className:"w-full bg-church-primary hover:bg-church-secondary",disabled:o,children:o?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-r-transparent rounded-full animate-spin"}),"Enviando..."]}):g.jsxs(g.Fragment,{children:[g.jsx(Lk,{className:"w-4 h-4 mr-2"}),"Adicionar Hino"]})})]})})]})}const NU={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyAWLbxmvwAKx1_rXS_4qMcZWttCRbPsyF4",VITE_FIREBASE_APP_ID:"1:1070834473436:web:ff068364f18cb587f25719",VITE_FIREBASE_AUTH_DOMAIN:"app-hinos.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"1070834473436",VITE_FIREBASE_PROJECT_ID:"app-hinos",VITE_FIREBASE_STORAGE_BUCKET:"app-hinos.firebasestorage.app"};function OU(){const[t,e]=R.useState({hasConfig:!1,missingVars:[],isValid:!1});return R.useEffect(()=>{const r=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"].filter(i=>{const o=NU[i];return!o||o.startsWith("your_")}),s=r.length===0;e({hasConfig:s,missingVars:r,isValid:s})},[]),t}function eA(){const{hasConfig:t,missingVars:e}=OU();return t?null:g.jsx(Dt,{className:"border-yellow-200 bg-yellow-50",children:g.jsx(Lt,{className:"p-4",children:g.jsxs("div",{className:"flex items-start space-x-2",children:[g.jsx(Dk,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-yellow-800 font-medium mb-2",children:"Configurao do Firebase Necessria"}),g.jsx("p",{className:"text-yellow-700 text-sm mb-3",children:"O sistema est funcionando com dados locais. Para habilitar a sincronizao com Firebase, configure as seguintes variveis de ambiente:"}),g.jsx("ul",{className:"text-yellow-700 text-xs space-y-1",children:e.map(n=>g.jsxs("li",{className:"flex items-center space-x-1",children:[g.jsx(Tk,{className:"h-3 w-3"}),g.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:n})]},n))}),g.jsx("div",{className:"mt-3",children:g.jsx(xe,{size:"sm",variant:"outline",className:"text-yellow-800 border-yellow-300 hover:bg-yellow-100",onClick:()=>window.open("/admin","_blank"),children:"Ver instrues completas"})})]})]})})})}function tA({children:t}){const{user:e,loading:n}=ic(),[,r]=Rr();return R.useEffect(()=>{!n&&!e&&r("/login")},[e,n,r]),n?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"Verificando autenticao..."})]})}):e?g.jsx(g.Fragment,{children:t}):null}function DU(){const{user:t,logout:e}=ic(),[,n]=Rr(),r=async()=>{try{await e(),n("/")}catch(s){console.error("Logout error:",s)}};return g.jsx(Yt,{title:"Adicionar Hinos",showBackButton:!0,children:g.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[g.jsx("div",{className:"flex justify-end items-center",children:t&&g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{className:"text-sm text-gray-700",children:[g.jsx("strong",{children:"Usurio:"})," ",t.email]}),g.jsxs(xe,{variant:"outline",size:"sm",onClick:r,className:"text-red-600 border-red-300 hover:bg-red-50",children:[g.jsx(GT,{className:"h-4 w-4 mr-2"}),"Sair"]})]})}),g.jsx(eA,{}),g.jsx("div",{className:"flex justify-center",children:hn?g.jsx(ZC,{}):g.jsxs(Dt,{children:[g.jsx(Sr,{children:g.jsx(Cr,{className:"text-church-primary",children:"Adicionar Hino"})}),g.jsx(Lt,{children:g.jsx("p",{className:"text-gray-600 text-sm",children:"Configure o Firebase para adicionar novos hinos."})})]})})]})})}function LU(){return g.jsx(tA,{children:g.jsx(DU,{})})}function MU(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[s,i]=R.useState(!1),[o,a]=R.useState(!1),[c,u]=R.useState(""),[d,f]=R.useState(!1),{login:p}=ic(),[,v]=Rr();R.useEffect(()=>{const E=MI(),A=SI(E,_=>{_&&!d&&(f(!0),a(!1),setTimeout(()=>{v("/config")},100))});return()=>A()},[v,d]);const T=async E=>{if(E.preventDefault(),!(o||d)){a(!0),u("");try{await p(t,n)}catch(A){console.error("Login failed:",A),f(!1),A.code==="auth/user-not-found"?u("Usurio no encontrado"):A.code==="auth/wrong-password"?u("Senha incorreta"):A.code==="auth/invalid-email"?u("Email invlido"):A.code==="auth/too-many-requests"?u("Muitas tentativas. Tente novamente mais tarde"):u("Erro ao fazer login. Tente novamente"),a(!1)}}};return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:g.jsxs("div",{className:"w-full max-w-md",children:[g.jsxs(xe,{variant:"ghost",onClick:()=>v("/"),className:"mb-6 text-gray-600 hover:text-gray-900",children:[g.jsx(WT,{className:"h-4 w-4 mr-2"}),"Voltar ao incio"]}),g.jsxs(Dt,{className:"shadow-lg",children:[g.jsxs(Sr,{className:"text-center",children:[g.jsx(Cr,{className:"text-2xl font-bold text-gray-900",children:"Entrar"}),g.jsx(oc,{children:"Faa login para acessar a rea de administrao"})]}),g.jsxs(Lt,{children:[g.jsxs("form",{onSubmit:T,className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(mo,{htmlFor:"email",children:"Email"}),g.jsx(Ml,{id:"email",type:"email",value:t,onChange:E=>e(E.target.value),placeholder:"seu@email.com",required:!0,disabled:o})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(mo,{htmlFor:"password",children:"Senha"}),g.jsxs("div",{className:"relative",children:[g.jsx(Ml,{id:"password",type:s?"text":"password",value:n,onChange:E=>r(E.target.value),placeholder:"Sua senha",required:!0,disabled:o}),g.jsx(xe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!s),disabled:o,children:s?g.jsx(xk,{className:"h-4 w-4"}):g.jsx(Ik,{className:"h-4 w-4"})})]})]}),c&&g.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:c}),g.jsx(xe,{type:"submit",className:"w-full",disabled:o||d||!t||!n,children:d?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Redirecionando..."]}):o?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Entrando..."]}):"Entrar"})]}),g.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:g.jsx("p",{children:"Use suas credenciais de administrador"})})]})]})]})})}function VU(){const{user:t,logout:e}=ic(),[,n]=Rr(),{toast:r}=vC(),[s,i]=R.useState(null),[o,a]=R.useState(0),[c,u]=R.useState(!1),[d,f]=R.useState(!1),[p,v]=R.useState(!1);R.useEffect(()=>{T()},[]);const T=async()=>{const k=await w3();i(k);const L=await bt.getCacheSize();a(L)},E=async()=>{try{await e(),n("/")}catch(k){console.error("Logout error:",k)}},A=async()=>{u(!0);try{await bt.checkForUpdates()?(r({title:"Atualizaes encontradas!",description:"Baixando novos hinos automaticamente..."}),localStorage.removeItem("pwa_hymns_prefetched"),await bt.prefetchHymns(),await T(),localStorage.setItem("pwa_hymns_prefetched","true"),r({title:"Hinos atualizados!",description:"Os novos hinos foram baixados. O app ser recarregado."}),setTimeout(()=>{window.location.reload()},2e3)):r({title:"Verificao concluda",description:"Voc est usando a verso mais recente."})}catch{r({title:"Erro ao verificar atualizaes",description:"Tente novamente mais tarde.",variant:"destructive"})}finally{u(!1)}},_=async()=>{v(!0);try{await bt.prefetchHymns(),await T(),r({title:"Download concludo",description:"Todos os hinos foram baixados para uso offline."}),localStorage.setItem("pwa_hymns_prefetched","true")}catch{r({title:"Erro ao baixar hinos",description:"Tente novamente mais tarde.",variant:"destructive"})}finally{v(!1)}},w=async()=>{if(confirm("Tem certeza que deseja limpar todo o cache? Isso remover todos os hinos salvos offline.")){f(!0);try{await bt.clearCache(),await T(),r({title:"Cache limpo",description:"Todo o contedo em cache foi removido."}),setTimeout(()=>{window.location.reload()},1500)}catch{r({title:"Erro ao limpar cache",description:"Tente novamente mais tarde.",variant:"destructive"})}finally{f(!1)}}},C=k=>{if(k===0)return"0 Bytes";const L=1024,V=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(k)/Math.log(L));return Math.round(k/Math.pow(L,S)*100)/100+" "+V[S]};return g.jsx(Yt,{title:"Adicionar Hinos",showBackButton:!0,children:g.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[g.jsx("div",{className:"flex justify-end items-center",children:t&&g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{className:"text-sm text-gray-700",children:[g.jsx("strong",{children:"Usurio:"})," ",t.email]}),g.jsxs(xe,{variant:"outline",size:"sm",onClick:E,className:"text-red-600 border-red-300 hover:bg-red-50",children:[g.jsx(GT,{className:"h-4 w-4 mr-2"}),"Sair"]})]})}),g.jsx(eA,{}),g.jsxs(Dt,{children:[g.jsxs(Sr,{children:[g.jsxs(Cr,{className:"flex items-center gap-2",children:[g.jsx(Zu,{className:"h-5 w-5"}),"Configuraes do App"]}),g.jsx(oc,{children:"Gerencie o cache offline e atualizaes do app"})]}),g.jsxs(Lt,{className:"space-y-4",children:[s&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx(Ak,{className:"h-4 w-4"}),"Armazenamento usado"]}),g.jsx("span",{className:"font-medium",children:C(o)})]}),g.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[g.jsx("span",{children:"Espao disponvel"}),g.jsx("span",{children:C(s.quota-s.usage)})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:g.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${o/s.quota*100}%`}})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[g.jsxs(xe,{onClick:_,disabled:p,variant:"default",className:"w-full","data-testid":"button-download-hymns",children:[g.jsx(Zu,{className:`h-4 w-4 mr-2 ${p?"animate-bounce":""}`}),p?"Baixando...":"Baixar Todos os Hinos"]}),g.jsxs(xe,{onClick:A,disabled:c,variant:"outline",className:"w-full","data-testid":"button-check-updates",children:[g.jsx(YT,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),c?"Verificando...":"Verificar Atualizaes"]}),g.jsxs(xe,{onClick:w,disabled:d,variant:"outline",className:"w-full text-red-600 border-red-300 hover:bg-red-50 md:col-span-2","data-testid":"button-clear-cache",children:[g.jsx(XT,{className:"h-4 w-4 mr-2"}),d?"Limpando...":"Limpar Cache"]})]}),g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"O app funciona offline armazenando os hinos em cache. Verificamos automaticamente por atualizaes a cada 5 minutos quando voc est online."})]})]}),g.jsx("div",{className:"flex justify-center",children:hn?g.jsx(ZC,{}):g.jsxs(Dt,{children:[g.jsx(Sr,{children:g.jsx(Cr,{className:"text-church-primary",children:"Adicionar Hino"})}),g.jsx(Lt,{children:g.jsx("p",{className:"text-gray-600",children:"Configure o Firebase para poder adicionar hinos."})})]})})]})})}function jU(){return g.jsx(tA,{children:g.jsx(VU,{})})}function FU(){return g.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:g.jsx(Dt,{className:"w-full max-w-md mx-4",children:g.jsxs(Lt,{className:"pt-6",children:[g.jsxs("div",{className:"flex mb-4 gap-2",children:[g.jsx(Eg,{className:"h-8 w-8 text-red-500"}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function UU(){const[,t]=Rr(),{programacao:e,removeItem:n}=dh(),r=()=>t("/"),s=e.reduce((a,c)=>(a[c.organKey]||(a[c.organKey]=[]),a[c.organKey].push(c),a),{}),i=a=>{var c;return((c=ac.find(u=>u.key===a))==null?void 0:c.name)||a},o=a=>{t(`/organ/${a.organKey}/hymn/${a.hymnIndex}`)};return g.jsx(Yt,{title:"Programao",breadcrumbs:["Programao"],showBackButton:!0,onBackClick:r,children:g.jsx("div",{className:"max-w-4xl mx-auto",children:e.length===0?g.jsx("div",{className:"text-center py-8",children:g.jsx("p",{className:"text-church-text opacity-75",children:"Nenhum hino programado."})}):Object.entries(s).map(([a,c])=>g.jsx(Dt,{className:"mb-6",children:g.jsxs(Lt,{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-bold text-church-primary mb-4",children:i(a)}),g.jsx("div",{className:"space-y-3",children:c.map(u=>g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-church-text",children:u.titulo}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(xe,{size:"sm",onClick:()=>o(u),"data-testid":`button-play-${u.organKey}-${u.hymnIndex}`,children:"Tocar"}),g.jsx(xe,{size:"sm",variant:"destructive",onClick:()=>n(u.organKey,u.hymnIndex),className:"px-2","data-testid":`button-remove-${u.organKey}-${u.hymnIndex}`,children:g.jsx(XT,{className:"h-4 w-4"})})]})]},`${u.organKey}-${u.hymnIndex}`))})]})},a))})})}function zU(){return g.jsxs(Nb,{children:[g.jsx(Or,{path:"/",component:M3}),g.jsx(Or,{path:"/organ/:organKey",children:t=>g.jsx(q3,{organKey:t.organKey})}),g.jsx(Or,{path:"/organ/:organKey/hymn/:hymnIndex",children:t=>g.jsx(mU,{organKey:t.organKey,hymnIndex:t.hymnIndex})}),g.jsx(Or,{path:"/programacao",component:UU}),g.jsx(Or,{path:"/admin",component:LU}),g.jsx(Or,{path:"/login",component:MU}),g.jsx(Or,{path:"/config",component:jU}),g.jsx(Or,{component:FU})]})}function BU(){return g.jsx(_O,{children:g.jsx(Zb,{client:mk,children:g.jsx(g3,{children:g.jsx(y3,{children:g.jsx(yO,{children:g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(b3,{}),g.jsx(R3,{}),g.jsx(zU,{}),g.jsx(x2,{}),g.jsx(P3,{}),g.jsx(k3,{})]})})})})})})}const $U=Node.prototype.insertBefore,HU=Node.prototype.removeChild;let Zw=!1;function qU(){Zw||(Zw=!0,Node.prototype.insertBefore=function(t,e){try{return e&&this.contains&&!this.contains(e)?this.appendChild(t):e&&e.parentNode!==this?this.appendChild(t):$U.call(this,t,e)}catch{try{return this.appendChild(t)}catch{return t}}},Node.prototype.removeChild=function(t){try{return this.contains&&!this.contains(t)?t:HU.call(this,t)}catch{return t}},window.addEventListener("error",t=>{var e,n,r;if((e=t.message)!=null&&e.includes("insertBefore")||(n=t.message)!=null&&n.includes("removeChild")||(r=t.message)!=null&&r.includes("NotFoundError"))return console.warn("DOM Error Suppressed:",t.message),t.preventDefault(),t.stopPropagation(),!1},!0),console.log("DOM Error Suppression enabled"))}qU();window.addEventListener("error",t=>{if(t.message&&(t.message.includes("insertBefore")||t.message.includes("runtime-error-plugin")||t.message.includes("Failed to execute 'insertBefore' on 'Node'")||t.message.includes("NotFoundError")||t.message.includes("DOM manipulation")))return console.warn("Vite plugin error suppressed:",t.message),t.preventDefault(),t.stopPropagation(),!1},!0);window.addEventListener("unhandledrejection",t=>{t.reason&&t.reason.message&&(t.reason.message.includes("insertBefore")||t.reason.message.includes("runtime-error-plugin"))&&(console.warn("Vite plugin promise rejection suppressed"),t.preventDefault())});if(typeof window<"u"){const t=console.error,e=console.warn;console.error=function(...n){const r=n.join(" ");if(!(r.includes("insertBefore")||r.includes("runtime-error-plugin")||r.includes("removeChild")||r.includes("NotFoundError")||r.includes("Failed to execute")||r.includes("DOM")&&r.includes("manipulation")))return t.apply(console,n)},console.warn=function(...n){const r=n.join(" ");if(!(r.includes("DOM Error Suppressed")||r.includes("insertBefore with invalid reference node")))return e.apply(console,n)}}"serviceWorker"in navigator&&window.addEventListener("load",()=>{bt.register().then(t=>{t&&(console.log("[PWA] Service Worker registered successfully"),_3())})});const eE=document.getElementById("root");eE?TT(eE).render(g.jsx(BU,{})):console.error('Root element not found. Make sure there is a div with id="root" in your HTML.');
